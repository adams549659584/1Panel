import{_ as Z,d as ee,r as m,x as te,o as ae,E as oe,A as le,ac as se,C as re,I as ne,J as ie,l as ue,a1 as pe,a2 as de,au as me,av as ce,a3 as fe,m as ve,ah as _e,a4 as be,ao as ge,a5 as ye,Y as ke,b as f,h as w,f as d,e as a,w as o,g as i,c as E,t as r,O as b,y as Ve,j as p,$ as R,q as $e,s as we}from"./index-9eeac04e.js";/* empty css                *//* empty css               *//* empty css                *//* empty css                 *//* empty css              *//* empty css            *//* empty css             *//* empty css              *//* empty css               */import"./form-item-d76e7d20.js";/* empty css              *//* empty css                    *//* empty css                     *//* empty css             *//* empty css                    *//* empty css               *//* empty css            */import{j as Re,o as he,T as Se}from"./index-b02b032a.js";import{_ as Ce}from"./layout-content-27c09564.js";import{_ as De}from"./index-8a66c1e6.js";import{N as F,O as Ee,P as Ie,Q as Ue,R as He}from"./container-186b6752.js";import"./index-5ffc91ba.js";const Ne=k=>($e("data-v-4da64976"),k=k(),we(),k),Be={class:"a-card",style:{"margin-top":"20px"}},je={key:2,class:"buttons"},Me={key:3,class:"buttons"},Je=Ne(()=>d("br",null,null,-1)),Te={class:"input-help"},Ae={class:"input-help"},Fe={key:1},Oe={style:{"margin-top":"10px"}},xe={class:"stopCheckbox"},ze={class:"dialog-footer"},Pe=ee({__name:"index",setup(k){const u=m(!1),I=m(!1),O=[Re(),he],v=m("base"),l=te({status:"",version:"",mirrors:"",registries:"",liveRestore:!1,iptables:!0,cgroupDriver:""}),U=m(),V=m(),h=m(),g=m(),S=m(),C=m(),x=async e=>{!e||e.validate(async t=>{if(!t||!t)return;let c={header:p.global.t("database.confChange"),operationInfo:p.global.t("database.restartNowHelper"),submitInputInfo:p.global.t("database.restartNow")};h.value.acceptParams(c)})},z=async()=>{let e={header:p.global.t("database.confChange"),operationInfo:p.global.t("database.restartNowHelper"),submitInputInfo:p.global.t("database.restartNow")};h.value.acceptParams(e)},$=async e=>{if(e==="stop"){g.value=!0;return}let t={stopService:!1,stopSocket:!1,operation:e};u.value=!0,await F(t).then(()=>{u.value=!1,y(),D(),R(p.global.t("commons.msg.operationSuccess"))}).catch(()=>{u.value=!1})},P=async()=>{let e={stopService:C.value,stopSocket:S.value,operation:"stop"};u.value=!0,await F(e).then(()=>{u.value=!1,g.value=!1,y(),D(),R(p.global.t("commons.msg.operationSuccess"))}).catch(()=>{u.value=!1})},L=async()=>{if(v.value==="all"){let n={file:V.value};u.value=!0,await Ee(n).then(()=>{u.value=!1,R(p.global.t("commons.msg.operationSuccess"))}).catch(()=>{u.value=!1});return}let e=l.mirrors.split(`
`),t=l.registries.split(`
`),c={status:l.status,version:"",registryMirrors:e.filter(function(n){return n!==null&&n!==""&&n!==void 0}),insecureRegistries:t.filter(function(n){return n!==null&&n!==""&&n!==void 0}),liveRestore:l.liveRestore,iptables:l.iptables,cgroupDriver:l.cgroupDriver};u.value=!0,await Ie(c).then(()=>{u.value=!1,y(),R(p.global.t("commons.msg.operationSuccess"))}).catch(()=>{u.value=!1})},q=async()=>{const e=await He();e.data==="daemon.json is not find in path"?I.value=!0:V.value=e.data},D=async()=>{v.value==="all"?q():(I.value=!1,y())},y=async()=>{const e=await Ue();l.status=e.data.status,l.version=e.data.version,l.cgroupDriver=e.data.cgroupDriver,l.liveRestore=e.data.liveRestore,l.iptables=e.data.iptables,l.mirrors=e.data.registryMirrors?e.data.registryMirrors.join(`
`):"",l.registries=e.data.insecureRegistries?e.data.insecureRegistries.join(`
`):""};return ae(()=>{y()}),(e,t)=>{const c=oe,n=le,H=se,G=re,N=ne,B=ie,j=ue,M=pe,_=de,J=me,T=ce,Q=fe,W=ve,Y=_e,A=be,K=ge,X=ye;return ke((f(),w("div",null,[d("div",Be,[a(G,null,{default:o(()=>[d("div",null,[a(c,{style:{float:"left"},effect:"dark",type:"success"},{default:o(()=>[i("Docker")]),_:1}),l.status==="Running"?(f(),E(c,{key:0,round:"",class:"status-content",type:"success"},{default:o(()=>[i(r(e.$t("commons.status.running")),1)]),_:1})):b("",!0),l.status==="Stopped"?(f(),E(c,{key:1,round:"",class:"status-content",type:"info"},{default:o(()=>[i(r(e.$t("commons.status.stopped")),1)]),_:1})):b("",!0),a(c,{class:"status-content"},{default:o(()=>[i(r(e.$t("app.version"))+": "+r(l.version),1)]),_:1}),l.status==="Running"?(f(),w("span",je,[a(n,{type:"primary",onClick:t[0]||(t[0]=s=>$("stop")),link:""},{default:o(()=>[i(r(e.$t("container.stop")),1)]),_:1}),a(H,{direction:"vertical"}),a(n,{type:"primary",onClick:t[1]||(t[1]=s=>$("restart")),link:""},{default:o(()=>[i(r(e.$t("container.restart")),1)]),_:1})])):b("",!0),l.status==="Stopped"?(f(),w("span",Me,[a(n,{type:"primary",onClick:t[2]||(t[2]=s=>$("start")),link:""},{default:o(()=>[i(r(e.$t("container.start")),1)]),_:1}),a(H,{direction:"vertical"}),a(n,{type:"primary",onClick:t[3]||(t[3]=s=>$("restart")),link:""},{default:o(()=>[i(r(e.$t("container.restart")),1)]),_:1})])):b("",!0)])]),_:1})]),a(Ce,{style:{"margin-top":"20px"},title:e.$t("container.setting"),divider:!0},{main:o(()=>[a(B,{modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=s=>v.value=s),onChange:D},{default:o(()=>[a(N,{label:"base"},{default:o(()=>[i(r(e.$t("database.baseConf")),1)]),_:1}),a(N,{label:"all"},{default:o(()=>[i(r(e.$t("database.allConf")),1)]),_:1})]),_:1},8,["modelValue"]),v.value==="base"?(f(),E(W,{key:0,style:{"margin-top":"20px"}},{default:o(()=>[a(j,{span:1},{default:o(()=>[Je]),_:1}),a(j,{span:10},{default:o(()=>[a(Q,{model:l,"label-position":"left",ref_key:"formRef",ref:U,"label-width":"120px"},{default:o(()=>[a(_,{label:e.$t("container.mirrors"),prop:"mirrors"},{default:o(()=>[a(M,{type:"textarea",placeholder:e.$t("container.mirrorHelper"),autosize:{minRows:3,maxRows:10},modelValue:l.mirrors,"onUpdate:modelValue":t[5]||(t[5]=s=>l.mirrors=s)},null,8,["placeholder","modelValue"]),d("span",Te,r(e.$t("container.mirrorsHelper")),1)]),_:1},8,["label"]),a(_,{label:e.$t("container.registries"),prop:"registries"},{default:o(()=>[a(M,{type:"textarea",placeholder:e.$t("container.registrieHelper"),autosize:{minRows:3,maxRows:10},modelValue:l.registries,"onUpdate:modelValue":t[6]||(t[6]=s=>l.registries=s)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),a(_,{label:"iptables",prop:"iptables"},{default:o(()=>[a(J,{modelValue:l.iptables,"onUpdate:modelValue":t[7]||(t[7]=s=>l.iptables=s)},null,8,["modelValue"])]),_:1}),a(_,{label:"live-restore",prop:"liveRestore"},{default:o(()=>[a(J,{modelValue:l.liveRestore,"onUpdate:modelValue":t[8]||(t[8]=s=>l.liveRestore=s)},null,8,["modelValue"]),d("span",Ae,r(e.$t("container.liveHelper")),1)]),_:1}),a(_,{label:"cgroup-driver",prop:"cgroupDriver"},{default:o(()=>[a(B,{modelValue:l.cgroupDriver,"onUpdate:modelValue":t[9]||(t[9]=s=>l.cgroupDriver=s)},{default:o(()=>[a(T,{label:"cgroupfs"},{default:o(()=>[i("cgroupfs")]),_:1}),a(T,{label:"systemd"},{default:o(()=>[i("systemd")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(_,null,{default:o(()=>[a(n,{disabled:u.value,type:"primary",onClick:t[10]||(t[10]=s=>x(U.value))},{default:o(()=>[i(r(e.$t("commons.button.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})):b("",!0),v.value==="all"?(f(),w("div",Fe,[a(Ve(Se),{autofocus:!0,placeholder:"# The Docker configuration file does not exist or is empty (/etc/docker/daemon.json)","indent-with-tab":!0,tabSize:4,style:{"margin-top":"10px",height:"calc(100vh - 430px)"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:O,modelValue:V.value,"onUpdate:modelValue":t[11]||(t[11]=s=>V.value=s)},null,8,["modelValue"]),a(n,{disabled:u.value,type:"primary",onClick:z,style:{"margin-top":"5px"}},{default:o(()=>[i(r(e.$t("commons.button.save")),1)]),_:1},8,["disabled"])])):b("",!0)]),_:1},8,["title"]),a(K,{modelValue:g.value,"onUpdate:modelValue":t[15]||(t[15]=s=>g.value=s),title:e.$t("app.checkTitle"),width:"50%","destroy-on-close":!0},{footer:o(()=>[d("span",ze,[a(n,{onClick:t[14]||(t[14]=s=>g.value=!1)},{default:o(()=>[i(r(e.$t("commons.button.cancel")),1)]),_:1}),a(n,{type:"primary",onClick:P},{default:o(()=>[i(r(e.$t("commons.button.confirm")),1)]),_:1})])]),default:o(()=>[a(Y,{closable:!1},{default:o(()=>[i(r(e.$t("container.stopHelper"))+" ",1),d("li",null,r(e.$t("container.stopHelper2")),1),d("li",null,r(e.$t("container.stopHelper3")),1)]),_:1}),d("div",Oe,[a(A,{modelValue:C.value,"onUpdate:modelValue":t[12]||(t[12]=s=>C.value=s),label:"docker.service"},null,8,["modelValue"])]),d("div",xe,[a(A,{modelValue:S.value,"onUpdate:modelValue":t[13]||(t[13]=s=>S.value=s),label:"docker.socket"},null,8,["modelValue"])])]),_:1},8,["modelValue","title"]),a(De,{ref_key:"confirmDialogRef",ref:h,onConfirm:L},null,512)])),[[X,u.value]])}}});var ft=Z(Pe,[["__scopeId","data-v-4da64976"]]);export{ft as default};
