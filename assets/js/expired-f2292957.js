import{d as S,x as w,r as $,j as m,o as k,l as I,a1 as F,a2 as N,A as R,m as B,C as T,b as u,h as U,e as o,w as a,f,t as y,y as c,a3 as q,c as g,O as b,g as D,U as M,$ as j,V as z}from"./index-609fd921.js";/* empty css             *//* empty css            *//* empty css               */import"./form-item-d76e7d20.js";/* empty css              */import{G as A,e as G}from"./setting-34057840.js";import{R as p}from"./form-rules-08616160.js";import"./index-e09fb15b.js";import"./util-bdb43d7e.js";import"./base64-e52cbffd.js";const H={class:"card-header"},O={style:{"font-size":"14px","font-weight":"500"}},J=f("br",null,null,-1),te=S({__name:"expired",setup(K){let n=w({userName:"",password:"",email:"",sessionTimeout:86400,localTime:"",panelName:"",theme:"",language:"",serverPort:8888,securityEntrance:"",systemVersion:"",expirationDays:0,expirationTime:"",complexityVerification:"enable",mfaStatus:"",mfaSecret:"",monitorStatus:"",monitorStoreDays:30,messageType:"",emailVars:"",weChatVars:"",dingVars:""});const P=$(),_=w({oldPassword:[p.requiredInput],newPassword:[p.requiredInput,{min:6,message:m.global.t("commons.rule.commonPassword"),trigger:"blur"}],newPasswordComplexity:[p.requiredInput,p.password],retryPassword:[p.requiredInput,{validator:V,trigger:"blur"}]}),e=w({oldPassword:"",newPassword:"",newPasswordComplexity:"",retryPassword:""});function V(r,s,t){if((n.complexityVerification==="disable"?e.newPassword:e.newPasswordComplexity)!==e.retryPassword)return t(new Error(m.global.t("commons.rule.rePassword")));t()}const x=async r=>{!r||r.validate(async s=>{if(!s)return;let t=n.complexityVerification==="disable"?e.newPassword:e.newPasswordComplexity;if(t===e.oldPassword){M(m.global.t("setting.duplicatePassword"));return}await A({oldPassword:e.oldPassword,newPassword:t}),j(m.global.t("commons.msg.operationSuccess")),z.push({name:"home"})})},C=async()=>{n=(await G()).data};return k(()=>{C()}),(r,s)=>{const t=I,d=F,i=N,h=R,E=B,v=T;return u(),U("div",null,[o(v,{style:{"margin-top":"20px"}},{header:a(()=>[f("div",H,[f("span",O,y(r.$t("setting.expiredHelper")),1)])]),default:a(()=>[o(E,null,{default:a(()=>[o(t,{span:1},{default:a(()=>[J]),_:1}),o(t,{span:10},{default:a(()=>[o(c(q),{model:e,ref_key:"passFormRef",ref:P,rules:_,"label-position":"left","label-width":"160px"},{default:a(()=>[o(i,{label:r.$t("setting.oldPassword"),prop:"oldPassword"},{default:a(()=>[o(d,{type:"password","show-password":"",clearable:"",modelValue:e.oldPassword,"onUpdate:modelValue":s[0]||(s[0]=l=>e.oldPassword=l)},null,8,["modelValue"])]),_:1},8,["label"]),c(n).complexityVerification==="disable"?(u(),g(i,{key:0,label:r.$t("setting.newPassword"),prop:"newPassword"},{default:a(()=>[o(d,{type:"password","show-password":"",clearable:"",modelValue:e.newPassword,"onUpdate:modelValue":s[1]||(s[1]=l=>e.newPassword=l)},null,8,["modelValue"])]),_:1},8,["label"])):b("",!0),c(n).complexityVerification==="enable"?(u(),g(i,{key:1,label:r.$t("setting.newPassword"),prop:"newPasswordComplexity"},{default:a(()=>[o(d,{type:"password","show-password":"",clearable:"",modelValue:e.newPasswordComplexity,"onUpdate:modelValue":s[2]||(s[2]=l=>e.newPasswordComplexity=l)},null,8,["modelValue"])]),_:1},8,["label"])):b("",!0),o(i,{label:r.$t("setting.retryPassword"),prop:"retryPassword"},{default:a(()=>[o(d,{type:"password","show-password":"",clearable:"",modelValue:e.retryPassword,"onUpdate:modelValue":s[3]||(s[3]=l=>e.retryPassword=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(i,null,{default:a(()=>[o(h,{onClick:s[4]||(s[4]=l=>x(P.value))},{default:a(()=>[D(y(r.$t("commons.button.confirm")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})])}}});export{te as default};
