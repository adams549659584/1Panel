import{_ as T,d as B,r as i,x as P,o as A,A as D,l as z,a1 as K,m as N,K as R,L as F,aq as M,E as U,k as j,a5 as q,b as p,h as b,Y as O,c as Y,w as a,e,g as u,t as c,f as G,ae as H,y as J,j as d,$ as Q}from"./index-9eeac04e.js";/* empty css                */import"./tooltip-b30db216.js";/* empty css               *//* empty css            *//* empty css                     *//* empty css                 *//* empty css              *//* empty css               *//* empty css            *//* empty css               */import{_ as W}from"./index-8d9ad139.js";import{T as X}from"./index-2dd05578.js";import{_ as Z}from"./index-8a66c1e6.js";import{_ as x}from"./layout-content-27c09564.js";import{b as ee}from"./util-cbaccc93.js";import{a as te,c as oe}from"./log-4c7ea13a.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                    *//* empty css             */import"./index-5ffc91ba.js";const ae={class:"search-button"},le={key:0},se={key:1},ne=B({__name:"index",setup(ie){const r=i(),v=i(),$=i(),m=P({currentPage:1,pageSize:10,total:0}),g=i(""),f=i(""),s=async()=>{let o={ip:g.value,status:f.value,page:m.currentPage,pageSize:m.pageSize};r.value=!0,await te(o).then(t=>{r.value=!1,v.value=t.data.items,m.total=t.data.total}).catch(()=>{r.value=!1})},w=async()=>{let o={header:d.global.t("logs.deleteLogs"),operationInfo:d.global.t("commons.msg.delete"),submitInputInfo:d.global.t("logs.deleteLogs")};$.value.acceptParams(o)},h=async()=>{await oe({logType:"login"}),s(),Q(d.global.t("commons.msg.operationSuccess"))};return A(()=>{s()}),(o,t)=>{const C=D,y=z,E=K,k=N,_=R,V=F,n=M,S=U,L=j,I=q;return p(),b("div",null,[O((p(),Y(x,{title:o.$t("logs.login")},{toolbar:a(()=>[e(k,null,{default:a(()=>[e(y,{span:16},{default:a(()=>[e(C,{type:"primary",plain:"",onClick:t[0]||(t[0]=l=>w())},{default:a(()=>[u(c(o.$t("logs.deleteLogs")),1)]),_:1})]),_:1}),e(y,{span:8},{default:a(()=>[e(X,{onSearch:t[1]||(t[1]=l=>s())}),G("div",ae,[e(E,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=l=>g.value=l),clearable:"",onClear:t[3]||(t[3]=l=>s()),"suffix-icon":"Search",onKeyup:t[4]||(t[4]=H(l=>s(),["enter"])),onBlur:t[5]||(t[5]=l=>s()),placeholder:o.$t("commons.button.search")+" ip"},null,8,["modelValue","placeholder"])])]),_:1})]),_:1})]),search:a(()=>[e(V,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=l=>f.value=l),onChange:t[7]||(t[7]=l=>s()),clearable:""},{prefix:a(()=>[u(c(o.$t("commons.table.status")),1)]),default:a(()=>[e(_,{label:o.$t("commons.table.all"),value:""},null,8,["label"]),e(_,{label:o.$t("commons.status.success"),value:"Success"},null,8,["label"]),e(_,{label:o.$t("commons.status.failed"),value:"Failed"},null,8,["label"])]),_:1},8,["modelValue"])]),main:a(()=>[e(W,{"pagination-config":m,data:v.value,onSearch:s},{default:a(()=>[e(n,{"min-width":"40",label:o.$t("logs.loginIP"),prop:"ip"},null,8,["label"]),e(n,{"min-width":"40",label:o.$t("logs.loginAddress"),prop:"address"},null,8,["label"]),e(n,{label:o.$t("logs.loginAgent"),"show-overflow-tooltip":"",prop:"agent"},null,8,["label"]),e(n,{"min-width":"40",label:o.$t("logs.loginStatus"),prop:"status"},{default:a(({row:l})=>[l.status==="Success"?(p(),b("div",le,[e(S,{type:"success"},{default:a(()=>[u(c(o.$t("commons.status.success")),1)]),_:1})])):(p(),b("div",se,[e(L,{class:"box-item",effect:"dark",content:l.message,placement:"top-start"},{default:a(()=>[e(S,{type:"danger"},{default:a(()=>[u(c(o.$t("commons.status.failed")),1)]),_:1})]),_:2},1032,["content"])]))]),_:1},8,["label"]),e(n,{prop:"createdAt",label:o.$t("commons.table.date"),formatter:J(ee),"show-overflow-tooltip":""},null,8,["label","formatter"])]),_:1},8,["pagination-config","data"])]),_:1},8,["title"])),[[I,r.value]]),e(Z,{ref_key:"confirmDialogRef",ref:$,onConfirm:h},null,512)])}}});var Pe=T(ne,[["__scopeId","data-v-ce445692"]]);export{Pe as default};
