import{d as D,r as d,b as _,h as f,D as L,e as a,w as t,O as J,a6 as K,ai as M,x as Q,o as W,aC as Y,X as I,c as k,y as p,aD as Z,f as b,F as N,i as S,g as H,t as x,ag as q,A as ee,a0 as te,aE as ae,aF as ne,aG as le,a4 as oe,aq as se,aH as ie,aI as re,p as pe}from"./index-609fd921.js";/* empty css               *//* empty css                *//* empty css              *//* empty css                 *//* empty css            */import"./tooltip-b30db216.js";/* empty css             *//* empty css                     *//* empty css               *//* empty css                     *//* empty css             */import{b as _e}from"./files-c7fff4dc.js";const ce=D({__name:"index",setup(C,{expose:h}){const c=d();return h({bread:c}),(i,v)=>(_(),f("span",{class:"bread-crumbs",ref_key:"bread",ref:c},[L(i.$slots,"default")],512))}});const ue={key:0,class:K("panel p-arrow-right")},$=D({__name:"bread-crumbs-item",props:{right:Boolean},setup(C,{expose:h}){const c=C,i=d();return h({item:i}),(v,E)=>{const o=M;return _(),f("span",{class:"bread-crumbs-item",ref_key:"item",ref:i},[a(o,null,{default:t(()=>[L(v.$slots,"default")]),_:3}),c.right?J("",!0):(_(),f("i",ue))],512)}}});const de=b("span",{class:"el-dropdown-link"},"...",-1),me={class:"sle",style:{"max-width":"200px"}},fe={class:"sle",style:{"max-width":"200px"}},Be=D({__name:"index",props:{path:{type:String,default:"/"},dir:{type:Boolean,default:!1}},emits:["choose"],setup(C,{emit:h}){const c=C;let i=d(""),v=d(),E=d(!1),o=d([]),s=Q({path:"/",expand:!0,page:1,pageSize:300});const g=d(!1),T=l=>{i.value=l.name,h("choose",l.path),g.value=!1},j=async l=>{if(l.isDir){const e=l.name;o.value.push(e),s.path==="/"?s.path=s.path+e:s.path=s.path+"/"+e,w(s)}},y=async l=>{let e="/";if(l!=-1){const u=o.value.slice(0,l+1);for(let m in u)e=e+"/"+u[m]}s.path=e,w(s),g.value=!0},w=async l=>{l.dir=c.dir,E.value=!0,await _e(l).then(e=>{v.value=e.data.items,l.path=e.data.path;const u=l.path.split("/");o.value=[];for(const m of u)m!=""&&o.value.push(m)}).finally(()=>{E.value=!1})};return W(()=>{s.path=c.path,i.value="",w(s)}),Y(()=>{s.path=c.path,w(s)}),(l,e)=>{const u=ee,m=I("Close"),V=te,z=I("HomeFilled"),A=ae,G=ne,P=le,U=oe,B=se,F=ie,O=M,R=re,X=pe;return _(),k(X,{placement:"right",width:400,trigger:"click",title:l.$t("file.list"),visible:g.value,"popper-class":"file-list"},{reference:t(()=>[a(u,{icon:p(Z),onClick:e[0]||(e[0]=n=>g.value=!0)},null,8,["icon"])]),default:t(()=>[b("div",null,[a(u,{class:"close",link:"",onClick:e[1]||(e[1]=n=>g.value=!1)},{default:t(()=>[a(V,null,{default:t(()=>[a(m)]),_:1})]),_:1}),a(ce,null,{default:t(()=>[a($,{onClick:e[2]||(e[2]=n=>y(-1)),right:p(o).length==0},{default:t(()=>[a(V,null,{default:t(()=>[a(z)]),_:1})]),_:1},8,["right"]),p(o).length>2?(_(),f(N,{key:0},[a($,null,{default:t(()=>[a(P,{ref:"dropdown1",trigger:"click",onCommand:e[3]||(e[3]=n=>y(n))},{dropdown:t(()=>[a(G,null,{default:t(()=>[(_(!0),f(N,null,S(p(o).slice(0,-1),(n,r)=>(_(),k(A,{key:r,command:r},{default:t(()=>[H(x(n),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:t(()=>[de]),_:1},512)]),_:1}),a($,{onClick:e[4]||(e[4]=n=>y(p(o).length-1)),right:!0},{default:t(()=>[b("span",me,x(p(o)[p(o).length-1]),1)]),_:1})],64)):(_(!0),f(N,{key:1},S(p(o),(n,r)=>(_(),k($,{key:r,onClick:he=>y(r),right:r==p(o).length-1},{default:t(()=>[b("span",fe,x(n),1)]),_:2},1032,["onClick","right"]))),128))]),_:1})]),b("div",null,[a(R,{data:p(v),"highlight-current-row":"",height:"40vh"},{default:t(()=>[a(B,{width:"40",fix:""},{default:t(({row:n})=>[a(U,{modelValue:p(i),"onUpdate:modelValue":e[5]||(e[5]=r=>q(i)?i.value=r:i=r),"true-label":n.name,onClick:r=>T(n)},null,8,["modelValue","true-label","onClick"])]),_:1}),a(B,{"show-overflow-tooltip":"",fix:""},{default:t(({row:n})=>[n.isDir?(_(),k(F,{key:0,className:"table-icon",iconName:"p-file-folder"})):(_(),k(F,{key:1,className:"table-icon",iconName:"p-file-normal"})),a(O,{underline:!1,onClick:r=>j(n)},{default:t(()=>[H(x(n.name),1)]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["title","visible"])}}});export{Be as _};
