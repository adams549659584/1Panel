import{d as V,r as y,x as A,o as M,X as O,b as u,h as b,y as e,e as s,w as o,f as r,g as d,t as l,c as v,O as $,V as D,ap as K,j as i,$ as q,E as P,A as j,ac as H,C as L,a0 as Q}from"./index-609fd921.js";/* empty css             *//* empty css             *//* empty css                    *//* empty css               *//* empty css            */import{_ as W}from"./no_app-68a0aee4.js";import{C as X,g as z}from"./app-1a8bdb12.js";import{_ as F}from"./index-3ec321ac.js";import{_ as G}from"./layout-content-47227111.js";const J={key:0,class:"app-status"},U={class:"buttons"},Y={key:1},Z={class:"app-warn"},tt=r("div",null,[r("img",{src:W})],-1),ut=V({__name:"index",props:{appKey:{type:String,default:"openresty"}},emits:["setting","isExist","before","update:loading","update:maskShow"],setup(E,{emit:n}){const w=E;let c=y(""),a=y({app:"",version:"",status:"",lastBackupAt:"",appInstallId:0,isExist:!1,containerName:""}),_=A({installId:0,operate:""}),k=y(1);const B=()=>{n("setting",!1)},S=async t=>{D.push({name:"AppDetail",params:{appKey:t}})},h=async()=>{const t=await X(c.value);a.value=t.data,n("isExist",t.data),_.installId=t.data.appInstallId,k.value++},g=async t=>{n("update:maskShow",!1),_.operate=t,K.confirm(i.global.t("app.operatorHelper",[i.global.t("app."+t)]),i.global.t("app."+t),{confirmButtonText:i.global.t("commons.button.confirm"),cancelButtonText:i.global.t("commons.button.cancel"),type:"info"}).then(()=>{n("update:maskShow",!0),n("update:loading",!0),n("before"),z(_).then(()=>{n("update:loading",!1),q(i.global.t("commons.msg.operationSuccess")),h()}).catch(()=>{n("update:loading",!1)})}).catch(()=>{n("update:maskShow",!0)})},x=t=>{switch(t){case"openresty":return i.global.t("website.website");case"mysql":return"MySQL "+i.global.t("menu.database");case"redis":return"Redis "+i.global.t("menu.database")}};return M(()=>{c.value=w.appKey,h()}),(t,p)=>{const C=P,m=j,I=H,R=L,N=O("Position"),T=Q;return u(),b("div",null,[e(a).isExist?(u(),b("div",J,[s(R,null,{default:o(()=>[r("div",null,[s(C,{effect:"dark",type:"success"},{default:o(()=>[d(l(e(a).app),1)]),_:1}),(u(),v(F,{class:"status-content",key:e(k),status:e(a).status},null,8,["status"])),s(C,{class:"status-content"},{default:o(()=>[d(l(t.$t("app.version"))+":"+l(e(a).version),1)]),_:1}),r("span",U,[e(a).status!="Running"?(u(),v(m,{key:0,type:"primary",link:"",onClick:p[0]||(p[0]=f=>g("start")),disabled:e(a).status==="Installing"},{default:o(()=>[d(l(t.$t("app.start")),1)]),_:1},8,["disabled"])):$("",!0),e(a).status==="Running"?(u(),v(m,{key:1,type:"primary",link:"",onClick:p[1]||(p[1]=f=>g("stop"))},{default:o(()=>[d(l(t.$t("app.stop")),1)]),_:1})):$("",!0),s(I,{direction:"vertical"}),s(m,{type:"primary",link:"",disabled:e(a).status==="Installing",onClick:p[2]||(p[2]=f=>g("restart"))},{default:o(()=>[d(l(t.$t("app.restart")),1)]),_:1},8,["disabled"]),s(I,{direction:"vertical"}),s(m,{type:"primary",onClick:B,link:"",disabled:e(a).status==="Installing"||e(a).status!=="Running"&&e(a).app==="OpenResty"},{default:o(()=>[d(l(t.$t("commons.button.set")),1)]),_:1},8,["disabled"])])])]),_:1})])):(u(),b("div",Y,[s(G,{title:x(e(c)),divider:!0},{main:o(()=>[r("div",Z,[r("div",null,[r("span",null,l(t.$t("app.checkInstalledWarn",[e(a).app])),1),r("span",{onClick:p[3]||(p[3]=f=>S(e(c)))},[s(T,null,{default:o(()=>[s(N)]),_:1}),d(" "+l(t.$t("database.goInstall")),1)]),tt])])]),_:1},8,["title"])]))])}}});export{ut as _};
