import{d as X,r as d,x as G,b as c,c as k,w as a,e as t,f as r,g as y,t as m,Y as fe,y as K,a3 as te,h as F,F as J,i as j,O as T,U as ve,j as $,$ as be,a1 as se,a2 as oe,K as Q,L as Y,av as he,J as _e,aw as ye,A as ae,C as re,a4 as ne,l as ge,m as Ve,af as Z,a5 as we,a as Ce,ax as $e,n as ke}from"./index-609fd921.js";/* empty css                */import{_ as ee}from"./index-110fbc44.js";/* empty css                *//* empty css            *//* empty css                 *//* empty css             *//* empty css               *//* empty css                     *//* empty css              *//* empty css                    *//* empty css              *//* empty css            *//* empty css               *//* empty css               */import"./form-item-d76e7d20.js";import{R as H}from"./form-rules-08616160.js";import{a as Ue,b as Se,c as De,d as Pe,e as Ie}from"./container-94920957.js";/* empty css             */import{d as Re,f as xe,i as Be}from"./util-bdb43d7e.js";import{_ as q}from"./index-7dc48f6e.js";import{j as Ee,o as Ae,T as Fe}from"./index-5eb40136.js";import{x as Me,a as Te,b as ze}from"./xterm-addon-fit-023687d7.js";import{g as Ne}from"./base64-e52cbffd.js";const Oe={style:{width:"100%"},class:"tab-table"},We={key:0},Le={scope:"col",width:"48%",align:"left"},He={scope:"col",width:"48%",align:"left"},Je=r("th",{align:"left"},null,-1),je={width:"48%"},Ke={width:"48%"},qe={align:"left"},Ge={class:"input-help"},Xe={class:"input-help"},Qe={style:{width:"100%"},class:"tab-table"},Ye={key:0},Ze={scope:"col",width:"42%",align:"left"},el={scope:"col",width:"12%",align:"left"},ll={scope:"col",width:"42%",align:"left"},tl=r("th",{align:"left"},null,-1),ol={width:"42%"},al={width:"12%"},nl={width:"42%"},sl={align:"left"},rl={class:"dialog-footer"},Al=X({__name:"index",emits:["search"],setup(le,{expose:O,emit:U}){const f=d(!1),b=d(!1),e=G({name:"",image:"",cmdStr:"",cmd:[],publishAllPorts:!1,exposedPorts:[],nanoCPUs:0,memory:0,memoryItem:0,memoryUnit:"MB",cpuUnit:"Core",volumes:[],autoRemove:!1,labels:[],labelsStr:"",env:[],envStr:"",restartPolicy:""}),p=d(),g=d(),D=()=>{i(),b.value=!0,W(),x()},i=()=>{e.name="",e.image="",e.cmdStr="",e.cmd=[],e.publishAllPorts=!1,e.exposedPorts=[],e.nanoCPUs=0,e.memory=0,e.memoryItem=0,e.memoryUnit="MB",e.cpuUnit="Core",e.volumes=[],e.autoRemove=!1,e.labels=[],e.labelsStr="",e.env=[],e.envStr="",e.restartPolicy="no"},R=()=>{b.value=!1},P=G({name:[H.requiredInput,H.name],image:[H.requiredSelect],nanoCPUs:[H.number],memoryItem:[H.number]}),I=d(),A=()=>{let o={containerPort:null,hostPort:null};e.exposedPorts.push(o)},v=o=>{e.exposedPorts.splice(o,1)},u=()=>{let o={sourceDir:"",containerDir:"",mode:"rw"};e.volumes.push(o)},h=o=>{e.volumes.splice(o,1)},W=async()=>{const o=await Ue();p.value=o.data},x=async()=>{const o=await Se();g.value=o.data},E=async o=>{if(e.volumes.length!==0){for(const l of e.volumes)if(!l.containerDir||!l.sourceDir){ve($.global.t("container.volumeHelper"));return}}!o||o.validate(async l=>{if(!!l){switch(e.envStr.length!==0&&(e.env=e.envStr.split(`
`)),e.labelsStr.length!==0&&(e.labels=e.labelsStr.split(`
`)),e.cmdStr.length!==0&&(e.cmd=e.cmdStr.split(`
`)),e.memoryUnit){case"KB":e.memory=e.memoryItem*1024;break;case"MB":e.memory=e.memoryItem*1024*1024;break;case"GB":e.memory=e.memoryItem*1024*1024*1024;break}f.value=!0,await De(e).then(()=>{f.value=!1,be($.global.t("commons.msg.operationSuccess")),U("search"),b.value=!1}).catch(()=>{f.value=!1})}})};return O({acceptParams:D}),(o,l)=>{const s=se,_=oe,w=Q,B=Y,V=he,z=_e,M=ye,N=ae,C=re,ie=ne,ue=ge,de=Ve,me=Z,ce=we;return c(),k(me,{modelValue:b.value,"onUpdate:modelValue":l[16]||(l[16]=n=>b.value=n),"destroy-on-close":!0,"close-on-click-modal":!1,size:"50%"},{header:a(()=>[t(ee,{header:o.$t("container.createContainer"),back:R},null,8,["header"])]),footer:a(()=>[r("span",rl,[t(N,{disabled:f.value,onClick:l[14]||(l[14]=n=>b.value=!1)},{default:a(()=>[y(m(o.$t("commons.button.cancel")),1)]),_:1},8,["disabled"]),t(N,{disabled:f.value,type:"primary",onClick:l[15]||(l[15]=n=>E(I.value))},{default:a(()=>[y(m(o.$t("commons.button.confirm")),1)]),_:1},8,["disabled"])])]),default:a(()=>[fe((c(),k(K(te),{ref_key:"formRef",ref:I,"label-position":"top",model:e,rules:P,"label-width":"80px"},{default:a(()=>[t(de,{type:"flex",justify:"center"},{default:a(()=>[t(ue,{span:22},{default:a(()=>[t(_,{label:o.$t("container.name"),prop:"name"},{default:a(()=>[t(s,{clearable:"",modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=n=>e.name=n),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(_,{label:o.$t("container.image"),prop:"image"},{default:a(()=>[t(B,{style:{width:"100%"},"allow-create":"",filterable:"",modelValue:e.image,"onUpdate:modelValue":l[1]||(l[1]=n=>e.image=n)},{default:a(()=>[(c(!0),F(J,null,j(p.value,(n,L)=>(c(),k(w,{key:L,value:n.option,label:n.option},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(_,{label:o.$t("container.port")},{default:a(()=>[t(z,{modelValue:e.publishAllPorts,"onUpdate:modelValue":l[2]||(l[2]=n=>e.publishAllPorts=n),class:"ml-4"},{default:a(()=>[t(V,{label:!1},{default:a(()=>[y(m(o.$t("container.exposePort")),1)]),_:1}),t(V,{label:!0},{default:a(()=>[y(m(o.$t("container.exposeAll")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e.publishAllPorts?T("",!0):(c(),k(_,{key:0},{default:a(()=>[t(C,{style:{width:"100%"}},{default:a(()=>[r("table",Oe,[e.exposedPorts.length!==0?(c(),F("tr",We,[r("th",Le,[r("label",null,m(o.$t("container.serverPort")),1)]),r("th",He,[r("label",null,m(o.$t("container.containerPort")),1)]),Je])):T("",!0),(c(!0),F(J,null,j(e.exposedPorts,(n,L)=>(c(),F("tr",{key:L},[r("td",je,[t(M,{min:0,max:65535,style:{width:"100%"},"controls-position":"right",modelValue:n.hostPort,"onUpdate:modelValue":S=>n.hostPort=S,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),r("td",Ke,[t(M,{min:0,max:65535,style:{width:"100%"},"controls-position":"right",modelValue:n.containerPort,"onUpdate:modelValue":S=>n.containerPort=S,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),r("td",null,[t(N,{link:"",style:{"font-size":"10px"},onClick:S=>v(L)},{default:a(()=>[y(m(o.$t("commons.button.delete")),1)]),_:2},1032,["onClick"])])]))),128)),r("tr",null,[r("td",qe,[t(N,{onClick:l[3]||(l[3]=n=>A())},{default:a(()=>[y(m(o.$t("commons.button.add")),1)]),_:1})])])])]),_:1})]),_:1})),t(_,{label:o.$t("container.cmd"),prop:"cmdStr"},{default:a(()=>[t(s,{type:"textarea",placeholder:o.$t("container.cmdHelper"),autosize:{minRows:2,maxRows:4},modelValue:e.cmdStr,"onUpdate:modelValue":l[4]||(l[4]=n=>e.cmdStr=n)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),t(_,{prop:"autoRemove"},{default:a(()=>[t(ie,{modelValue:e.autoRemove,"onUpdate:modelValue":l[5]||(l[5]=n=>e.autoRemove=n)},{default:a(()=>[y(m(o.$t("container.autoRemove")),1)]),_:1},8,["modelValue"])]),_:1}),t(_,{label:o.$t("container.cpuQuota"),prop:"nanoCPUs"},{default:a(()=>[t(s,{type:"number",style:{width:"40%"},modelValue:e.nanoCPUs,"onUpdate:modelValue":l[7]||(l[7]=n=>e.nanoCPUs=n),modelModifiers:{number:!0}},{append:a(()=>[t(B,{modelValue:e.cpuUnit,"onUpdate:modelValue":l[6]||(l[6]=n=>e.cpuUnit=n),disabled:"",style:{width:"85px"}},{default:a(()=>[t(w,{label:"Core",value:"Core"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),r("span",Ge,m(o.$t("container.limitHelper")),1)]),_:1},8,["label"]),t(_,{label:o.$t("container.memoryLimit"),prop:"memoryItem"},{default:a(()=>[t(s,{style:{width:"40%"},modelValue:e.memoryItem,"onUpdate:modelValue":l[9]||(l[9]=n=>e.memoryItem=n),modelModifiers:{number:!0}},{append:a(()=>[t(B,{modelValue:e.memoryUnit,"onUpdate:modelValue":l[8]||(l[8]=n=>e.memoryUnit=n),placeholder:"Select",style:{width:"85px"}},{default:a(()=>[t(w,{label:"KB",value:"KB"}),t(w,{label:"MB",value:"MB"}),t(w,{label:"GB",value:"GB"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),r("span",Xe,m(o.$t("container.limitHelper")),1)]),_:1},8,["label"]),t(_,{label:o.$t("container.mount")},{default:a(()=>[t(C,{style:{width:"100%"}},{default:a(()=>[r("table",Qe,[e.volumes.length!==0?(c(),F("tr",Ye,[r("th",Ze,[r("label",null,m(o.$t("container.serverPath")),1)]),r("th",el,[r("label",null,m(o.$t("container.mode")),1)]),r("th",ll,[r("label",null,m(o.$t("container.containerDir")),1)]),tl])):T("",!0),(c(!0),F(J,null,j(e.volumes,(n,L)=>(c(),F("tr",{key:L},[r("td",ol,[t(B,{style:{width:"100%"},"allow-create":"",clearable:"",placeholder:o.$t("commons.msg.inputOrSelect"),filterable:"",modelValue:n.sourceDir,"onUpdate:modelValue":S=>n.sourceDir=S},{default:a(()=>[(c(!0),F(J,null,j(g.value,(S,pe)=>(c(),k(w,{key:pe,value:S.option,label:S.option},null,8,["value","label"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue"])]),r("td",al,[t(B,{style:{width:"100%"},filterable:"",modelValue:n.mode,"onUpdate:modelValue":S=>n.mode=S},{default:a(()=>[t(w,{value:"rw",label:o.$t("container.modeRW")},null,8,["label"]),t(w,{value:"ro",label:o.$t("container.modeR")},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),r("td",nl,[t(s,{modelValue:n.containerDir,"onUpdate:modelValue":S=>n.containerDir=S},null,8,["modelValue","onUpdate:modelValue"])]),r("td",null,[t(N,{link:"",style:{"font-size":"10px"},onClick:S=>h(L)},{default:a(()=>[y(m(o.$t("commons.button.delete")),1)]),_:2},1032,["onClick"])])]))),128)),r("tr",null,[r("td",sl,[t(N,{onClick:l[10]||(l[10]=n=>u())},{default:a(()=>[y(m(o.$t("commons.button.add")),1)]),_:1})])])])]),_:1})]),_:1},8,["label"]),t(_,{label:o.$t("container.tag"),prop:"labelsStr"},{default:a(()=>[t(s,{type:"textarea",placeholder:o.$t("container.tagHelper"),autosize:{minRows:2,maxRows:4},modelValue:e.labelsStr,"onUpdate:modelValue":l[11]||(l[11]=n=>e.labelsStr=n)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),t(_,{label:o.$t("container.env"),prop:"envStr"},{default:a(()=>[t(s,{type:"textarea",placeholder:o.$t("container.tagHelper"),autosize:{minRows:2,maxRows:4},modelValue:e.envStr,"onUpdate:modelValue":l[12]||(l[12]=n=>e.envStr=n)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),t(_,{label:o.$t("container.restartPolicy"),prop:"restartPolicy"},{default:a(()=>[t(z,{modelValue:e.restartPolicy,"onUpdate:modelValue":l[13]||(l[13]=n=>e.restartPolicy=n)},{default:a(()=>[t(V,{label:"unless-stopped"},{default:a(()=>[y(m(o.$t("container.unlessStopped")),1)]),_:1}),t(V,{label:"on-failure"},{default:a(()=>[y(m(o.$t("container.onFailure")),1)]),_:1}),t(V,{label:"no"},{default:a(()=>[y(m(o.$t("container.no")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[ce,f.value]])]),_:1},8,["modelValue"])}}}),Fl=X({__name:"index",setup(le,{expose:O}){const U=d(!1),f=d();let b=null,e=d(!0);const p=d({containerID:""}),g=async o=>{U.value=!0,p.value.containerID=o.containerID,D.value=[],i.value=[],R.value=[],P.value=[],I.value=[],A.value=[],v.value=[],u.value=[],f.value=5,e.value=!0,x(),b=setInterval(async()=>{U.value&&(e.value=!1,x())},1e3*f.value)},D=d([]),i=d([]),R=d([]),P=d([]),I=d([]),A=d([]),v=d([]),u=d([]),h=d({cpuChart:null,memoryChart:null,ioChart:null,networkChart:null}),W=()=>{clearInterval(Number(b)),b=setInterval(async()=>{U.value&&x()},1e3*f.value)},x=async()=>{const o=await Pe(p.value.containerID);D.value.push(o.data.cpuPercent.toFixed(2)),D.value.length>20&&D.value.splice(0,1),i.value.push(o.data.memory.toFixed(2)),i.value.length>20&&i.value.splice(0,1),R.value.push(o.data.cache.toFixed(2)),R.value.length>20&&R.value.splice(0,1),P.value.push(o.data.ioRead.toFixed(2)),P.value.length>20&&P.value.splice(0,1),I.value.push(o.data.ioWrite.toFixed(2)),I.value.length>20&&I.value.splice(0,1),A.value.push(o.data.networkTX.toFixed(2)),A.value.length>20&&A.value.splice(0,1),v.value.push(o.data.networkRX.toFixed(2)),v.value.length>20&&v.value.splice(0,1),u.value.push(Re(o.data.shotTime)),u.value.length>20&&u.value.splice(0,1),h.value.cpuChart={title:"CPU",xDatas:u.value,yDatas:[{name:"CPU",data:D.value}],formatStr:"%"},h.value.memoryChart={title:$.global.t("monitor.memory"),xDatas:u.value,yDatas:[{name:$.global.t("monitor.memory"),data:i.value},{name:$.global.t("container.cache"),data:R.value}],formatStr:"MB"},h.value.ioChart={title:$.global.t("monitor.disk")+" IO",xDatas:u.value,yDatas:[{name:$.global.t("monitor.read"),data:P.value},{name:$.global.t("monitor.write"),data:I.value}],formatStr:"MB"},h.value.networkChart={title:$.global.t("monitor.network"),xDatas:u.value,yDatas:[{name:$.global.t("monitor.up"),data:A.value},{name:$.global.t("monitor.down"),data:v.value}],formatStr:"KB/s"}},E=async()=>{U.value=!1,clearInterval(Number(b)),b=null,h.value={cpuChart:null,memoryChart:null,ioChart:null,networkChart:null}};return Ce(()=>{}),O({acceptParams:g}),(o,l)=>{const s=Q,_=Y,w=oe,B=te,V=re,z=Z;return c(),k(z,{modelValue:U.value,"onUpdate:modelValue":l[1]||(l[1]=M=>U.value=M),"destroy-on-close":!0,onClose:E,"close-on-click-modal":!1,size:"50%"},{header:a(()=>[t(ee,{header:o.$t("container.monitor"),back:E},null,8,["header"])]),default:a(()=>[t(B,{"label-position":"top"},{default:a(()=>[t(w,{label:o.$t("container.refreshTime")},{default:a(()=>[t(_,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=M=>f.value=M),onChange:W},{default:a(()=>[t(s,{label:"1s",value:1}),t(s,{label:"3s",value:3}),t(s,{label:"5s",value:5}),t(s,{label:"10s",value:10}),t(s,{label:"30s",value:30}),t(s,{label:"60s",value:60})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(V,null,{default:a(()=>[h.value.cpuChart?(c(),k(q,{key:0,height:"200px",id:"cpuChart",type:"line",option:h.value.cpuChart},null,8,["option"])):T("",!0)]),_:1}),t(V,{style:{"margin-top":"10px"}},{default:a(()=>[h.value.memoryChart?(c(),k(q,{key:0,height:"200px",id:"memoryChart",type:"line",option:h.value.memoryChart},null,8,["option"])):T("",!0)]),_:1}),t(V,{style:{"margin-top":"10px"}},{default:a(()=>[h.value.ioChart?(c(),k(q,{key:0,height:"200px",id:"ioChart",type:"line",option:h.value.ioChart},null,8,["option"])):T("",!0)]),_:1}),t(V,{style:{"margin-top":"10px"}},{default:a(()=>[h.value.networkChart?(c(),k(q,{key:0,height:"200px",id:"networkChart",type:"line",option:h.value.networkChart},null,8,["option"])):T("",!0)]),_:1})]),_:1},8,["modelValue"])}}}),il={style:{"margin-left":"20px",float:"left"}},ul={class:"dialog-footer"},Ml=X({__name:"index",setup(le,{expose:O}){const U=[Ee(),Ae],f=d(!1),b=d(),e=$e(),p=v=>{e.value=v.view},g=G({isWatch:!1,container:"",containerID:"",mode:"all"});let D=null;const i=d([{label:$.global.t("container.all"),value:"all"},{label:$.global.t("container.lastDay"),value:"24h"},{label:$.global.t("container.last4Hour"),value:"4h"},{label:$.global.t("container.lastHour"),value:"1h"},{label:$.global.t("container.last10Min"),value:"10m"}]),R=async()=>{f.value=!1,clearInterval(Number(D)),D=null},P=async()=>{const v=await Ie(g);b.value=v.data||"",ke(()=>{const u=e.value.state;e.value.dispatch({selection:{anchor:u.doc.length,head:u.doc.length},scrollIntoView:!0})})},I=async()=>{const v=window.URL.createObjectURL(new Blob([b.value])),u=document.createElement("a");u.style.display="none",u.href=v,u.download=g.container+"-"+xe(new Date)+".log";const h=new MouseEvent("click");u.dispatchEvent(h)};return O({acceptParams:v=>{f.value=!0,g.containerID=v.containerID,g.mode="all",g.isWatch=!1,g.container=v.container,P(),D=setInterval(()=>{g.isWatch&&P()},1e3*5)}}),(v,u)=>{const h=Q,W=Y,x=ne,E=ae,o=Z;return c(),F("div",null,[t(o,{modelValue:f.value,"onUpdate:modelValue":u[4]||(u[4]=l=>f.value=l),"destroy-on-close":!0,"close-on-click-modal":!1,size:"50%"},{header:a(()=>[t(ee,{header:v.$t("commons.button.log"),back:R},null,8,["header"])]),footer:a(()=>[r("span",ul,[t(E,{onClick:u[3]||(u[3]=l=>f.value=!1)},{default:a(()=>[y(m(v.$t("commons.button.cancel")),1)]),_:1})])]),default:a(()=>[r("div",null,[t(W,{onChange:P,style:{width:"30%",float:"left"},modelValue:g.mode,"onUpdate:modelValue":u[0]||(u[0]=l=>g.mode=l)},{default:a(()=>[(c(!0),F(J,null,j(i.value,l=>(c(),k(h,{key:l.label,value:l.value,label:l.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),r("div",il,[t(x,{border:"",modelValue:g.isWatch,"onUpdate:modelValue":u[1]||(u[1]=l=>g.isWatch=l)},{default:a(()=>[y(m(v.$t("commons.button.watch")),1)]),_:1},8,["modelValue"])]),t(E,{style:{"margin-left":"20px"},onClick:I,icon:"Download"},{default:a(()=>[y(m(v.$t("file.download")),1)]),_:1})]),t(K(Fe),{autofocus:!0,placeholder:"None data","indent-with-tab":!0,tabSize:4,style:{"margin-top":"20px",height:"calc(100vh - 230px)"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:U,modelValue:b.value,"onUpdate:modelValue":u[2]||(u[2]=l=>b.value=l),onReady:p,disabled:!0},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),dl=r("div",{style:{height:"calc(100vh - 302px)"},id:"terminal-exec"},null,-1),Tl=X({__name:"index",setup(le,{expose:O}){const U=d(!1),f=d(!1),b=new Me.exports.FitAddon;let e=d(null),p=d(null);const g=d(!0),D=()=>{g.value=!1},i=G({isCustom:!1,command:"",user:"",containerID:""}),R=d(),P=async l=>{U.value=!0,i.containerID=l.containerID,i.isCustom=!1,i.user="",i.command="/bin/bash",f.value=!1,window.addEventListener("resize",o)},I=async()=>{i.command=""},A=l=>{if(!Be(l.data))return;const s=JSON.parse(l.data);p.element&&p.focus(),p.write(s.Data)},v=l=>{let s=l.message;s||(s="disconnected"),p.write(`\x1B[31m${s}\x1B[m\r
`)},u=l=>{p.write(l.reason)},h=l=>{!l||l.validate(async s=>{if(!s)return;let _=window.location.href,w=_.split("//")[0]==="http:"?"ws":"wss",B=_.split("//")[1].split("/")[0];f.value=!0;let V=document.getElementById("terminal-exec");p=new Te.exports.Terminal({lineHeight:1.2,fontSize:12,fontFamily:"Monaco, Menlo, Consolas, 'Courier New', monospace",theme:{background:"#000000"},cursorBlink:!0,cursorStyle:"underline",scrollback:100,tabStopWidth:4}),V&&(p.open(V),e=new WebSocket(`${w}://${B}/api/v1/containers/exec?containerid=${i.containerID}&cols=${p.cols}&rows=${p.rows}&user=${i.user}&command=${i.command}`),e.onopen=D,e.onmessage=A,e.onclose=u,e.onerror=v,p.onData(z=>{x()&&e.send(JSON.stringify({type:"cmd",cmd:Ne.encode(z)}))}),p.loadAddon(new ze.exports.AttachAddon(e)),p.loadAddon(b),setTimeout(()=>{b.fit(),x()&&e.send(JSON.stringify({type:"resize",cols:p.cols,rows:p.rows}))},30))})},W=()=>{b.fit()},x=()=>{const l=e&&e.readyState;return l?l===1:!1};function E(){window.removeEventListener("resize",o),x()&&(e&&e.close(),p.dispose()),U.value=!1,f.value=!1}function o(){W();const{cols:l,rows:s}=p;x()&&e.send(JSON.stringify({type:"resize",cols:l,rows:s}))}return O({acceptParams:P}),(l,s)=>{const _=se,w=oe,B=ne,V=Q,z=Y,M=ae,N=Z;return c(),k(N,{modelValue:U.value,"onUpdate:modelValue":s[7]||(s[7]=C=>U.value=C),onClose:E,"destroy-on-close":!0,"close-on-click-modal":!1,size:"50%"},{header:a(()=>[t(ee,{header:l.$t("container.containerTerminal"),back:E},null,8,["header"])]),default:a(()=>[t(K(te),{ref_key:"formRef",ref:R,model:i,"label-position":"top"},{default:a(()=>[t(w,{label:l.$t("container.user"),prop:"user"},{default:a(()=>[t(_,{placeholder:"root",clearable:"",modelValue:i.user,"onUpdate:modelValue":s[0]||(s[0]=C=>i.user=C)},null,8,["modelValue"])]),_:1},8,["label"]),i.isCustom?(c(),k(w,{key:0,label:l.$t("container.command"),prop:"command",rules:K(H).requiredInput},{default:a(()=>[t(B,{style:{width:"100px"},border:"",modelValue:i.isCustom,"onUpdate:modelValue":s[1]||(s[1]=C=>i.isCustom=C),onChange:I},{default:a(()=>[y(m(l.$t("container.custom")),1)]),_:1},8,["modelValue"]),t(_,{style:{width:"calc(100% - 100px)"},clearable:"",modelValue:i.command,"onUpdate:modelValue":s[2]||(s[2]=C=>i.command=C)},null,8,["modelValue"])]),_:1},8,["label","rules"])):T("",!0),i.isCustom?T("",!0):(c(),k(w,{key:1,label:l.$t("container.command"),prop:"command",rules:K(H).requiredSelect},{default:a(()=>[t(B,{style:{width:"100px"},border:"",modelValue:i.isCustom,"onUpdate:modelValue":s[3]||(s[3]=C=>i.isCustom=C),onChange:I},{default:a(()=>[y(m(l.$t("container.custom")),1)]),_:1},8,["modelValue"]),t(z,{style:{width:"calc(100% - 100px)"},filterable:"",clearable:"",modelValue:i.command,"onUpdate:modelValue":s[4]||(s[4]=C=>i.command=C)},{default:a(()=>[t(V,{value:"/bin/ash",label:"/bin/ash"}),t(V,{value:"/bin/bash",label:"/bin/bash"}),t(V,{value:"/bin/sh",label:"/bin/sh"})]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])),f.value?(c(),k(M,{key:3,onClick:s[6]||(s[6]=C=>E())},{default:a(()=>[y(m(l.$t("commons.button.disconn")),1)]),_:1})):(c(),k(M,{key:2,onClick:s[5]||(s[5]=C=>h(R.value))},{default:a(()=>[y(m(l.$t("commons.button.conn")),1)]),_:1})),dl]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});export{Ml as _,Al as a,Fl as b,Tl as c};
