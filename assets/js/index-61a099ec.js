import{_ as X,d as Y,r as i,x as K,j as o,E as Q,A as W,ac as Z,ah as ee,m as te,C as ae,at as oe,aq as ne,a5 as le,Y as se,b as $,h as C,f as P,e as a,w as n,g as m,t as c,c as ie,y as re,ap as N,$ as R,X as me}from"./index-609fd921.js";/* empty css                *//* empty css                     *//* empty css                 *//* empty css            *//* empty css                     *//* empty css             *//* empty css            *//* empty css              *//* empty css                    *//* empty css               */import{_ as ce}from"./index-f10fbc50.js";import{_ as pe}from"./layout-content-47227111.js";import{_ as ue,a as fe,b as de,c as be}from"./index-daf81d68.js";import{_ as ge}from"./codemirror-6ae37f99.js";import{_ as ve}from"./index-af1c8b2d.js";import{_ as _e}from"./index-3ec321ac.js";import{b as ye}from"./util-bdb43d7e.js";import{s as $e,i as ke,C as Ce,f as we}from"./container-94920957.js";import"./tooltip-b30db216.js";/* empty css               */import"./index-110fbc44.js";/* empty css                *//* empty css                     *//* empty css              *//* empty css                    *//* empty css              *//* empty css               */import"./form-item-d76e7d20.js";import"./form-rules-08616160.js";/* empty css             */import"./index-7dc48f6e.js";import"./index-d6f5840e.js";import"./index-5eb40136.js";import"./xterm-addon-fit-023687d7.js";import"./base64-e52cbffd.js";/* empty css             */import"./index-e09fb15b.js";const he={class:"app-content",style:{"margin-top":"20px"}},Be={key:0,style:{"margin-left":"50px"}},Te={key:1},Se=Y({__name:"index",emits:["back"],setup(xe,{expose:O,emit:M}){const g=i(),w=i(),h=i(),B=i(),A=e=>{w.value=e.path,g.value=e.name,h.value=e.filters,B.value=e.createdBy,d()},T=i(),p=i([]),v=K({currentPage:1,pageSize:10,total:0}),_=i(!1),d=async()=>{let e=h.value,t={name:"",page:v.currentPage,pageSize:v.pageSize,filters:e};await $e(t).then(r=>{T.value=r.data.items||[],v.total=r.data.total})},S=i(),x=i(),H=async e=>{const t=await ke({id:e,type:"container"});S.value=JSON.stringify(JSON.parse(t.data),null,2);let r={header:o.global.t("commons.button.view"),detailInfo:S.value};x.value.acceptParams(r)},u=e=>{if(p.value.length<1)return!0;switch(e){case"start":for(const t of p.value)if(t.state==="running")return!0;return!1;case"stop":for(const t of p.value)if(t.state==="stopped"||t.state==="exited")return!0;return!1;case"pause":for(const t of p.value)if(t.state==="paused"||t.state==="exited")return!0;return!1;case"unpause":for(const t of p.value)if(t.state!=="paused")return!0;return!1}},f=async e=>{let t=o.global.t("container.operatorHelper",[o.global.t("container."+e)]);for(const r of p.value)if(r.isFromApp){t=o.global.t("container.operatorAppHelper",[o.global.t("container."+e)]);break}N.confirm(t,o.global.t("container."+e),{confirmButtonText:o.global.t("commons.button.confirm"),cancelButtonText:o.global.t("commons.button.cancel"),type:"info"}).then(()=>{let r=[];for(const s of p.value){const y={name:s.name,operation:e,newName:""};r.push(Ce(y))}Promise.all(r).then(()=>{d(),R(o.global.t("commons.msg.operationSuccess"))}).catch(()=>{d()})})},k=async e=>{N.confirm(o.global.t("container.composeOperatorHelper",[g.value,o.global.t("container."+e)]),o.global.t("container."+e),{confirmButtonText:o.global.t("commons.button.confirm"),cancelButtonText:o.global.t("commons.button.cancel"),type:"info"}).then(async()=>{let t={name:g.value,path:w.value,operation:e};_.value=!0,await we(t).then(()=>{_.value=!1,R(o.global.t("commons.msg.operationSuccess")),e==="down"?M("back"):d()}).catch(()=>{_.value=!1})})},E=i(),L=e=>{E.value.acceptParams({containerID:e})},D=i(),z=e=>{D.value.acceptParams({containerID:e})},I=i(),V=[{label:o.global.t("file.terminal"),disabled:e=>e.state!=="running",click:e=>{z(e.containerID)}},{label:o.global.t("container.monitor"),disabled:e=>e.state!=="running",click:e=>{L(e.containerID)}},{label:o.global.t("commons.button.log"),click:e=>{I.value.acceptParams({containerID:e.containerID})}}];return O({acceptParams:A}),(e,t)=>{const r=Q,s=W,y=Z,F=ee,J=te,j=ae,q=oe,b=ne,G=me("fu-table-operations"),U=le;return se(($(),C("div",null,[P("div",he,[a(j,{class:"app-card"},{default:n(()=>[a(J,{gutter:20},{default:n(()=>[P("div",null,[a(r,{effect:"dark",type:"success"},{default:n(()=>[m(c(g.value),1)]),_:1})]),B.value==="1Panel"?($(),C("div",Be,[a(s,{link:"",type:"primary",onClick:t[0]||(t[0]=l=>k("start"))},{default:n(()=>[m(c(e.$t("container.start")),1)]),_:1}),a(y,{direction:"vertical"}),a(s,{link:"",type:"primary",onClick:t[1]||(t[1]=l=>k("stop"))},{default:n(()=>[m(c(e.$t("container.stop")),1)]),_:1}),a(y,{direction:"vertical"}),a(s,{link:"",type:"primary",onClick:t[2]||(t[2]=l=>k("down"))},{default:n(()=>[m(c(e.$t("container.remove")),1)]),_:1})])):($(),C("div",Te,[a(F,{style:{"margin-top":"-5px","margin-left":"50px"},closable:!1,"show-icon":"",title:e.$t("container.composeDetailHelper"),type:"info"},null,8,["title"])]))]),_:1})]),_:1})]),a(pe,{style:{"margin-top":"30px"},"back-name":"Compose",title:e.$t("container.containerList"),reload:!0},{main:n(()=>[a(q,null,{default:n(()=>[a(s,{disabled:u("start"),onClick:t[3]||(t[3]=l=>f("start"))},{default:n(()=>[m(c(e.$t("container.start")),1)]),_:1},8,["disabled"]),a(s,{disabled:u("stop"),onClick:t[4]||(t[4]=l=>f("stop"))},{default:n(()=>[m(c(e.$t("container.stop")),1)]),_:1},8,["disabled"]),a(s,{disabled:u("restart"),onClick:t[5]||(t[5]=l=>f("restart"))},{default:n(()=>[m(c(e.$t("container.restart")),1)]),_:1},8,["disabled"]),a(s,{disabled:u("kill"),onClick:t[6]||(t[6]=l=>f("kill"))},{default:n(()=>[m(c(e.$t("container.kill")),1)]),_:1},8,["disabled"]),a(s,{disabled:u("pause"),onClick:t[7]||(t[7]=l=>f("pause"))},{default:n(()=>[m(c(e.$t("container.pause")),1)]),_:1},8,["disabled"]),a(s,{disabled:u("unpause"),onClick:t[8]||(t[8]=l=>f("unpause"))},{default:n(()=>[m(c(e.$t("container.unpause")),1)]),_:1},8,["disabled"]),a(s,{disabled:u("remove"),onClick:t[9]||(t[9]=l=>f("remove"))},{default:n(()=>[m(c(e.$t("container.remove")),1)]),_:1},8,["disabled"])]),_:1}),a(ve,{"pagination-config":v,selects:p.value,"onUpdate:selects":t[10]||(t[10]=l=>p.value=l),style:{"margin-top":"20px"},data:T.value,onSearch:d},{default:n(()=>[a(b,{type:"selection",fix:""}),a(b,{label:e.$t("commons.table.name"),"min-width":"100",prop:"name",fix:""},{default:n(({row:l})=>[a(ce,{onClick:Ee=>H(l.containerID),text:l.name},null,8,["onClick","text"])]),_:1},8,["label"]),a(b,{label:e.$t("container.image"),"show-overflow-tooltip":"","min-width":"100",prop:"imageName"},null,8,["label"]),a(b,{label:e.$t("commons.table.status"),"min-width":"50",prop:"state",fix:""},{default:n(({row:l})=>[($(),ie(_e,{key:l.state,status:l.state},null,8,["status"]))]),_:1},8,["label"]),a(b,{label:e.$t("container.upTime"),"min-width":"100",prop:"runTime",fix:""},null,8,["label"]),a(b,{prop:"createTime",label:e.$t("commons.table.date"),formatter:re(ye),"show-overflow-tooltip":""},null,8,["label","formatter"]),a(G,{width:"220",ellipsis:10,buttons:V,label:e.$t("commons.table.operate"),fix:""},null,8,["label"])]),_:1},8,["pagination-config","selects","data"]),a(ge,{ref_key:"mydetail",ref:x},null,512),a(ue,{ref_key:"dialogContainerLogRef",ref:I},null,512),a(fe,{onSearch:d,ref:"dialogCreateRef"},null,512),a(de,{ref_key:"dialogMonitorRef",ref:E},null,512),a(be,{ref_key:"dialogTerminalRef",ref:D},null,512)]),_:1},8,["title"])])),[[U,_.value]])}}});var dt=X(Se,[["__scopeId","data-v-54dfd2c6"]]);export{dt as default};
