import{d as X,r as S,j as O,b as R,c as x,w as o,f as L,e,y as n,g as D,t as V,h as U,F as le,i as ae,O as Y,ag as G,$ as Z,a1 as se,a2 as ye,K as Ve,L as Ee,a3 as _e,l as ge,m as he,A as J,ao as we,x as te,o as Re,X as $e,aq as Ae,af as ue,Y as de,Z as Me,a5 as ce,E as Fe,S as xe,av as Oe,J as De,M as Te,N as Pe,a4 as Ne,b1 as qe,b2 as Ke,U as je,I as Be,ah as He,au as Ye}from"./index-609fd921.js";/* empty css               *//* empty css                     *//* empty css                 *//* empty css            *//* empty css               *//* empty css              */import{_ as Ge}from"./layout-content-47227111.js";import{_ as Xe}from"./index-f14047dc.js";import{_ as Se}from"./index-af1c8b2d.js";import{r as Je,s as We,t as Ze,u as ze,v as Qe,w as et,x as Ie,R as tt,y as ot,z as nt,A as lt,B as at,E as rt,F as it}from"./website-6075ac25.js";import{_ as pe}from"./index-110fbc44.js";/* empty css                *//* empty css               *//* empty css            *//* empty css             *//* empty css              *//* empty css               *//* empty css               */import"./form-item-d76e7d20.js";import{R as F}from"./form-rules-08616160.js";import{u as ke}from"./use-delete-data-3fb8ebbf.js";/* empty css                *//* empty css                          *//* empty css                    *//* empty css              *//* empty css                     */import{o as Le,h as Ce,b as st}from"./util-bdb43d7e.js";/* empty css                    *//* empty css             *//* empty css              */import"./index-e09fb15b.js";const ut={key:0},dt={key:1},ct={key:2},pt={class:"dialog-footer"},mt=X({__name:"index",emits:["close"],setup(N,{expose:I,emit:P}){const $=S({mode:"add",form:{}}),k=[{label:O.global.t("website.aliyun"),value:"AliYun"},{label:"DNSPod",value:"DnsPod"},{label:"CloudFlare",value:"CloudFlare"}];let d=S(),l=S(!1),t=S(),m=S({name:[F.requiredInput,F.linuxName],type:[F.requiredSelect],authorization:{accessKey:[F.requiredInput],secretKey:[F.requiredInput],id:[F.requiredInput],token:[F.requiredInput],email:[F.requiredInput],apiKey:[F.requiredInput]}}),r=S({id:0,name:"",type:"AliYun",authorization:{}});const c=()=>{p(),d.value=!1,P("close",!1)},p=()=>{var a;r.value={id:0,name:"",type:"DnsPod",authorization:{}},(a=t.value)==null||a.resetFields()},y=async a=>{$.value.mode=a.mode,a.mode==="edit"&&(r.value=a.form),d.value=!0},i=async a=>{!a||await a.validate(s=>{!s||(l.value=!0,$.value.mode==="edit"?Je(r.value).then(()=>{Z(O.global.t("commons.msg.updateSuccess")),c()}).finally(()=>{l.value=!1}):We(r.value).then(()=>{Z(O.global.t("commons.msg.createSuccess")),c()}).finally(()=>{l.value=!1}))})};return I({acceptParams:y}),(a,s)=>{const v=se,E=ye,M=Ve,h=Ee,_=_e,B=ge,q=he,K=J,C=we;return R(),x(C,{modelValue:n(d),"onUpdate:modelValue":s[9]||(s[9]=g=>G(d)?d.value=g:d=g),title:a.$t("website.addAccount"),"destroy-on-close":!0,"close-on-click-modal":!1,width:"40%","before-close":c},{footer:o(()=>[L("span",pt,[e(K,{onClick:c,disabled:n(l)},{default:o(()=>[D(V(a.$t("commons.button.cancel")),1)]),_:1},8,["disabled"]),e(K,{type:"primary",onClick:s[8]||(s[8]=g=>i(n(t))),disabled:n(l)},{default:o(()=>[D(V(a.$t("commons.button.confirm")),1)]),_:1},8,["disabled"])])]),default:o(()=>[e(q,null,{default:o(()=>[e(B,{span:22,offset:1},{default:o(()=>[e(_,{ref_key:"accountForm",ref:t,"label-position":"top",model:n(r),rules:n(m)},{default:o(()=>[e(E,{label:a.$t("commons.table.name"),prop:"name"},{default:o(()=>[e(v,{modelValue:n(r).name,"onUpdate:modelValue":s[0]||(s[0]=g=>n(r).name=g),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(E,{label:a.$t("website.type"),prop:"type"},{default:o(()=>[e(h,{modelValue:n(r).type,"onUpdate:modelValue":s[1]||(s[1]=g=>n(r).type=g),disabled:$.value.mode==="edit"},{default:o(()=>[(R(),U(le,null,ae(k,(g,z)=>e(M,{key:z,label:g.label,value:g.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),n(r).type==="AliYun"?(R(),U("div",ut,[e(E,{label:"Access Key",prop:"authorization.accessKey"},{default:o(()=>[e(v,{modelValue:n(r).authorization.accessKey,"onUpdate:modelValue":s[2]||(s[2]=g=>n(r).authorization.accessKey=g)},null,8,["modelValue"])]),_:1}),e(E,{label:"Secret Key",prop:"authorization.secretKey"},{default:o(()=>[e(v,{modelValue:n(r).authorization.secretKey,"onUpdate:modelValue":s[3]||(s[3]=g=>n(r).authorization.secretKey=g)},null,8,["modelValue"])]),_:1})])):Y("",!0),n(r).type==="DnsPod"?(R(),U("div",dt,[e(E,{label:"ID",prop:"authorization.id"},{default:o(()=>[e(v,{modelValue:n(r).authorization.id,"onUpdate:modelValue":s[4]||(s[4]=g=>n(r).authorization.id=g)},null,8,["modelValue"])]),_:1}),e(E,{label:"Token",prop:"authorization.token"},{default:o(()=>[e(v,{modelValue:n(r).authorization.token,"onUpdate:modelValue":s[5]||(s[5]=g=>n(r).authorization.token=g)},null,8,["modelValue"])]),_:1})])):Y("",!0),n(r).type==="CloudFlare"?(R(),U("div",ct,[e(E,{label:"EMAIL",prop:"authorization.email"},{default:o(()=>[e(v,{modelValue:n(r).authorization.email,"onUpdate:modelValue":s[6]||(s[6]=g=>n(r).authorization.email=g)},null,8,["modelValue"])]),_:1}),e(E,{label:"API Key",prop:"authorization.apiKey"},{default:o(()=>[e(v,{modelValue:n(r).authorization.apiKey,"onUpdate:modelValue":s[7]||(s[7]=g=>n(r).authorization.apiKey=g)},null,8,["modelValue"])]),_:1})])):Y("",!0)]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])}}}),ft={key:0},bt={key:1},vt=X({__name:"index",setup(N,{expose:I}){const P=te({currentPage:1,pageSize:20,total:0});let $=S(),k=S(),d=S(!1),l=S(!1);const t=[{label:O.global.t("commons.button.edit"),click:function(a){y(a)}},{label:O.global.t("app.delete"),click:function(a){i(a.id)}}],m=()=>{c(),l.value=!0},r=()=>{l.value=!1},c=()=>{const a={page:P.currentPage,pageSize:P.pageSize};ze(a).then(s=>{$.value=s.data.items,P.total=s.data.total})},p=()=>{k.value.acceptParams({mode:"add"})},y=a=>{k.value.acceptParams({mode:"edit",form:a})},i=async a=>{d.value=!0,await ke(Ze,{id:a},"commons.msg.delete"),d.value=!1,c()};return Re(()=>{c()}),I({acceptParams:m}),(a,s)=>{const v=J,E=Ae,M=$e("fu-table-operations"),h=ue;return R(),x(h,{"close-on-click-modal":!1,modelValue:n(l),"onUpdate:modelValue":s[2]||(s[2]=_=>G(l)?l.value=_:l=_),size:"50%"},{header:o(()=>[e(pe,{header:a.$t("website.dnsAccountManage"),back:r},null,8,["header"])]),default:o(()=>[e(Se,{data:n($),"pagination-config":P,onSearch:s[0]||(s[0]=_=>c())},{toolbar:o(()=>[e(v,{type:"primary",onClick:p},{default:o(()=>[D(V(a.$t("website.addAccount")),1)]),_:1})]),default:o(()=>[e(E,{label:a.$t("commons.table.name"),fix:"","show-overflow-tooltip":"",prop:"name"},null,8,["label"]),e(E,{label:a.$t("commons.table.type"),prop:"type"},{default:o(({row:_})=>[_.type=="AliYun"?(R(),U("span",ft,V(a.$t("website.aliyun")),1)):(R(),U("span",bt,V(_.type),1))]),_:1},8,["label"]),e(M,{ellipsis:1,buttons:t,label:a.$t("commons.table.operate"),fixed:"right",fix:""},null,8,["label"])]),_:1},8,["data","pagination-config"]),e(mt,{ref_key:"createRef",ref:k,onClose:s[1]||(s[1]=_=>c())},null,512)]),_:1},8,["modelValue"])}}}),yt={class:"dialog-footer"},_t=X({__name:"index",emits:["close"],setup(N,{expose:I,emit:P}){let $=S(),k=S(!1),d=S(),l=S({email:[F.requiredInput,F.email]}),t=S({email:""});const m=()=>{r(),$.value=!1,P("close",!1)},r=()=>{d.value.resetFields(),t.value={email:""}},c=()=>{$.value=!0},p=async y=>{!y||await y.validate(i=>{!i||(k.value=!0,Qe(t.value).then(()=>{Z(O.global.t("commons.msg.createSuccess")),m()}).finally(()=>{k.value=!1}))})};return I({acceptParams:c}),(y,i)=>{const a=se,s=ye,v=_e,E=ge,M=he,h=J,_=we,B=ce;return R(),x(_,{modelValue:n($),"onUpdate:modelValue":i[3]||(i[3]=q=>G($)?$.value=q:$=q),title:y.$t("website.addAccount"),"close-on-click-modal":!1,width:"30%","before-close":m},{footer:o(()=>[L("span",yt,[e(h,{onClick:m,disabled:n(k)},{default:o(()=>[D(V(y.$t("commons.button.cancel")),1)]),_:1},8,["disabled"]),e(h,{type:"primary",onClick:i[2]||(i[2]=q=>p(n(d))),disabled:n(k)},{default:o(()=>[D(V(y.$t("commons.button.confirm")),1)]),_:1},8,["disabled"])])]),default:o(()=>[de((R(),x(M,null,{default:o(()=>[e(E,{span:22,offset:1},{default:o(()=>[e(v,{ref_key:"accountForm",ref:d,"label-position":"top",model:n(t),rules:n(l),onSubmit:i[1]||(i[1]=Me(()=>{},["prevent"]))},{default:o(()=>[e(s,{label:y.$t("website.email"),prop:"email"},{default:o(()=>[e(a,{modelValue:n(t).email,"onUpdate:modelValue":i[0]||(i[0]=q=>n(t).email=q),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})]),_:1})),[[B,n(k)]])]),_:1},8,["modelValue","title"])}}}),gt=X({__name:"index",setup(N,{expose:I}){let P=S(!1),$=S(!1),k=S(),d=S();const l=te({currentPage:1,pageSize:20,total:0}),t=[{label:O.global.t("app.delete"),click:function(i){y(i.id)}}],m=()=>{r(),P.value=!0},r=async()=>{const i={page:l.currentPage,pageSize:l.pageSize};await Ie(i).then(a=>{k.value=a.data.items,l.total=a.data.total})},c=()=>{d.value.acceptParams()},p=()=>{P.value=!1},y=async i=>{await ke(et,{id:i},"commons.msg.delete"),r()};return I({acceptParams:m}),(i,a)=>{const s=J,v=Ae,E=$e("fu-table-operations"),M=ue,h=ce;return R(),x(M,{"close-on-click-modal":!1,modelValue:n(P),"onUpdate:modelValue":a[2]||(a[2]=_=>G(P)?P.value=_:P=_),size:"50%"},{header:o(()=>[e(pe,{header:i.$t("website.acmeAccountManage"),back:p},null,8,["header"])]),default:o(()=>[de((R(),x(Se,{data:n(k),"pagination-config":l,onSearch:a[0]||(a[0]=_=>r())},{toolbar:o(()=>[e(s,{type:"primary",onClick:c},{default:o(()=>[D(V(i.$t("website.addAccount")),1)]),_:1})]),default:o(()=>[e(v,{label:i.$t("website.email"),fix:"","show-overflow-tooltip":"",prop:"email"},null,8,["label"]),e(v,{label:"URL","show-overflow-tooltip":"",prop:"url","min-width":"300px"}),e(E,{ellipsis:1,buttons:t,label:i.$t("commons.table.operate"),fixed:"right",fix:""},null,8,["label"])]),_:1},8,["data","pagination-config"])),[[h,n($)]]),e(_t,{ref_key:"createRef",ref:d,onClose:a[1]||(a[1]=_=>r())},null,512)]),_:1},8,["modelValue"])}}}),ht={style:{"text-align":"center"}},wt={key:0},$t=L("br",null,null,-1),At=L("br",null,null,-1),St={class:"dialog-footer"},kt=X({__name:"index",emits:["close"],setup(N,{expose:I,emit:P}){let $=S(!1),k=S(!1),d=te({SSLId:0});const l=()=>{$.value=!1,P("close",!1)},t=S([]),m=async c=>{d.SSLId=Number(c.id),t.value=c.websites,$.value=!0},r=()=>{k.value=!0,tt(d).then(()=>{l(),Z(O.global.t("ssl.renewSuccess"))}).finally(()=>{k.value=!1})};return I({acceptParams:m}),(c,p)=>{const y=Fe,i=J,a=we,s=ce;return R(),x(a,{modelValue:n($),"onUpdate:modelValue":p[1]||(p[1]=v=>G($)?$.value=v:$=v),title:c.$t("website.renewSSL"),"destroy-on-close":!0,"close-on-click-modal":!1,width:"30%","before-close":l},{footer:o(()=>[L("span",St,[e(i,{onClick:l,disabled:n(k)},{default:o(()=>[D(V(c.$t("commons.button.cancel")),1)]),_:1},8,["disabled"]),e(i,{type:"primary",onClick:p[0]||(p[0]=v=>r()),disabled:n(k)},{default:o(()=>[D(V(c.$t("commons.button.confirm")),1)]),_:1},8,["disabled"])])]),default:o(()=>[de((R(),U("div",ht,[t.value.length>0?(R(),U("div",wt,[L("span",null,V(c.$t("ssl.renewWebsite")),1),L("div",null,[$t,L("span",null,[(R(!0),U(le,null,ae(t.value,(v,E)=>(R(),U("span",{key:E},[e(y,null,{default:o(()=>[D(V(v.primaryDomain),1)]),_:2},1024)]))),128))])]),At])):Y("",!0),L("span",null,V(c.$t("ssl.renewConfirm")),1)])),[[s,n(k)]])]),_:1},8,["modelValue","title"])}}}),Ct={key:0},Vt={key:1},Et={class:"dialog-footer"},Rt=X({__name:"index",props:{id:{type:Number,default:0}},emits:["close"],setup(N,{expose:I,emit:P}){const $=N,k=xe(()=>$.id);let d=S(!1),l=S(!1),t=te({page:1,pageSize:20}),m=te({page:1,pageSize:20}),r=S(),c=S(),p=S(),y=S({primaryDomain:[F.requiredInput,F.domain],acmeAccountId:[F.requiredSelectBusiness],dnsAccountId:[F.requiredSelectBusiness],provider:[F.requiredInput],autoRenew:[F.requiredInput]}),i=S({primaryDomain:"",otherDomains:"",provider:"dnsAccount",websiteId:0,acmeAccountId:void 0,dnsAccountId:void 0,autoRenew:!0}),a=S([]),s=S(!1);const v=()=>{E(),d.value=!1,P("close",!1)},E=()=>{var C;(C=p.value)==null||C.resetFields(),a.value=[],i.value={primaryDomain:"",otherDomains:"",provider:"dnsAccount",websiteId:0,acmeAccountId:void 0,dnsAccountId:void 0,autoRenew:!0}},M=()=>{E(),i.value.websiteId=Number(k.value),h(),_(),d.value=!0},h=async()=>{const C=await Ie(m);c.value=C.data.items||[],c.value.length>0&&(i.value.acmeAccountId=C.data.items[0].id)},_=async()=>{const C=await ze(t);r.value=C.data.items||[],r.value.length>0&&(i.value.dnsAccountId=C.data.items[0].id)},B=()=>{a.value=[]},q=async(C,g)=>{s.value=!1,l.value=!0;try{const z=await nt({acmeAccountId:C,domains:g});z.data&&(a.value=z.data,s.value=!0)}finally{l.value=!1}},K=async C=>{!C||await C.validate(g=>{if(!!g)if(i.value.provider!="dnsManual"||s.value)l.value=!0,ot(i.value).then(()=>{v(),Z(O.global.t("commons.msg.createSuccess"))}).finally(()=>{l.value=!1});else{let z=[i.value.primaryDomain];if(i.value.otherDomains!=""){let j=i.value.otherDomains.split(`
`);z=z.concat(j)}q(i.value.acmeAccountId,z)}})};return I({acceptParams:M}),(C,g)=>{const z=se,j=ye,re=Ve,Q=Ee,oe=Oe,me=De,W=Te,fe=Pe,ee=Ne,ne=_e,be=ge,ve=he,A=J,b=ue,f=ce;return R(),x(b,{"close-on-click-modal":!1,modelValue:n(d),"onUpdate:modelValue":g[8]||(g[8]=u=>G(d)?d.value=u:d=u),size:"50%"},{header:o(()=>[e(pe,{header:C.$t("ssl.create"),back:v},null,8,["header"])]),footer:o(()=>[L("span",Et,[e(A,{onClick:v,disabled:n(l)},{default:o(()=>[D(V(C.$t("commons.button.cancel")),1)]),_:1},8,["disabled"]),e(A,{type:"primary",onClick:g[7]||(g[7]=u=>K(n(p))),disabled:n(l)},{default:o(()=>[D(V(C.$t("commons.button.confirm")),1)]),_:1},8,["disabled"])])]),default:o(()=>[de((R(),x(ve,null,{default:o(()=>[e(be,{span:22,offset:1},{default:o(()=>[e(ne,{ref_key:"sslForm",ref:p,"label-position":"top",model:n(i),"label-width":"100px",rules:n(y)},{default:o(()=>[e(j,{label:C.$t("website.primaryDomain"),prop:"primaryDomain"},{default:o(()=>[e(z,{modelValue:n(i).primaryDomain,"onUpdate:modelValue":g[0]||(g[0]=u=>n(i).primaryDomain=u)},null,8,["modelValue"])]),_:1},8,["label"]),e(j,{label:C.$t("website.otherDomains"),prop:"otherDomains"},{default:o(()=>[e(z,{type:"textarea",autosize:{minRows:2,maxRows:6},modelValue:n(i).otherDomains,"onUpdate:modelValue":g[1]||(g[1]=u=>n(i).otherDomains=u)},null,8,["modelValue"])]),_:1},8,["label"]),e(j,{label:C.$t("website.acmeAccount"),prop:"acmeAccountId"},{default:o(()=>[e(Q,{modelValue:n(i).acmeAccountId,"onUpdate:modelValue":g[2]||(g[2]=u=>n(i).acmeAccountId=u)},{default:o(()=>[(R(!0),U(le,null,ae(n(c),(u,w)=>(R(),x(re,{key:w,label:u.email,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(j,{label:C.$t("website.provider"),prop:"provider"},{default:o(()=>[e(me,{modelValue:n(i).provider,"onUpdate:modelValue":g[3]||(g[3]=u=>n(i).provider=u),onChange:g[4]||(g[4]=u=>B())},{default:o(()=>[e(oe,{label:"dnsAccount"},{default:o(()=>[D(V(C.$t("website.dnsAccount")),1)]),_:1}),e(oe,{label:"dnsManual"},{default:o(()=>[D(V(C.$t("website.dnsManual")),1)]),_:1}),e(oe,{label:"http"},{default:o(()=>[D("HTTP")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),n(i).provider==="dnsAccount"?(R(),x(j,{key:0,label:C.$t("website.dnsAccount"),prop:"dnsAccountId"},{default:o(()=>[e(Q,{modelValue:n(i).dnsAccountId,"onUpdate:modelValue":g[5]||(g[5]=u=>n(i).dnsAccountId=u)},{default:o(()=>[(R(!0),U(le,null,ae(n(r),(u,w)=>(R(),x(re,{key:w,label:u.name+" ( "+u.type+" )",value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])):Y("",!0),n(i).provider==="dnsManual"&&n(a).length>0?(R(),x(j,{key:1},{default:o(()=>[L("span",null,V(C.$t("ssl.dnsResolveHelper")),1),(R(!0),U(le,null,ae(n(a),(u,w)=>(R(),U("div",{key:w},[e(fe,{direction:"vertical",column:4,border:""},{default:o(()=>[e(W,{label:C.$t("website.domain")},{default:o(()=>[D(V(u.domain),1)]),_:2},1032,["label"]),u.err!=""?(R(),U("div",Ct,[e(W,{label:C.$t("ssl.err")},{default:o(()=>[D(V(u.err),1)]),_:2},1032,["label"])])):(R(),U("div",Vt,[e(W,{label:C.$t("ssl.resolveDomain")},{default:o(()=>[D(V(u.resolve),1)]),_:2},1032,["label"]),e(W,{label:C.$t("ssl.value")},{default:o(()=>[D(V(u.value),1)]),_:2},1032,["label"]),e(W,{label:C.$t("ssl.type")},{default:o(()=>[D("TXT")]),_:1},8,["label"])]))]),_:2},1024)]))),128))]),_:1})):Y("",!0),n(i).provider!=="dnsManual"?(R(),x(j,{key:2,label:"",prop:"autoRenew"},{default:o(()=>[e(ee,{modelValue:n(i).autoRenew,"onUpdate:modelValue":g[6]||(g[6]=u=>n(i).autoRenew=u),label:C.$t("ssl.autoRenew")},null,8,["modelValue","label"])]),_:1})):Y("",!0)]),_:1},8,["model","rules"])]),_:1})]),_:1})),[[f,n(l)]])]),_:1},8,["modelValue"])}}});var Ue={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(N,I){(function($,k){N.exports=k()})(qe,function(){return function(){var P={686:function(d,l,t){t.d(l,{default:function(){return ve}});var m=t(279),r=t.n(m),c=t(370),p=t.n(c),y=t(817),i=t.n(y);function a(A){try{return document.execCommand(A)}catch{return!1}}var s=function(b){var f=i()(b);return a("cut"),f},v=s;function E(A){var b=document.documentElement.getAttribute("dir")==="rtl",f=document.createElement("textarea");f.style.fontSize="12pt",f.style.border="0",f.style.padding="0",f.style.margin="0",f.style.position="absolute",f.style[b?"right":"left"]="-9999px";var u=window.pageYOffset||document.documentElement.scrollTop;return f.style.top="".concat(u,"px"),f.setAttribute("readonly",""),f.value=A,f}var M=function(b,f){var u=E(b);f.container.appendChild(u);var w=i()(u);return a("copy"),u.remove(),w},h=function(b){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},u="";return typeof b=="string"?u=M(b,f):b instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(b==null?void 0:b.type)?u=M(b.value,f):(u=i()(b),a("copy")),u},_=h;function B(A){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B=function(f){return typeof f}:B=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},B(A)}var q=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=b.action,u=f===void 0?"copy":f,w=b.container,T=b.target,H=b.text;if(u!=="copy"&&u!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(T!==void 0)if(T&&B(T)==="object"&&T.nodeType===1){if(u==="copy"&&T.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(u==="cut"&&(T.hasAttribute("readonly")||T.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(H)return _(H,{container:w});if(T)return u==="cut"?v(T):_(T,{container:w})},K=q;function C(A){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(f){return typeof f}:C=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},C(A)}function g(A,b){if(!(A instanceof b))throw new TypeError("Cannot call a class as a function")}function z(A,b){for(var f=0;f<b.length;f++){var u=b[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(A,u.key,u)}}function j(A,b,f){return b&&z(A.prototype,b),f&&z(A,f),A}function re(A,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(b&&b.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),b&&Q(A,b)}function Q(A,b){return Q=Object.setPrototypeOf||function(u,w){return u.__proto__=w,u},Q(A,b)}function oe(A){var b=fe();return function(){var u=ee(A),w;if(b){var T=ee(this).constructor;w=Reflect.construct(u,arguments,T)}else w=u.apply(this,arguments);return me(this,w)}}function me(A,b){return b&&(C(b)==="object"||typeof b=="function")?b:W(A)}function W(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function fe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ee(A){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},ee(A)}function ne(A,b){var f="data-clipboard-".concat(A);if(!!b.hasAttribute(f))return b.getAttribute(f)}var be=function(A){re(f,A);var b=oe(f);function f(u,w){var T;return g(this,f),T=b.call(this),T.resolveOptions(w),T.listenClick(u),T}return j(f,[{key:"resolveOptions",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof w.action=="function"?w.action:this.defaultAction,this.target=typeof w.target=="function"?w.target:this.defaultTarget,this.text=typeof w.text=="function"?w.text:this.defaultText,this.container=C(w.container)==="object"?w.container:document.body}},{key:"listenClick",value:function(w){var T=this;this.listener=p()(w,"click",function(H){return T.onClick(H)})}},{key:"onClick",value:function(w){var T=w.delegateTarget||w.currentTarget,H=this.action(T)||"copy",ie=K({action:H,container:this.container,target:this.target(T),text:this.text(T)});this.emit(ie?"success":"error",{action:H,text:ie,trigger:T,clearSelection:function(){T&&T.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(w){return ne("action",w)}},{key:"defaultTarget",value:function(w){var T=ne("target",w);if(T)return document.querySelector(T)}},{key:"defaultText",value:function(w){return ne("text",w)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(w){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return _(w,T)}},{key:"cut",value:function(w){return v(w)}},{key:"isSupported",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],T=typeof w=="string"?[w]:w,H=!!document.queryCommandSupported;return T.forEach(function(ie){H=H&&!!document.queryCommandSupported(ie)}),H}}]),f}(r()),ve=be},828:function(d){var l=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}function m(r,c){for(;r&&r.nodeType!==l;){if(typeof r.matches=="function"&&r.matches(c))return r;r=r.parentNode}}d.exports=m},438:function(d,l,t){var m=t(828);function r(y,i,a,s,v){var E=p.apply(this,arguments);return y.addEventListener(a,E,v),{destroy:function(){y.removeEventListener(a,E,v)}}}function c(y,i,a,s,v){return typeof y.addEventListener=="function"?r.apply(null,arguments):typeof a=="function"?r.bind(null,document).apply(null,arguments):(typeof y=="string"&&(y=document.querySelectorAll(y)),Array.prototype.map.call(y,function(E){return r(E,i,a,s,v)}))}function p(y,i,a,s){return function(v){v.delegateTarget=m(v.target,i),v.delegateTarget&&s.call(y,v)}}d.exports=c},879:function(d,l){l.node=function(t){return t!==void 0&&t instanceof HTMLElement&&t.nodeType===1},l.nodeList=function(t){var m=Object.prototype.toString.call(t);return t!==void 0&&(m==="[object NodeList]"||m==="[object HTMLCollection]")&&"length"in t&&(t.length===0||l.node(t[0]))},l.string=function(t){return typeof t=="string"||t instanceof String},l.fn=function(t){var m=Object.prototype.toString.call(t);return m==="[object Function]"}},370:function(d,l,t){var m=t(879),r=t(438);function c(a,s,v){if(!a&&!s&&!v)throw new Error("Missing required arguments");if(!m.string(s))throw new TypeError("Second argument must be a String");if(!m.fn(v))throw new TypeError("Third argument must be a Function");if(m.node(a))return p(a,s,v);if(m.nodeList(a))return y(a,s,v);if(m.string(a))return i(a,s,v);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function p(a,s,v){return a.addEventListener(s,v),{destroy:function(){a.removeEventListener(s,v)}}}function y(a,s,v){return Array.prototype.forEach.call(a,function(E){E.addEventListener(s,v)}),{destroy:function(){Array.prototype.forEach.call(a,function(E){E.removeEventListener(s,v)})}}}function i(a,s,v){return r(document.body,a,s,v)}d.exports=c},817:function(d){function l(t){var m;if(t.nodeName==="SELECT")t.focus(),m=t.value;else if(t.nodeName==="INPUT"||t.nodeName==="TEXTAREA"){var r=t.hasAttribute("readonly");r||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),r||t.removeAttribute("readonly"),m=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var c=window.getSelection(),p=document.createRange();p.selectNodeContents(t),c.removeAllRanges(),c.addRange(p),m=c.toString()}return m}d.exports=l},279:function(d){function l(){}l.prototype={on:function(t,m,r){var c=this.e||(this.e={});return(c[t]||(c[t]=[])).push({fn:m,ctx:r}),this},once:function(t,m,r){var c=this;function p(){c.off(t,p),m.apply(r,arguments)}return p._=m,this.on(t,p,r)},emit:function(t){var m=[].slice.call(arguments,1),r=((this.e||(this.e={}))[t]||[]).slice(),c=0,p=r.length;for(c;c<p;c++)r[c].fn.apply(r[c].ctx,m);return this},off:function(t,m){var r=this.e||(this.e={}),c=r[t],p=[];if(c&&m)for(var y=0,i=c.length;y<i;y++)c[y].fn!==m&&c[y].fn._!==m&&p.push(c[y]);return p.length?r[t]=p:delete r[t],this}},d.exports=l,d.exports.TinyEmitter=l}},$={};function k(d){if($[d])return $[d].exports;var l=$[d]={exports:{}};return P[d](l,l.exports,k),l.exports}return function(){k.n=function(d){var l=d&&d.__esModule?function(){return d.default}:function(){return d};return k.d(l,{a:l}),l}}(),function(){k.d=function(d,l){for(var t in l)k.o(l,t)&&!k.o(d,t)&&Object.defineProperty(d,t,{enumerable:!0,get:l[t]})}}(),function(){k.o=function(d,l){return Object.prototype.hasOwnProperty.call(d,l)}}(),k(686)}().default})})(Ue);var Dt=Ke(Ue.exports),Tt=N=>{const I=(N==null?void 0:N.appendToBody)===void 0?!0:N.appendToBody;return{toClipboard(P,$){return new Promise((k,d)=>{const l=document.createElement("button"),t=new Dt(l,{text:()=>P,action:()=>"copy",container:$!==void 0?$:document.body});t.on("success",m=>{t.destroy(),k(m)}),t.on("error",m=>{t.destroy(),d(m)}),I&&document.body.appendChild(l),l.click(),I&&document.body.removeChild(l)})}}};const Pt=L("br",null,null,-1),zt=L("br",null,null,-1),It={key:0},Lt={key:1},Ut=L("br",null,null,-1),Mt={key:2},Ft=L("br",null,null,-1),xt=X({__name:"index",setup(N,{expose:I}){const{toClipboard:P}=Tt();let $=S(!1),k=S(0),d=S("detail"),l=S({});const t=()=>{$.value=!1},m=p=>{l.value={},k.value=p,d.value="detail",r(),$.value=!0},r=async()=>{const p=await lt(k.value);l.value=p.data},c=async p=>{try{await P(p),Z(O.global.t("commons.msg.copySuccess"))}catch{je(O.global.t("commons.msg.copyfailed"))}};return I({acceptParams:m}),(p,y)=>{const i=Be,a=De,s=Te,v=Pe,E=se,M=J,h=ue;return R(),x(h,{"close-on-click-modal":!1,modelValue:n($),"onUpdate:modelValue":y[5]||(y[5]=_=>G($)?$.value=_:$=_),size:"50%"},{header:o(()=>[e(pe,{header:p.$t("ssl.detail"),back:t},null,8,["header"])]),default:o(()=>[L("div",null,[e(a,{modelValue:n(d),"onUpdate:modelValue":y[0]||(y[0]=_=>G(d)?d.value=_:d=_)},{default:o(()=>[e(i,{label:"detail"},{default:o(()=>[D(V(p.$t("ssl.msg")),1)]),_:1}),e(i,{label:"ssl"},{default:o(()=>[D(V(p.$t("ssl.ssl")),1)]),_:1}),e(i,{label:"key"},{default:o(()=>[D(V(p.$t("ssl.key")),1)]),_:1})]),_:1},8,["modelValue"]),Pt,zt,n(d)==="detail"?(R(),U("div",It,[e(v,{border:"",column:1},{default:o(()=>[e(s,{label:p.$t("website.primaryDomain")},{default:o(()=>[D(V(n(l).primaryDomain),1)]),_:1},8,["label"]),e(s,{label:p.$t("website.otherDomains")},{default:o(()=>[D(V(n(l).otherDomains),1)]),_:1},8,["label"]),e(s,{label:p.$t("ssl.provider")},{default:o(()=>[D(V(n(Le)(n(l).provider)),1)]),_:1},8,["label"]),n(l).acmeAccount&&n(l).provider!=="manual"?(R(),x(s,{key:0,label:p.$t("ssl.acmeAccount")},{default:o(()=>[D(V(n(l).acmeAccount.email),1)]),_:1},8,["label"])):Y("",!0),e(s,{label:p.$t("website.brand")},{default:o(()=>[D(V(n(l).type),1)]),_:1},8,["label"]),e(s,{label:p.$t("ssl.startDate")},{default:o(()=>[D(V(n(Ce)(n(l).startDate)),1)]),_:1},8,["label"]),e(s,{label:p.$t("website.expireDate")},{default:o(()=>[D(V(n(Ce)(n(l).expireDate)),1)]),_:1},8,["label"])]),_:1})])):n(d)==="ssl"?(R(),U("div",Lt,[e(E,{modelValue:n(l).pem,"onUpdate:modelValue":y[1]||(y[1]=_=>n(l).pem=_),autosize:{minRows:10,maxRows:15},type:"textarea",id:"textArea"},null,8,["modelValue"]),L("div",null,[Ut,e(M,{type:"primary",onClick:y[2]||(y[2]=_=>c(n(l).pem))},{default:o(()=>[D(V(p.$t("file.copy")),1)]),_:1})])])):(R(),U("div",Mt,[e(E,{modelValue:n(l).privateKey,"onUpdate:modelValue":y[3]||(y[3]=_=>n(l).privateKey=_),autosize:{minRows:10,maxRows:15},type:"textarea",id:"textArea"},null,8,["modelValue"]),L("div",null,[Ft,e(M,{type:"primary",onClick:y[4]||(y[4]=_=>c(n(l).privateKey))},{default:o(()=>[D(V(p.$t("file.copy")),1)]),_:1})])]))])]),_:1},8,["modelValue"])}}}),Ot=["innerHTML"],Nt=L("br",null,null,-1),$o=X({__name:"index",setup(N){const I=te({currentPage:1,pageSize:10,total:0}),P=S(),$=S(),k=S(),d=S(),l=S();let t=S(),m=S(!1);const r=[{label:O.global.t("website.ssl"),path:"/websites/ssl"}],c=[{label:O.global.t("ssl.detail"),click:function(h){E(h.id)}},{label:O.global.t("website.renewSSL"),disabled:function(h){return h.provider==="manual"},click:function(h){v(h.id,h.websites)}},{label:O.global.t("app.delete"),click:function(h){M(h.id)}}],p=()=>{const h={page:I.currentPage,pageSize:I.pageSize};m.value=!0,at(h).then(_=>{t.value=_.data.items||[],I.total=_.data.total}).finally(()=>{m.value=!1})},y=h=>{m.value=!0,rt({id:h.id,autoRenew:h.autoRenew}).then(()=>{Z(O.global.t("commons.msg.updateSuccess"))}).finally(()=>{m.value=!1})},i=()=>{P.value.acceptParams()},a=()=>{$.value.acceptParams()},s=()=>{k.value.acceptParams()},v=(h,_)=>{d.value.acceptParams({id:h,websites:_})},E=h=>{l.value.acceptParams(h)},M=async h=>{m.value=!0,await ke(it,{id:h},"commons.msg.delete"),m.value=!1,p()};return Re(()=>{p()}),(h,_)=>{const B=He,q=J,K=Ae,C=Ye,g=$e("fu-table-operations");return R(),U("div",null,[e(Xe,{buttons:r}),e(Ge,{title:h.$t("website.ssl")},{prompt:o(()=>[e(B,{type:"info",closable:!1},{default:o(()=>[L("span",null,[L("span",{innerHTML:h.$t("website.encryptHelper")},null,8,Ot)])]),_:1})]),toolbar:o(()=>[e(q,{type:"primary",onClick:_[0]||(_[0]=z=>s())},{default:o(()=>[D(V(h.$t("ssl.create")),1)]),_:1}),e(q,{type:"primary",plain:"",onClick:_[1]||(_[1]=z=>i())},{default:o(()=>[D(V(h.$t("website.acmeAccountManage")),1)]),_:1}),e(q,{type:"primary",plain:"",onClick:_[2]||(_[2]=z=>a())},{default:o(()=>[D(V(h.$t("website.dnsAccountManage")),1)]),_:1})]),main:o(()=>[Nt,e(Se,{data:n(t),"pagination-config":I,onSearch:_[3]||(_[3]=z=>p())},{default:o(()=>[e(K,{label:h.$t("website.domain"),fix:"","show-overflow-tooltip":"",prop:"primaryDomain"},null,8,["label"]),e(K,{label:h.$t("website.otherDomains"),fix:"","show-overflow-tooltip":"",prop:"domains"},null,8,["label"]),e(K,{label:h.$t("ssl.provider"),fix:"","show-overflow-tooltip":"",prop:"provider"},{default:o(({row:z})=>[D(V(n(Le)(z.provider)),1)]),_:1},8,["label"]),e(K,{label:h.$t("ssl.acmeAccount"),fix:"","show-overflow-tooltip":"",prop:"acmeAccount.email"},null,8,["label"]),e(K,{label:h.$t("website.brand"),fix:"","show-overflow-tooltip":"",prop:"type"},null,8,["label"]),e(K,{label:h.$t("ssl.autoRenew"),fix:""},{default:o(({row:z})=>[e(C,{disabled:z.provider==="dnsManual"||z.provider==="manual",modelValue:z.autoRenew,"onUpdate:modelValue":j=>z.autoRenew=j,onChange:j=>y(z)},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["label"]),e(K,{prop:"expireDate",label:h.$t("website.expireDate"),formatter:n(st),"show-overflow-tooltip":""},null,8,["label","formatter"]),e(g,{ellipsis:3,buttons:c,label:h.$t("commons.table.operate"),fixed:"right",fix:""},null,8,["label"])]),_:1},8,["data","pagination-config"])]),default:o(()=>[e(vt,{ref_key:"dnsAccountRef",ref:$},null,512),e(gt,{ref_key:"acmeAccountRef",ref:P},null,512),e(Rt,{ref_key:"sslCreateRef",ref:k,onClose:_[4]||(_[4]=z=>p())},null,512),e(kt,{ref_key:"renewRef",ref:d,onClose:_[5]||(_[5]=z=>p())},null,512),e(xt,{ref_key:"detailRef",ref:l},null,512)]),_:1},8,["title"])])}}});export{$o as default};
