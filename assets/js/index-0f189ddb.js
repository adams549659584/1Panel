import{d as B,r as p,ax as E,x as I,j as o,a as U,b as d,h as v,f as g,e as s,w as m,F as C,i as L,c as N,g as f,t as w,y as W,n as R,K as j,L as F,a4 as S,A as O}from"./index-9eeac04e.js";/* empty css               *//* empty css                 *//* empty css              *//* empty css            *//* empty css               *//* empty css               */import{e as A}from"./container-186b6752.js";import{f as H}from"./util-cbaccc93.js";import{j as M,o as $,T as z}from"./index-b02b032a.js";const K={style:{"margin-left":"20px",float:"left"}},le=B({__name:"index",setup(P,{expose:b}){const h=[M(),$],n=p(),r=E(),_=a=>{r.value=a.view},t=I({isWatch:!1,container:"",containerID:"",mode:"all"});let i=null;const D=p([{label:o.global.t("container.all"),value:"all"},{label:o.global.t("container.lastDay"),value:new Date(new Date().getTime()-3600*1e3*24*1).getTime()/1e3+""},{label:o.global.t("container.last4Hour"),value:new Date(new Date().getTime()-3600*1e3*4).getTime()/1e3+""},{label:o.global.t("container.lastHour"),value:new Date(new Date().getTime()-3600*1e3).getTime()/1e3+""},{label:o.global.t("container.last10Min"),value:new Date(new Date().getTime()-600*1e3).getTime()/1e3+""}]),c=async()=>{const a=await A(t);n.value=a.data||"",R(()=>{const e=r.value.state;r.value.dispatch({selection:{anchor:e.doc.length,head:e.doc.length},scrollIntoView:!0})})},y=async()=>{const a=window.URL.createObjectURL(new Blob([n.value])),e=document.createElement("a");e.style.display="none",e.href=a,e.download=t.container+"-"+H(new Date)+".log";const u=new MouseEvent("click");e.dispatchEvent(u)},x=a=>{t.containerID=a.containerID,t.mode="all",t.isWatch=!1,t.container=a.container,c(),i=setInterval(()=>{t.isWatch&&c()},1e3*5)};return U(()=>{clearInterval(Number(i)),i=null}),b({acceptParams:x}),(a,e)=>{const u=j,V=F,k=S,T=O;return d(),v("div",null,[g("div",null,[s(V,{onChange:c,style:{width:"10%",float:"left"},modelValue:t.mode,"onUpdate:modelValue":e[0]||(e[0]=l=>t.mode=l)},{default:m(()=>[(d(!0),v(C,null,L(D.value,l=>(d(),N(u,{key:l.label,value:l.value,label:l.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),g("div",K,[s(k,{border:"",modelValue:t.isWatch,"onUpdate:modelValue":e[1]||(e[1]=l=>t.isWatch=l)},{default:m(()=>[f(w(a.$t("commons.button.watch")),1)]),_:1},8,["modelValue"])]),s(T,{style:{"margin-left":"20px"},onClick:y,icon:"Download"},{default:m(()=>[f(w(a.$t("file.download")),1)]),_:1})]),s(W(z),{autofocus:!0,placeholder:"None data","indent-with-tab":!0,tabSize:4,style:{"margin-top":"10px",height:"calc(100vh - 375px)"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:h,onReady:_,modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value=l),disabled:!0},null,8,["modelValue"])])}}});export{le as _};
