import{_ as K,d as W,G as ie,r as i,x as b,j as k,u as ue,o as Q,X as H,Y as de,b as u,h as d,f as n,e as s,w as t,t as l,g as N,O as _,Z as ce,$ as T,a0 as me,a1 as pe,a2 as ge,A as fe,a3 as _e,a4 as ve,a5 as he,q as we,s as ye,a6 as J}from"./index-609fd921.js";/* empty css                *//* empty css                 *//* empty css             *//* empty css               */import"./form-item-d76e7d20.js";/* empty css              *//* empty css             */import{i as $e,l as be,m as ke,g as Ve,c as Ie,a as Le}from"./auth-d33d9a76.js";import{M as Fe}from"./menu-3eec827f.js";import{R as F}from"./form-rules-08616160.js";import"./index-e09fb15b.js";var Se="/assets/png/1panel-login-8a6a8a0e.png";const ee=V=>(we("data-v-9531ccc8"),V=V(),ye(),V),Ce={key:0},Me={class:"login-form"},Pe={class:"login-title"},De=ee(()=>n("input",{type:"text",class:"hide",id:"name"},null,-1)),Be=ee(()=>n("input",{type:"password",class:"hide",id:"password"},null,-1)),Re={key:1},Ae={class:"login-form"},Ee={class:"login-title"},Ue={key:0,class:"input-error",style:{"line-height":"14px"}},ze={key:2},qe={class:"login-form"},He={class:"login-title"},Ne={key:0,class:"input-error",style:{"line-height":"14px"}},Te=["src","alt"],We={key:1,class:"input-error",style:{"line-height":"14px"}},Ge=["innerHTML"],je={key:0,class:"input-error",style:{"line-height":"14px"}},xe={class:"demo"},Oe={key:0},Xe=W({__name:"login-form",setup(V){const f=ie(),v=Fe(),I=i(!1),c=i(!1),S=i(!1),G=i(!1),j=i(!1),L=i(),P=i(!1),D=i(),g=b({name:"",password:"",rePassword:""}),oe=b({name:[F.requiredInput,F.userName],password:[F.requiredInput,F.password],rePassword:[F.requiredInput,{validator:ae,trigger:"blur"}]}),B=i(),R=i(),r=b({name:"",password:"",captcha:"",captchaID:"",authMethod:"",agreeLicense:!1}),se=b({name:[{required:!0,message:k.global.t("commons.rule.username"),trigger:"blur"}],password:[{required:!0,message:k.global.t("commons.rule.password"),trigger:"blur"}]}),A=i(),y=b({name:"",password:"",secret:"",code:"",authMethod:""}),$=b({captchaID:"",imagePath:"",captchaLength:0}),E=i(!1),C=i(!1),x=ue(),O=e=>{!e||e.validate(async o=>{!o||(await $e(g),Z(),T(k.global.t("commons.msg.operationSuccess")))})},X=e=>{!e||e.validate(async o=>{if(!o)return;let h={name:r.name,password:r.password,captcha:r.captcha,captchaID:$.captchaID,authMethod:""};if(h.captcha==""){c.value=!0;return}if(r.agreeLicense==!1){j.value=!0;return}try{E.value=!0;const m=await be(h);if(m.code===406){m.message==="ErrCaptchaCode"&&(c.value=!0,I.value=!1),m.message==="ErrAuth"&&(c.value=!1,I.value=!0),M();return}if(m.data.mfaStatus==="enable"){C.value=!0,S.value=!1;return}f.setLogStatus(!0),f.setAgreeLicense(!0),v.setMenuList([]),T(k.global.t("commons.msg.loginSuccess")),x.push({name:"home"})}catch{M()}finally{E.value=!1}})},Y=async()=>{if(y.code){if(y.name=r.name,y.password=r.password,(await ke(y)).code===406){S.value=!0;return}f.setLogStatus(!0),v.setMenuList([]),T(k.global.t("commons.msg.loginSuccess")),x.push({name:"home"})}},M=async()=>{const e=await Ve();$.imagePath=e.data.imagePath?e.data.imagePath:"",$.captchaID=e.data.captchaID?e.data.captchaID:"",$.captchaLength=e.data.captchaLength?e.data.captchaLength:0},Z=async()=>{const e=await Ie();L.value=e.data,L.value||M()},te=async()=>{const e=await Le();G.value=e.data};function ae(e,o,h){if(g.password!==g.rePassword)return h(new Error(k.global.t("commons.rule.rePassword")));h()}return Q(()=>{document.title=f.themeConfig.panelName,r.agreeLicense=f.agreeLicense,Z(),te(),document.onkeydown=e=>{e=window.event||e,e.keyCode===13&&(C.value||(L.value&&!P.value&&O(D.value),!L.value&&!B.value&&X(R.value)),C.value&&!A.value&&Y())}}),(e,o)=>{const h=H("user"),m=me,w=pe,p=ge,U=H("lock"),z=fe,q=_e,ne=H("Finished"),le=ve,re=he;return de((u(),d("div",null,[L.value?(u(),d("div",Ce,[n("div",Me,[s(q,{ref_key:"registerFormRef",ref:D,model:g,size:"default",rules:oe},{default:t(()=>[n("div",Pe,l(e.$t("commons.button.init")),1),De,Be,s(p,{prop:"name",class:"no-border"},{default:t(()=>[s(w,{modelValue:g.name,"onUpdate:modelValue":o[0]||(o[0]=a=>g.name=a),placeholder:e.$t("commons.login.username"),autocomplete:"off",type:"text"},{prefix:t(()=>[s(m,{class:"el-input__icon"},{default:t(()=>[s(h)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),s(p,{prop:"password",class:"no-border"},{default:t(()=>[s(w,{type:"password",clearable:"",modelValue:g.password,"onUpdate:modelValue":o[1]||(o[1]=a=>g.password=a),"show-password":"",placeholder:e.$t("commons.login.password"),name:"passwod",autocomplete:"new-password"},{prefix:t(()=>[s(m,{class:"el-input__icon"},{default:t(()=>[s(U)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),s(p,{prop:"rePassword",class:"no-border"},{default:t(()=>[s(w,{type:"password",clearable:"",modelValue:g.rePassword,"onUpdate:modelValue":o[2]||(o[2]=a=>g.rePassword=a),"show-password":"",placeholder:e.$t("commons.login.rePassword")},{prefix:t(()=>[s(m,{class:"el-input__icon"},{default:t(()=>[s(U)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),s(p,null,{default:t(()=>[s(z,{onFocus:o[3]||(o[3]=a=>P.value=!0),onBlur:o[4]||(o[4]=a=>P.value=!1),onClick:o[5]||(o[5]=a=>O(D.value)),class:"login-button",type:"primary",size:"default",round:""},{default:t(()=>[N(l(e.$t("commons.button.init")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])])):C.value?(u(),d("div",Re,[n("div",Ae,[s(q,{onSubmit:o[10]||(o[10]=ce(()=>{},["prevent"]))},{default:t(()=>[n("div",Ee,l(e.$t("commons.login.mfaTitle")),1),s(p,{class:"no-border"},{default:t(()=>[s(w,{size:"default",placeholder:e.$t("commons.login.mfaCode"),modelValue:y.code,"onUpdate:modelValue":o[6]||(o[6]=a=>y.code=a),modelModifiers:{trim:!0}},{prefix:t(()=>[s(m,{class:"el-input__icon"},{default:t(()=>[s(ne)]),_:1})]),_:1},8,["placeholder","modelValue"]),S.value?(u(),d("span",Ue,l(e.$t("commons.login.errorMfaInfo")),1)):_("",!0)]),_:1}),s(p,null,{default:t(()=>[s(z,{onFocus:o[7]||(o[7]=a=>A.value=!0),onBlur:o[8]||(o[8]=a=>A.value=!1),class:"login-button",type:"primary",size:"default",round:"",onClick:o[9]||(o[9]=a=>Y())},{default:t(()=>[N(l(e.$t("commons.button.verify")),1)]),_:1})]),_:1})]),_:1})])])):(u(),d("div",ze,[n("div",qe,[s(q,{ref_key:"loginFormRef",ref:R,model:r,size:"default",rules:se},{default:t(()=>[n("div",He,l(e.$t("commons.button.login")),1),s(p,{prop:"name",class:"no-border"},{default:t(()=>[s(w,{modelValue:r.name,"onUpdate:modelValue":o[11]||(o[11]=a=>r.name=a),placeholder:e.$t("commons.login.username"),class:"form-input"},{prefix:t(()=>[s(m,{class:"el-input__icon"},{default:t(()=>[s(h)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),s(p,{prop:"password",class:"no-border"},{default:t(()=>[s(w,{type:"password",clearable:"",modelValue:r.password,"onUpdate:modelValue":o[12]||(o[12]=a=>r.password=a),"show-password":"",placeholder:e.$t("commons.login.password")},{prefix:t(()=>[s(m,{class:"el-input__icon"},{default:t(()=>[s(U)]),_:1})]),_:1},8,["modelValue","placeholder"]),I.value?(u(),d("span",Ne,l(e.$t("commons.login.errorAuthInfo")),1)):_("",!0)]),_:1}),s(p,{prop:"captcha",class:"login-captcha"},{default:t(()=>[s(w,{modelValue:r.captcha,"onUpdate:modelValue":o[13]||(o[13]=a=>r.captcha=a),placeholder:e.$t("commons.login.captchaHelper")},null,8,["modelValue","placeholder"]),$.imagePath?(u(),d("img",{key:0,src:$.imagePath,alt:e.$t("commons.login.captchaHelper"),onClick:o[14]||(o[14]=a=>M())},null,8,Te)):_("",!0),c.value?(u(),d("span",We,l(e.$t("commons.login.errorCaptcha")),1)):_("",!0)]),_:1}),s(p,null,{default:t(()=>[s(z,{onClick:o[15]||(o[15]=a=>X(R.value)),onFocus:o[16]||(o[16]=a=>B.value=!0),onBlur:o[17]||(o[17]=a=>B.value=!1),class:"login-button",type:"primary",size:"default",round:""},{default:t(()=>[N(l(e.$t("commons.button.login")),1)]),_:1})]),_:1}),s(p,{prop:"agreeLicense"},{default:t(()=>[s(le,{modelValue:r.agreeLicense,"onUpdate:modelValue":o[18]||(o[18]=a=>r.agreeLicense=a)},{default:t(()=>[n("span",{innerHTML:e.$t("commons.login.licenseHelper")},null,8,Ge)]),_:1},8,["modelValue"]),j.value&&r.agreeLicense===!1?(u(),d("span",je,l(e.$t("commons.login.errorAgree")),1)):_("",!0)]),_:1})]),_:1},8,["model","rules"]),n("div",xe,[G.value?(u(),d("span",Oe,l(e.$t("commons.login.username"))+":demo "+l(e.$t("commons.login.password"))+":1panel ",1)):_("",!0)])])]))])),[[re,E.value]])}}});var Ye=K(Xe,[["__scopeId","data-v-9531ccc8"]]);const Ze={key:0,class:"login-backgroud"},Je={class:"login-wrapper"},Ke={class:"login-title"},Qe={key:0,src:Se,alt:""},eo={class:"login-container"},oo={key:1,style:{"margin-left":"50px"}},so={style:{"line-height":"30px"}},to={style:{"font-weight":"500"}},ao={style:{"line-height":"30px"}},no={style:{"font-weight":"500"}},lo={style:{"line-height":"30px"}},ro={style:{color:"red"}},io=W({name:"login"}),uo=W({...io,setup(V){const f=i(0),v=i(null),I=async()=>{f.value=1};return Q(()=>{I(),v.value=document.body.clientWidth,window.onresize=()=>(()=>{v.value=document.body.clientWidth})()}),(c,S)=>(u(),d("div",null,[f.value==1?(u(),d("div",Ze,[n("div",Je,[n("div",{class:J(v.value>1110?"left inline-block":"")},[n("div",Ke,[n("span",null,l(c.$t("commons.login.title")),1)]),v.value>1110?(u(),d("img",Qe)):_("",!0)],2),n("div",{class:J(v.value>1110?"right inline-block":"")},[n("div",eo,[s(Ye,{ref:"loginRef"},null,512)])],2)])])):_("",!0),f.value==-1?(u(),d("div",oo,[n("h1",null,l(c.$t("commons.login.safeEntrance")),1),n("div",so,[n("span",to,l(c.$t("commons.login.reason")),1),n("span",null,l(c.$t("commons.login.reasonHelper")),1)]),n("div",ao,[n("span",no,l(c.$t("commons.login.solution")),1),n("span",null,l(c.$t("commons.login.solutionHelper")),1)]),n("div",lo,[n("span",ro,l(c.$t("commons.login.warnning")),1)])])):_("",!0)]))}});var ko=K(uo,[["__scopeId","data-v-3427894b"]]);export{ko as default};
