import{d as A,r as p,x as W,ax as ie,a as de,b as v,c as I,w as e,e as a,f as L,g as w,t as k,y as S,a3 as Y,h as O,F as J,i as X,O as le,ab as be,$ as te,j as T,n as me,a4 as ce,a2 as Q,K as ne,L as se,a1 as Z,l as M,m as x,A as H,af as ee,Y as re,a5 as ue,aA as Re,av as Se,J as Ie,aB as De,o as Ne,C as Ce,aq as Ue,E as Pe,ae as Be,a6 as ze,V as Le,X as Te}from"./index-9eeac04e.js";/* empty css                *//* empty css            *//* empty css                     *//* empty css                 *//* empty css            *//* empty css              *//* empty css             *//* empty css               */import{_ as qe}from"./index-e1bcfb8a.js";import{_ as Ee}from"./index-8d9ad139.js";import{T as We}from"./index-2dd05578.js";import{b as je}from"./util-cbaccc93.js";import{_ as Fe}from"./layout-content-27c09564.js";import{_ as ae}from"./index-bb4c3e65.js";/* empty css                *//* empty css               *//* empty css               */import"./form-item-d76e7d20.js";import{R as P}from"./form-rules-028b05ac.js";import{g as Oe,h as Ae,j as Me,k as xe,m as He,n as Ke,o as ye,l as Ge,p as Je,q as Xe}from"./container-186b6752.js";import{j as pe,o as fe,T as oe}from"./index-b02b032a.js";import{L as _e}from"./files-d9eb6d1f.js";import{f as ve}from"./docker-a097b8ab.js";import{_ as ge}from"./index-d5a7152b.js";/* empty css                    *//* empty css              *//* empty css                       */import{u as Ve}from"./use-delete-data-8b6821a4.js";import"./tooltip-b30db216.js";/* empty css                *//* empty css               *//* empty css                    */import"./index-5ffc91ba.js";/* empty css              *//* empty css             *//* empty css                     *//* empty css             */const Ye={class:"dialog-footer"},Qe=A({__name:"index",emits:["search"],setup(K,{expose:U,emit:B}){const r=p(!1),t=W({fromRepo:!0,repoID:null,imageName:""}),m=p(!1),c=p(!1),R=p(),f=ie(),g=o=>{f.value=o.view},D=[pe(),fe];let n=null;const s=p(),d=async o=>{c.value=!1,r.value=!0,t.fromRepo=!0,t.imageName="",s.value=o.repos,m.value=!1,R.value=""},C=p(),N=async o=>{!o||o.validate(async l=>{if(!l)return;t.fromRepo||(t.repoID=0);const V=await Oe(t);c.value=!0,m.value=!0,b(V.data),te(T.global.t("commons.msg.operationSuccess"))})},b=async o=>{n=setInterval(async()=>{if(c.value){const l=await _e({path:o});R.value=ve(l.data),me(()=>{const V=f.value.state;f.value.dispatch({selection:{anchor:V.doc.length,head:V.doc.length},scrollIntoView:!0})}),(R.value.endsWith("image pull failed!")||R.value.endsWith("image pull successful!"))&&(clearInterval(Number(n)),n=null,m.value=!1)}},1e3*3)},$=async()=>{B("search"),clearInterval(Number(n)),n=null,r.value=!1};function z(o){for(const l of s.value)if(l.id===o)return l.downloadUrl;return""}return de(()=>{clearInterval(Number(n)),n=null}),U({acceptParams:d}),(o,l)=>{const V=ce,i=Q,u=ne,h=se,G=Z,j=M,F=x,q=H,y=ee;return v(),I(y,{modelValue:r.value,"onUpdate:modelValue":l[6]||(l[6]=_=>r.value=_),onClose:$,"destroy-on-close":!0,"close-on-click-modal":!1,size:"50%"},{header:e(()=>[a(ae,{header:o.$t("container.imagePull"),back:$},null,8,["header"])]),footer:e(()=>[L("span",Ye,[a(q,{onClick:l[4]||(l[4]=_=>r.value=!1)},{default:e(()=>[w(k(o.$t("commons.button.cancel")),1)]),_:1}),a(q,{disabled:m.value,type:"primary",onClick:l[5]||(l[5]=_=>N(C.value))},{default:e(()=>[w(k(o.$t("container.pull")),1)]),_:1},8,["disabled"])])]),default:e(()=>[a(F,{type:"flex",justify:"center"},{default:e(()=>[a(j,{span:22},{default:e(()=>[a(S(Y),{ref_key:"formRef",ref:C,"label-position":"top",model:t},{default:e(()=>[a(i,{label:o.$t("container.from")},{default:e(()=>[a(V,{modelValue:t.fromRepo,"onUpdate:modelValue":l[0]||(l[0]=_=>t.fromRepo=_)},{default:e(()=>[w(k(o.$t("container.imageRepo")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),t.fromRepo?(v(),I(i,{key:0,label:o.$t("container.repoName"),rules:S(P).requiredSelect,prop:"repoID"},{default:e(()=>[a(h,{style:{width:"100%"},filterable:"",modelValue:t.repoID,"onUpdate:modelValue":l[1]||(l[1]=_=>t.repoID=_)},{default:e(()=>[(v(!0),O(J,null,X(s.value,_=>(v(),I(u,{key:_.id,value:_.id,label:_.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])):le("",!0),a(i,{label:o.$t("container.imageName"),rules:S(P).imageName,prop:"imageName"},{default:e(()=>[a(G,{modelValue:t.imageName,"onUpdate:modelValue":l[2]||(l[2]=_=>t.imageName=_),modelModifiers:{trim:!0}},be({_:2},[t.fromRepo?{name:"prepend",fn:e(()=>[w(k(z(t.repoID))+"/",1)]),key:"0"}:void 0]),1032,["modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"]),c.value?(v(),I(S(oe),{key:0,autofocus:!0,placeholder:"Waiting for pull output...","indent-with-tab":!0,tabSize:4,style:{height:"calc(100vh - 415px)"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:D,onReady:g,modelValue:R.value,"onUpdate:modelValue":l[3]||(l[3]=_=>R.value=_),disabled:!0},null,8,["modelValue"])):le("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ze={class:"dialog-footer"},ea=A({__name:"index",emits:["search"],setup(K,{expose:U,emit:B}){const r=p(!1),t=p(!1),m=p(),c=W({sourceID:"",fromRepo:!0,repoID:1,targetName:""}),R=async s=>{t.value=!0,c.repoID=1,c.sourceID=s.sourceID,c.targetName="",c.fromRepo=!0,m.value=s.repos},f=()=>{t.value=!1},g=p(),D=async s=>{!s||s.validate(async d=>{!d||(c.fromRepo||(c.repoID=0),r.value=!0,await Ae(c).then(()=>{r.value=!1,t.value=!1,B("search"),te(T.global.t("commons.msg.operationSuccess"))}).catch(()=>{r.value=!1}))})};function n(s){for(const d of m.value)if(d.id===s)return d.downloadUrl;return""}return U({acceptParams:R}),(s,d)=>{const C=ce,N=Q,b=ne,$=se,z=Z,o=M,l=x,V=H,i=ee,u=ue;return v(),I(i,{modelValue:t.value,"onUpdate:modelValue":d[5]||(d[5]=h=>t.value=h),"destroy-on-close":!0,"close-on-click-modal":!1,size:"50%"},{header:e(()=>[a(ae,{header:s.$t("container.image")+" Tag",back:f},null,8,["header"])]),footer:e(()=>[L("span",Ze,[a(V,{disabeld:r.value,onClick:d[3]||(d[3]=h=>t.value=!1)},{default:e(()=>[w(k(s.$t("commons.button.cancel")),1)]),_:1},8,["disabeld"]),a(V,{disabeld:r.value,type:"primary",onClick:d[4]||(d[4]=h=>D(g.value))},{default:e(()=>[w(k(s.$t("commons.button.save")),1)]),_:1},8,["disabeld"])])]),default:e(()=>[re((v(),I(S(Y),{"label-position":"top",ref_key:"formRef",ref:g,model:c,"label-width":"80px"},{default:e(()=>[a(l,{type:"flex",justify:"center"},{default:e(()=>[a(o,{span:22},{default:e(()=>[a(N,{label:s.$t("container.from")},{default:e(()=>[a(C,{modelValue:c.fromRepo,"onUpdate:modelValue":d[0]||(d[0]=h=>c.fromRepo=h)},{default:e(()=>[w(k(s.$t("container.imageRepo")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),c.fromRepo?(v(),I(N,{key:0,label:s.$t("container.repoName"),rules:S(P).requiredSelect,prop:"repoID"},{default:e(()=>[a($,{style:{width:"100%"},filterable:"",modelValue:c.repoID,"onUpdate:modelValue":d[1]||(d[1]=h=>c.repoID=h)},{default:e(()=>[(v(!0),O(J,null,X(m.value,h=>(v(),I(b,{key:h.id,value:h.id,label:h.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])):le("",!0),a(N,{label:s.$t("container.imageName"),rules:S(P).imageName,prop:"targetName"},{default:e(()=>[a(z,{modelValue:c.targetName,"onUpdate:modelValue":d[2]||(d[2]=h=>c.targetName=h)},be({_:2},[c.fromRepo?{name:"prepend",fn:e(()=>[w(k(n(c.repoID))+"/",1)]),key:"0"}:void 0]),1032,["modelValue"])]),_:1},8,["label","rules"])]),_:1})]),_:1})]),_:1},8,["model"])),[[u,r.value]])]),_:1},8,["modelValue"])}}}),aa={class:"dialog-footer"},la=A({__name:"index",emits:["search"],setup(K,{expose:U,emit:B}){const r=p(!1),t=W({tags:[],tagName:"",repoID:1,name:""}),m=p(!1),c=p(!1),R=p(),f=ie(),g=o=>{f.value=o.view},D=[pe(),fe];let n=null;const s=p({repos:[],tags:[]}),d=async o=>{c.value=!1,r.value=!0,t.tags=o.tags,t.repoID=1,t.tagName=t.tags.length!==0?t.tags[0]:"",t.name=t.tags.length!==0?t.tags[0]:"",s.value.repos=o.repos},C=p(),N=async o=>{!o||o.validate(async l=>{if(!l)return;const V=await Me(t);c.value=!0,m.value=!0,b(V.data),te(T.global.t("commons.msg.operationSuccess"))})},b=async o=>{n=setInterval(async()=>{if(c.value){const l=await _e({path:o});R.value=ve(l.data),me(()=>{const V=f.value.state;f.value.dispatch({selection:{anchor:V.doc.length,head:V.doc.length},scrollIntoView:!0})}),(R.value.endsWith("image push failed!")||R.value.endsWith("image push successful!"))&&(clearInterval(Number(n)),n=null,m.value=!1)}},1e3*3)},$=async()=>{B("search"),clearInterval(Number(n)),n=null,r.value=!1};function z(o){for(const l of s.value.repos)if(l.id===o)return l.downloadUrl;return""}return de(()=>{clearInterval(Number(n)),n=null}),U({acceptParams:d}),(o,l)=>{const V=ne,i=se,u=Q,h=Z,G=M,j=x,F=H,q=ee;return v(),I(q,{modelValue:r.value,"onUpdate:modelValue":l[7]||(l[7]=y=>r.value=y),"destroy-on-close":!0,onClose:$,"close-on-click-modal":!1,size:"50%"},{header:e(()=>[a(ae,{header:o.$t("container.imagePush"),back:$},null,8,["header"])]),footer:e(()=>[L("span",aa,[a(F,{onClick:l[5]||(l[5]=y=>r.value=!1)},{default:e(()=>[w(k(o.$t("commons.button.cancel")),1)]),_:1}),a(F,{disabled:m.value,type:"primary",onClick:l[6]||(l[6]=y=>N(C.value))},{default:e(()=>[w(k(o.$t("container.push")),1)]),_:1},8,["disabled"])])]),default:e(()=>[a(j,{type:"flex",justify:"center"},{default:e(()=>[a(G,{span:22},{default:e(()=>[a(S(Y),{ref_key:"formRef",ref:C,"label-position":"top",model:t,"label-width":"80px"},{default:e(()=>[a(u,{label:o.$t("container.tag"),rules:S(P).requiredSelect,prop:"tagName"},{default:e(()=>[a(i,{filterable:"",modelValue:t.tagName,"onUpdate:modelValue":l[0]||(l[0]=y=>t.tagName=y),onChange:l[1]||(l[1]=y=>t.name=t.tagName)},{default:e(()=>[(v(!0),O(J,null,X(t.tags,y=>(v(),I(V,{key:y,value:y,label:y},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),a(u,{label:o.$t("container.repoName"),rules:S(P).requiredSelect,prop:"repoID"},{default:e(()=>[a(i,{style:{width:"100%"},filterable:"",modelValue:t.repoID,"onUpdate:modelValue":l[2]||(l[2]=y=>t.repoID=y)},{default:e(()=>[(v(!0),O(J,null,X(s.value.repos,y=>(v(),I(V,{key:y.id,value:y.id,label:y.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),a(u,{label:o.$t("container.image"),rules:S(P).imageName,prop:"name"},{default:e(()=>[a(h,{modelValue:t.name,"onUpdate:modelValue":l[3]||(l[3]=y=>t.name=y),modelModifiers:{trim:!0}},{prepend:e(()=>[w(k(z(t.repoID))+"/",1)]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"]),c.value?(v(),I(S(oe),{key:0,autofocus:!0,placeholder:"Waiting for push output...","indent-with-tab":!0,tabSize:4,style:{height:"calc(100vh - 415px)"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:D,onReady:g,modelValue:R.value,"onUpdate:modelValue":l[4]||(l[4]=y=>R.value=y),disabled:!0},null,8,["modelValue"])):le("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ta={class:"dialog-footer"},oa=A({__name:"index",emits:["search"],setup(K,{expose:U,emit:B}){const r=p(!1),t=p(!1),m=W({tags:[],tagName:"",path:"",name:""}),c=p({repos:[],tags:[]}),R=async s=>{t.value=!0,m.tags=s.tags,m.path="",m.tagName="",m.name="",c.value.repos=s.repos},f=()=>{t.value=!1},g=p(),D=async s=>{!s||s.validate(async d=>{!d||(r.value=!0,await xe(m).then(()=>{r.value=!1,t.value=!1,B("search"),te(T.global.t("commons.msg.operationSuccess"))}).catch(()=>{r.value=!1}))})},n=async s=>{m.path=s};return U({acceptParams:R}),(s,d)=>{const C=ne,N=se,b=Q,$=Z,z=M,o=x,l=H,V=ee,i=ue;return v(),I(V,{modelValue:t.value,"onUpdate:modelValue":d[5]||(d[5]=u=>t.value=u),"destroy-on-close":!0,"close-on-click-modal":!1,size:"50%"},{header:e(()=>[a(ae,{header:s.$t("container.exportImage"),back:f},null,8,["header"])]),footer:e(()=>[L("span",ta,[a(l,{disabeld:r.value,onClick:d[3]||(d[3]=u=>t.value=!1)},{default:e(()=>[w(k(s.$t("commons.button.cancel")),1)]),_:1},8,["disabeld"]),a(l,{disabeld:r.value,type:"primary",onClick:d[4]||(d[4]=u=>D(g.value))},{default:e(()=>[w(k(s.$t("container.export")),1)]),_:1},8,["disabeld"])])]),default:e(()=>[re((v(),I(S(Y),{"label-position":"top",ref_key:"formRef",ref:g,model:m,"label-width":"80px"},{default:e(()=>[a(o,{type:"flex",justify:"center"},{default:e(()=>[a(z,{span:22},{default:e(()=>[a(b,{label:s.$t("container.tag"),rules:S(P).requiredSelect,prop:"tagName"},{default:e(()=>[a(N,{filterable:"",modelValue:m.tagName,"onUpdate:modelValue":d[0]||(d[0]=u=>m.tagName=u)},{default:e(()=>[(v(!0),O(J,null,X(m.tags,u=>(v(),I(C,{disabled:u.indexOf(":<none>")!==-1,key:u,value:u,label:u},null,8,["disabled","value","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),a(b,{label:s.$t("container.path"),rules:S(P).requiredSelect,prop:"path"},{default:e(()=>[a($,{modelValue:m.path,"onUpdate:modelValue":d[1]||(d[1]=u=>m.path=u)},{prepend:e(()=>[a(ge,{onChoose:n,dir:!0})]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),a(b,{label:s.$t("container.fileName"),rules:S(P).requiredInput,prop:"name"},{default:e(()=>[a($,{modelValue:m.name,"onUpdate:modelValue":d[2]||(d[2]=u=>m.name=u)},{append:e(()=>[w(".tar")]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]),_:1})]),_:1})]),_:1},8,["model"])),[[i,r.value]])]),_:1},8,["modelValue"])}}}),na={class:"dialog-footer"},sa=A({__name:"index",emits:["search"],setup(K,{expose:U,emit:B}){const r=p(!1),t=p(!1),m=W({path:""}),c=()=>{t.value=!0,m.path=""},R=()=>{t.value=!1},f=p(),g=async n=>{!n||n.validate(async s=>{!s||(r.value=!0,await He(m).then(()=>{r.value=!1,t.value=!1,B("search"),te(T.global.t("commons.msg.operationSuccess"))}).catch(()=>{r.value=!1}))})},D=async n=>{m.path=n};return U({acceptParams:c}),(n,s)=>{const d=Z,C=Q,N=M,b=x,$=H,z=ee,o=ue;return v(),I(z,{modelValue:t.value,"onUpdate:modelValue":s[3]||(s[3]=l=>t.value=l),"destroy-on-close":!0,"close-on-click-modal":!1,size:"30%"},{header:e(()=>[a(ae,{header:n.$t("container.importImage"),back:R},null,8,["header"])]),footer:e(()=>[L("span",na,[a($,{disabeld:r.value,onClick:s[1]||(s[1]=l=>t.value=!1)},{default:e(()=>[w(k(n.$t("commons.button.cancel")),1)]),_:1},8,["disabeld"]),a($,{disabeld:r.value,type:"primary",onClick:s[2]||(s[2]=l=>g(f.value))},{default:e(()=>[w(k(n.$t("container.import")),1)]),_:1},8,["disabeld"])])]),default:e(()=>[re((v(),I(S(Y),{ref_key:"formRef",ref:f,model:m,"label-position":"top"},{default:e(()=>[a(b,{type:"flex",justify:"center"},{default:e(()=>[a(N,{span:22},{default:e(()=>[a(C,{label:n.$t("container.path"),rules:S(P).requiredSelect,prop:"path"},{default:e(()=>[a(d,{modelValue:m.path,"onUpdate:modelValue":s[0]||(s[0]=l=>m.path=l)},{prepend:e(()=>[a(ge,{onChoose:D,dir:!1})]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]),_:1})]),_:1})]),_:1},8,["model"])),[[o,r.value]])]),_:1},8,["modelValue"])}}}),ra={class:"dialog-footer"},ua=A({__name:"index",emits:["search"],setup(K,{expose:U,emit:B}){const r=p(!1),t=p(),m=ie(),c=o=>{m.value=o.view},R=[pe(),fe];let f=null;const g=p(!1),D=p(!1),n=W({from:"path",dockerfile:"",name:"",tagStr:"",tags:[]}),s=W({name:[P.requiredInput,P.imageName],from:[P.requiredSelect],dockerfile:[P.requiredInput]}),d=async()=>{r.value=!1,D.value=!0,n.from="path",n.dockerfile="",n.tagStr="",n.name="",t.value="",g.value=!1},C=()=>{D.value=!1,B("search"),clearInterval(Number(f)),f=null},N=p(),b=async o=>{!o||o.validate(async l=>{if(!l)return;n.tagStr!==""&&(n.tags=n.tagStr.split(`
`));const V=await Ke(n);g.value=!0,r.value=!0,$(V.data),Re.success(T.global.t("commons.msg.operationSuccess"))})},$=async o=>{f=setInterval(async()=>{if(r.value){const l=await _e({path:o});t.value=ve(l.data),me(()=>{const V=m.value.state;m.value.dispatch({selection:{anchor:V.doc.length,head:V.doc.length},scrollIntoView:!0})}),(t.value.endsWith("image build failed!")||t.value.endsWith("image build successful!"))&&(clearInterval(Number(f)),f=null,g.value=!1)}},1e3*3)};de(()=>{clearInterval(Number(f)),f=null});const z=async o=>{n.dockerfile=o};return U({acceptParams:d}),(o,l)=>{const V=ae,i=Z,u=Q,h=Se,G=Ie,j=M,F=x,q=H,y=ee;return v(),I(y,{modelValue:D.value,"onUpdate:modelValue":l[8]||(l[8]=_=>D.value=_),"destroy-on-close":!0,onClose:C,"close-on-click-modal":!1,size:"50%"},{header:e(()=>[a(V,{header:o.$t("container.imageBuild"),back:C},null,8,["header"])]),footer:e(()=>[L("span",ra,[a(q,{onClick:l[6]||(l[6]=_=>D.value=!1)},{default:e(()=>[w(k(o.$t("commons.button.cancel")),1)]),_:1}),a(q,{disabled:g.value,type:"primary",onClick:l[7]||(l[7]=_=>b(N.value))},{default:e(()=>[w(k(o.$t("commons.button.confirm")),1)]),_:1},8,["disabled"])])]),default:e(()=>[a(F,{type:"flex",justify:"center"},{default:e(()=>[a(j,{span:22},{default:e(()=>[a(S(Y),{ref_key:"formRef",ref:N,"label-position":"top",model:n,"label-width":"80px",rules:s},{default:e(()=>[a(u,{label:o.$t("container.name"),prop:"name"},{default:e(()=>[a(i,{placeholder:o.$t("container.imageNameHelper"),modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=_=>n.name=_),modelModifiers:{trim:!0},clearable:""},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),a(u,{label:"Dockerfile",prop:"from"},{default:e(()=>[a(G,{modelValue:n.from,"onUpdate:modelValue":l[1]||(l[1]=_=>n.from=_)},{default:e(()=>[a(h,{label:"edit"},{default:e(()=>[w(k(o.$t("commons.button.edit")),1)]),_:1}),a(h,{label:"path"},{default:e(()=>[w(k(o.$t("container.pathSelect")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),n.from==="edit"?(v(),I(u,{key:0,rules:S(P).requiredInput},{default:e(()=>[a(S(oe),{autofocus:!0,placeholder:"#Define or paste the content of your Dockerfile here","indent-with-tab":!0,tabSize:4,style:{width:"100%",height:"calc(100vh - 520px)"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:R,modelValue:n.dockerfile,"onUpdate:modelValue":l[2]||(l[2]=_=>n.dockerfile=_),readOnly:!0},null,8,["modelValue"])]),_:1},8,["rules"])):(v(),I(u,{key:1,rules:S(P).requiredSelect,prop:"dockerfile"},{default:e(()=>[a(i,{clearable:"",modelValue:n.dockerfile,"onUpdate:modelValue":l[3]||(l[3]=_=>n.dockerfile=_)},{prepend:e(()=>[a(ge,{onChoose:z})]),_:1},8,["modelValue"])]),_:1},8,["rules"])),a(u,{label:o.$t("container.tag")},{default:e(()=>[a(i,{placeholder:o.$t("container.tagHelper"),type:"textarea",autosize:{minRows:2,maxRows:4},modelValue:n.tagStr,"onUpdate:modelValue":l[4]||(l[4]=_=>n.tagStr=_)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),r.value?(v(),I(S(oe),{key:0,autofocus:!0,placeholder:"Waiting for build output...","indent-with-tab":!0,tabSize:4,style:{"max-height":"300px"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:R,onReady:c,modelValue:t.value,"onUpdate:modelValue":l[5]||(l[5]=_=>t.value=_),readOnly:!0},null,8,["modelValue"])):le("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ia={class:"dialog-footer"},da=A({__name:"index",emits:["search"],setup(K,{expose:U,emit:B}){const r=p(!1),t=W({tags:[],deleteTags:[]}),m=f=>{r.value=!0,t.deleteTags=[],t.tags=f.tags},c=()=>{r.value=!1},R=async()=>{let f=[];for(const g of t.deleteTags)f.push(g);await Ve(ye,{names:f},"commons.msg.delete"),r.value=!1,B("search")};return U({acceptParams:m}),(f,g)=>{const D=ce,n=De,s=Q,d=M,C=x,N=H,b=ee;return v(),I(b,{modelValue:r.value,"onUpdate:modelValue":g[3]||(g[3]=$=>r.value=$),"destroy-on-close":!0,"close-on-click-modal":!1,size:"30%"},{header:e(()=>[a(ae,{header:f.$t("container.imageDelete"),back:c},null,8,["header"])]),footer:e(()=>[L("span",ia,[a(N,{onClick:g[1]||(g[1]=$=>r.value=!1)},{default:e(()=>[w(k(f.$t("commons.button.cancel")),1)]),_:1}),a(N,{type:"primary",disabled:t.deleteTags.length===0,onClick:g[2]||(g[2]=$=>R())},{default:e(()=>[w(k(f.$t("commons.button.delete")),1)]),_:1},8,["disabled"])])]),default:e(()=>[a(S(Y),{model:t,"label-position":"top"},{default:e(()=>[a(C,{type:"flex",justify:"center"},{default:e(()=>[a(d,{span:22},{default:e(()=>[a(s,{label:f.$t("container.tag"),prop:"tagName"},{default:e(()=>[a(n,{modelValue:t.deleteTags,"onUpdate:modelValue":g[0]||(g[0]=$=>t.deleteTags=$)},{default:e(()=>[L("div",null,[(v(!0),O(J,null,X(t.tags,$=>(v(),I(D,{style:{width:"100%"},key:$,value:$,label:$},null,8,["value","label"]))),128))])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),ma={class:"search-button"},Xa=A({__name:"index",setup(K){const U=p(!1),B=p(),r=p(),t=W({currentPage:1,pageSize:10,total:0}),m=p(),c=p("Running"),R=async()=>{U.value=!0,await Ge().then(i=>{U.value=!1,c.value=i.data,c.value==="Running"&&(b(),$())}).catch(()=>{c.value="Failed",U.value=!1})},f=async()=>{Le.push({name:"ContainerSetting"})},g=p(),D=p(),n=p(),s=p(),d=p(),C=p(),N=p(),b=async()=>{const i={info:m.value,page:t.currentPage,pageSize:t.pageSize};await Je(i).then(u=>{B.value=u.data.items||[],t.total=u.data.total})},$=async()=>{const i=await Xe();r.value=i.data||[]},z=()=>{let i={repos:r.value};g.value.acceptParams(i)},o=()=>{C.value.acceptParams()},l=()=>{s.value.acceptParams()},V=[{label:T.global.t("container.tag"),click:i=>{let u={repos:r.value,sourceID:i.id};D.value.acceptParams(u)}},{label:T.global.t("container.push"),click:i=>{let u={repos:r.value,tags:i.tags};n.value.acceptParams(u)}},{label:T.global.t("container.export"),click:i=>{let u={repos:r.value,tags:i.tags};d.value.acceptParams(u)}},{label:T.global.t("commons.button.delete"),click:async i=>{var h;if(!((h=i.tags)!=null&&h.length)||i.tags.length<=1){await Ve(ye,{names:[i.id]},"commons.msg.delete"),b();return}let u={id:i.id,tags:i.tags};N.value.acceptParams(u)}}];return Ne(()=>{R()}),(i,u)=>{const h=H,G=Ce,j=M,F=Z,q=x,y=Ue,_=Pe,he=Te("fu-table-operations"),ke=ue;return re((v(),O("div",null,[c.value!="Running"?(v(),I(G,{key:0,class:"mask-prompt"},{default:e(()=>[L("span",null,k(i.$t("container.serviceUnavailable")),1),a(h,{type:"primary",link:"",class:"bt",onClick:f},{default:e(()=>[w("\u3010 "+k(i.$t("container.setting"))+" \u3011",1)]),_:1}),L("span",null,k(i.$t("container.startIn")),1)]),_:1})):le("",!0),a(Fe,{title:i.$t("container.image"),class:ze({mask:c.value!="Running"})},{toolbar:e(()=>[a(q,null,{default:e(()=>[a(j,{span:16},{default:e(()=>[a(h,{type:"primary",plain:"",onClick:z},{default:e(()=>[w(k(i.$t("container.imagePull")),1)]),_:1}),a(h,{type:"primary",plain:"",onClick:l},{default:e(()=>[w(k(i.$t("container.importImage")),1)]),_:1}),a(h,{type:"primary",plain:"",onClick:o},{default:e(()=>[w(k(i.$t("container.imageBuild")),1)]),_:1})]),_:1}),a(j,{span:8},{default:e(()=>[a(We,{onSearch:u[0]||(u[0]=E=>b())}),L("div",ma,[a(F,{modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=E=>m.value=E),clearable:"",onClear:u[2]||(u[2]=E=>b()),"suffix-icon":"Search",onKeyup:u[3]||(u[3]=Be(E=>b(),["enter"])),onBlur:u[4]||(u[4]=E=>b()),placeholder:i.$t("commons.button.search")},null,8,["modelValue","placeholder"])])]),_:1})]),_:1})]),main:e(()=>[a(Ee,{"pagination-config":t,data:B.value,onSearch:b},{default:e(()=>[a(y,{label:"ID",prop:"id","min-width":"60"},{default:e(({row:E})=>[a(qe,{islink:!1,text:E.id},null,8,["text"])]),_:1}),a(y,{label:i.$t("container.tag"),prop:"tags","min-width":"160",fix:""},{default:e(({row:E})=>[(v(!0),O(J,null,X(E.tags,($e,we)=>(v(),I(_,{style:{"margin-left":"5px"},key:we},{default:e(()=>[w(k($e),1)]),_:2},1024))),128))]),_:1},8,["label"]),a(y,{label:i.$t("container.size"),prop:"size","min-width":"70",fix:""},null,8,["label"]),a(y,{prop:"createdAt","min-width":"90",label:i.$t("commons.table.date"),formatter:S(je)},null,8,["label","formatter"]),a(he,{width:"200px",ellipsis:10,buttons:V,label:i.$t("commons.table.operate")},null,8,["label"])]),_:1},8,["pagination-config","data"])]),_:1},8,["title","class"]),a(Qe,{ref_key:"dialogPullRef",ref:g,onSearch:b},null,512),a(ea,{ref_key:"dialogTagRef",ref:D,onSearch:b},null,512),a(la,{ref_key:"dialogPushRef",ref:n,onSearch:b},null,512),a(oa,{ref_key:"dialogSaveRef",ref:d,onSearch:b},null,512),a(sa,{ref_key:"dialogLoadRef",ref:s,onSearch:b},null,512),a(ua,{ref_key:"dialogBuildRef",ref:C,onSearch:b},null,512),a(da,{ref_key:"dialogDeleteRef",ref:N,onSearch:b},null,512)])),[[ke,U.value]])}}});export{Xa as default};
