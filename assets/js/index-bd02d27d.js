import{_ as Z,d as ee,r as m,x as te,o as oe,E as ae,A as se,ac as le,C as re,I as ne,J as ie,l as ue,a1 as pe,a2 as de,au as me,av as ce,a3 as fe,m as ve,ah as _e,a4 as ge,ao as be,a5 as ye,Y as ke,b as f,h,f as d,e as o,w as a,g as i,c as E,t as r,O as _,y as $e,j as p,$ as w,q as Ve,s as he}from"./index-609fd921.js";/* empty css                *//* empty css               *//* empty css                *//* empty css                 *//* empty css              *//* empty css            *//* empty css             *//* empty css              *//* empty css               */import"./form-item-d76e7d20.js";/* empty css              *//* empty css                    *//* empty css                     *//* empty css             *//* empty css                    *//* empty css               *//* empty css            */import{j as we,o as Re,T as Se}from"./index-5eb40136.js";import{_ as Ce}from"./layout-content-47227111.js";import{_ as De}from"./index-7e7f7e15.js";import{N as A,O as Ee,P as Ie,Q as He,R as Ne}from"./container-94920957.js";import"./index-e09fb15b.js";const Ue=k=>(Ve("data-v-d44c9a4c"),k=k(),he(),k),Be={class:"a-card",style:{"margin-top":"20px"}},je={key:2,class:"buttons"},Me={key:3,class:"buttons"},Je=Ue(()=>d("br",null,null,-1)),Te={class:"input-help"},Ae={class:"input-help"},Fe={key:1},Oe={style:{"margin-top":"10px"}},xe={class:"stopCheckbox"},ze={class:"dialog-footer"},Pe=ee({__name:"index",setup(k){const u=m(!1),I=m(!1),F=[we(),Re],v=m("base"),s=te({status:"",version:"",mirrors:"",registries:"",liveRestore:!1,cgroupDriver:""}),H=m(),$=m(),R=m(),g=m(),S=m(),C=m(),O=async e=>{!e||e.validate(async t=>{if(!t||!t)return;let c={header:p.global.t("database.confChange"),operationInfo:p.global.t("database.restartNowHelper"),submitInputInfo:p.global.t("database.restartNow")};R.value.acceptParams(c)})},x=async()=>{let e={header:p.global.t("database.confChange"),operationInfo:p.global.t("database.restartNowHelper1"),submitInputInfo:p.global.t("database.restartNow")};R.value.acceptParams(e)},V=async e=>{if(e==="stop"){g.value=!0;return}let t={stopService:!1,stopSocket:!1,operation:e};u.value=!0,await A(t).then(()=>{u.value=!1,b(),D(),w(p.global.t("commons.msg.operationSuccess"))}).catch(()=>{u.value=!1})},z=async()=>{let e={stopService:C.value,stopSocket:S.value,operation:"stop"};u.value=!0,await A(e).then(()=>{u.value=!1,g.value=!1,b(),D(),w(p.global.t("commons.msg.operationSuccess"))}).catch(()=>{u.value=!1})},P=async()=>{if(v.value==="all"){let n={file:$.value};u.value=!0,await Ee(n).then(()=>{u.value=!1,w(p.global.t("commons.msg.operationSuccess"))}).catch(()=>{u.value=!1});return}let e=s.mirrors.split(`
`),t=s.registries.split(`
`),c={status:s.status,version:"",registryMirrors:e.filter(function(n){return n!==null&&n!==""&&n!==void 0}),insecureRegistries:t.filter(function(n){return n!==null&&n!==""&&n!==void 0}),liveRestore:s.liveRestore,cgroupDriver:s.cgroupDriver};u.value=!0,await Ie(c).then(()=>{u.value=!1,b(),w(p.global.t("commons.msg.operationSuccess"))}).catch(()=>{u.value=!1})},L=async()=>{const e=await Ne();e.data==="daemon.json is not find in path"?I.value=!0:$.value=e.data},D=async()=>{v.value==="all"?L():(I.value=!1,b())},b=async()=>{const e=await He();s.status=e.data.status,s.version=e.data.version,s.cgroupDriver=e.data.cgroupDriver,s.liveRestore=e.data.liveRestore,s.mirrors=e.data.registryMirrors?e.data.registryMirrors.join(`
`):"",s.registries=e.data.insecureRegistries?e.data.insecureRegistries.join(`
`):""};return oe(()=>{b()}),(e,t)=>{const c=ae,n=se,N=le,q=re,U=ne,B=ie,j=ue,M=pe,y=de,G=me,J=ce,Q=fe,W=ve,Y=_e,T=ge,K=be,X=ye;return ke((f(),h("div",null,[d("div",Be,[o(q,null,{default:a(()=>[d("div",null,[o(c,{style:{float:"left"},effect:"dark",type:"success"},{default:a(()=>[i("Docker")]),_:1}),s.status==="Running"?(f(),E(c,{key:0,round:"",class:"status-content",type:"success"},{default:a(()=>[i(r(e.$t("commons.status.running")),1)]),_:1})):_("",!0),s.status==="Stopped"?(f(),E(c,{key:1,round:"",class:"status-content",type:"info"},{default:a(()=>[i(r(e.$t("commons.status.stopped")),1)]),_:1})):_("",!0),o(c,{class:"status-content"},{default:a(()=>[i(r(e.$t("app.version"))+": "+r(s.version),1)]),_:1}),s.status==="Running"?(f(),h("span",je,[o(n,{type:"primary",onClick:t[0]||(t[0]=l=>V("stop")),link:""},{default:a(()=>[i(r(e.$t("container.stop")),1)]),_:1}),o(N,{direction:"vertical"}),o(n,{type:"primary",onClick:t[1]||(t[1]=l=>V("restart")),link:""},{default:a(()=>[i(r(e.$t("container.restart")),1)]),_:1})])):_("",!0),s.status==="Stopped"?(f(),h("span",Me,[o(n,{type:"primary",onClick:t[2]||(t[2]=l=>V("start")),link:""},{default:a(()=>[i(r(e.$t("container.start")),1)]),_:1}),o(N,{direction:"vertical"}),o(n,{type:"primary",onClick:t[3]||(t[3]=l=>V("restart")),link:""},{default:a(()=>[i(r(e.$t("container.restart")),1)]),_:1})])):_("",!0)])]),_:1})]),o(Ce,{style:{"margin-top":"20px"},title:e.$t("container.setting"),divider:!0},{main:a(()=>[o(B,{modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=l=>v.value=l),onChange:D},{default:a(()=>[o(U,{label:"base"},{default:a(()=>[i(r(e.$t("database.baseConf")),1)]),_:1}),o(U,{label:"all"},{default:a(()=>[i(r(e.$t("database.allConf")),1)]),_:1})]),_:1},8,["modelValue"]),v.value==="base"?(f(),E(W,{key:0,style:{"margin-top":"20px"}},{default:a(()=>[o(j,{span:1},{default:a(()=>[Je]),_:1}),o(j,{span:10},{default:a(()=>[o(Q,{model:s,"label-position":"left",ref_key:"formRef",ref:H,"label-width":"120px"},{default:a(()=>[o(y,{label:e.$t("container.mirrors"),prop:"mirrors"},{default:a(()=>[o(M,{type:"textarea",placeholder:e.$t("container.mirrorHelper"),autosize:{minRows:3,maxRows:10},modelValue:s.mirrors,"onUpdate:modelValue":t[5]||(t[5]=l=>s.mirrors=l)},null,8,["placeholder","modelValue"]),d("span",Te,r(e.$t("container.mirrorsHelper")),1)]),_:1},8,["label"]),o(y,{label:e.$t("container.registries"),prop:"registries"},{default:a(()=>[o(M,{type:"textarea",placeholder:e.$t("container.registrieHelper"),autosize:{minRows:3,maxRows:10},modelValue:s.registries,"onUpdate:modelValue":t[6]||(t[6]=l=>s.registries=l)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(y,{label:"live-restore",prop:"liveRestore"},{default:a(()=>[o(G,{modelValue:s.liveRestore,"onUpdate:modelValue":t[7]||(t[7]=l=>s.liveRestore=l)},null,8,["modelValue"]),d("span",Ae,r(e.$t("container.liveHelper")),1)]),_:1}),o(y,{label:"cgroup-driver",prop:"cgroupDriver"},{default:a(()=>[o(B,{modelValue:s.cgroupDriver,"onUpdate:modelValue":t[8]||(t[8]=l=>s.cgroupDriver=l)},{default:a(()=>[o(J,{label:"cgroupfs"},{default:a(()=>[i("cgroupfs")]),_:1}),o(J,{label:"systemd"},{default:a(()=>[i("systemd")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(y,null,{default:a(()=>[o(n,{disabled:u.value,type:"primary",onClick:t[9]||(t[9]=l=>O(H.value))},{default:a(()=>[i(r(e.$t("commons.button.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})):_("",!0),v.value==="all"?(f(),h("div",Fe,[o($e(Se),{autofocus:!0,placeholder:"# The Docker configuration file does not exist or is empty (/etc/docker/daemon.json)","indent-with-tab":!0,tabSize:4,style:{"margin-top":"10px",height:"calc(100vh - 430px)"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:F,modelValue:$.value,"onUpdate:modelValue":t[10]||(t[10]=l=>$.value=l)},null,8,["modelValue"]),o(n,{disabled:u.value,type:"primary",onClick:x,style:{"margin-top":"5px"}},{default:a(()=>[i(r(e.$t("commons.button.save")),1)]),_:1},8,["disabled"])])):_("",!0)]),_:1},8,["title"]),o(K,{modelValue:g.value,"onUpdate:modelValue":t[14]||(t[14]=l=>g.value=l),title:e.$t("app.checkTitle"),width:"50%","destroy-on-close":!0},{footer:a(()=>[d("span",ze,[o(n,{onClick:t[13]||(t[13]=l=>g.value=!1)},{default:a(()=>[i(r(e.$t("commons.button.cancel")),1)]),_:1}),o(n,{type:"primary",onClick:z},{default:a(()=>[i(r(e.$t("commons.button.confirm")),1)]),_:1})])]),default:a(()=>[o(Y,{closable:!1},{default:a(()=>[i(r(e.$t("container.stopHelper"))+" ",1),d("li",null,r(e.$t("container.stopHelper2")),1),d("li",null,r(e.$t("container.stopHelper3")),1)]),_:1}),d("div",Oe,[o(T,{modelValue:C.value,"onUpdate:modelValue":t[11]||(t[11]=l=>C.value=l),label:"docker.service"},null,8,["modelValue"])]),d("div",xe,[o(T,{modelValue:S.value,"onUpdate:modelValue":t[12]||(t[12]=l=>S.value=l),label:"docker.socket"},null,8,["modelValue"])])]),_:1},8,["modelValue","title"]),o(De,{ref_key:"confirmDialogRef",ref:R,onConfirm:P},null,512)])),[[X,u.value]])}}});var ft=Z(Pe,[["__scopeId","data-v-d44c9a4c"]]);export{ft as default};
