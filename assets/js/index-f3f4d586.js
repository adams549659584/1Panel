import{d as R,r as b,b as y,c as k,w as l,e as t,f as U,y as e,g as V,t as $,Y as z,ag as J,$ as Q,j as T,a1 as te,a2 as Y,a3 as le,l as Z,m as ee,A as G,af as ze,a5 as K,S as P,o as B,X as Ie,h as M,b0 as Be,F as de,aq as pe,x as j,i as ge,au as ae,K as me,L as _e,O as D,ap as We,ac as Ge,M as Le,N as xe,a4 as De,aB as Ke,ah as Ue,u as je,a0 as Je,aT as se,aV as ie,U as Qe,ax as Xe,Q as Ye,n as Ze,E as et,C as tt,P as lt,V as at}from"./index-609fd921.js";/* empty css                *//* empty css               */import{_ as ot}from"./index-f14047dc.js";import{_ as nt}from"./layout-content-47227111.js";/* empty css                 *//* empty css                     *//* empty css                 *//* empty css            */import{_ as ce}from"./index-af1c8b2d.js";import{_ as st}from"./index-110fbc44.js";/* empty css                *//* empty css            *//* empty css             */import"./form-item-d76e7d20.js";/* empty css              */import{b as it,c as ut,d as rt,e as ne,f as Te,g as Ee,U as dt,h as pt,i as ke,j as mt,k as fe,l as be,m as Pe,n as _t,o as Se,p as ct,q as ft}from"./website-6075ac25.js";import{R as q,c as X}from"./form-rules-08616160.js";import{u as bt}from"./use-delete-data-3fb8ebbf.js";/* empty css               *//* empty css               *//* empty css               */import{G as vt}from"./group-b21a3a2d.js";/* empty css              *//* empty css                       *//* empty css                          *//* empty css                    */import{o as yt,h as Ne,n as gt,f as wt}from"./util-bdb43d7e.js";/* empty css             */import{S as ve}from"./files-c7fff4dc.js";import{G as we}from"./runtime-1b990724.js";import{S as qe,o as $e,T as he,j as $t}from"./index-5eb40136.js";import{n as Re}from"./nginx-674a5f6a.js";import{g as ht}from"./app-1a8bdb12.js";import{_ as kt}from"./index-7e7f7e15.js";/* empty css             */import{_ as St}from"./index-3ec321ac.js";/* empty css                    *//* empty css                     *//* empty css              */import"./index-e09fb15b.js";/* empty css               */const Vt={class:"dialog-footer"},Ct=R({__name:"index",emits:["close"],setup(L,{expose:h,emit:_}){const r=b();let i=b({domain:[q.requiredInput,q.domain],port:[q.requiredInput]}),s=b(!1),o=b(!1),d=b({websiteId:0,domain:"",port:80});const p=()=>{var u;(u=r.value)==null||u.resetFields(),s.value=!1,_("close",!1)},c=async u=>{d.value.websiteId=Number(u),s.value=!0},v=async u=>{!u||await u.validate(m=>{!m||(o.value=!0,it(d.value).then(()=>{Q(T.global.t("commons.msg.createSuccess")),p()}).finally(()=>{o.value=!1}))})};return h({acceptParams:c}),(u,m)=>{const w=te,f=Y,S=le,n=Z,a=ee,g=G,C=ze,N=K;return y(),k(C,{modelValue:e(s),"onUpdate:modelValue":m[3]||(m[3]=x=>J(s)?s.value=x:s=x),"close-on-click-modal":!1,title:u.$t("website.addDomain"),size:"40%","before-close":p},{header:l(()=>[t(st,{header:u.$t("website.addDomain"),back:p},null,8,["header"])]),footer:l(()=>[U("span",Vt,[t(g,{onClick:p,disabled:e(o)},{default:l(()=>[V($(u.$t("commons.button.cancel")),1)]),_:1},8,["disabled"]),t(g,{type:"primary",onClick:m[2]||(m[2]=x=>v(r.value)),disabled:e(o)},{default:l(()=>[V($(u.$t("commons.button.confirm")),1)]),_:1},8,["disabled"])])]),default:l(()=>[z((y(),k(a,null,{default:l(()=>[t(n,{span:22,offset:1},{default:l(()=>[t(S,{ref_key:"domainForm",ref:r,"label-position":"top",model:e(d),rules:e(i)},{default:l(()=>[t(f,{label:u.$t("website.domain"),prop:"domain"},{default:l(()=>[t(w,{modelValue:e(d).domain,"onUpdate:modelValue":m[0]||(m[0]=x=>e(d).domain=x)},null,8,["modelValue"])]),_:1},8,["label"]),t(f,{label:u.$t("website.port"),prop:"port"},{default:l(()=>[t(w,{modelValue:e(d).port,"onUpdate:modelValue":m[1]||(m[1]=x=>e(d).port=x),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})]),_:1})),[[N,e(o)]])]),_:1},8,["modelValue","title"])}}}),It=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>h.id);let r=b(!1);const i=b([]),s=b(),o=b(),d=[{label:T.global.t("app.delete"),click:function(w){v(w.id)},disabled:()=>i.value.length==1}],p=()=>{s.value.acceptParams(_.value)},c=w=>{const f=o.value.protocol.toLowerCase()+"://"+w;window.open(f)},v=async w=>{await bt(ut,{id:w},"commons.msg.delete"),u(_.value)},u=w=>{r.value=!0,rt(w).then(f=>{i.value=f.data}).finally(()=>{r.value=!1})},m=w=>{ne(w).then(f=>{o.value=f.data})};return B(()=>{u(_.value),m(_.value)}),(w,f)=>{const S=G,n=pe,a=Ie("fu-table-operations"),g=K;return y(),M(de,null,[z((y(),k(ce,{data:i.value,onSearch:u},{toolbar:l(()=>[t(S,{type:"primary",plain:"",onClick:p},{default:l(()=>[V($(w.$t("website.addDomain")),1)]),_:1})]),default:l(()=>[t(n,{width:"30px"},{default:l(({row:C})=>[t(S,{link:"",icon:e(Be),onClick:N=>c(C.domain)},null,8,["icon","onClick"])]),_:1}),t(n,{label:w.$t("website.domain"),prop:"domain"},null,8,["label"]),t(n,{label:w.$t("website.port"),prop:"port"},null,8,["label"]),t(a,{ellipsis:1,buttons:d,label:w.$t("commons.table.operate"),fixed:"right",fix:""},null,8,["label"])]),_:1},8,["data"])),[[g,e(r)]]),t(Ct,{ref_key:"domainRef",ref:s,onClose:f[0]||(f[0]=C=>u(e(_)))},null,512)],64)}}}),Lt=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>Number(h.id)),r=b();let i=b({index:[q.requiredInput,q.nginxDoc]}),s=b({index:""}),o=b({operate:"update",scope:"index",websiteId:_.value,params:{}}),d=b(!1);const p=async v=>{!v||await v.validate(u=>{!u||(o.value.params=s.value,d.value=!0,Te(o.value).then(()=>{Q(T.global.t("commons.msg.updateSuccess")),c(o.value)}).finally(()=>{d.value=!1}))})},c=v=>{d.value=!0,Ee(v).then(u=>{if(u.data&&u.data.params.length>0){const m=u.data.params[0].params;let w="";for(const f of m)w=w+f+`
`;s.value.index=w}}).finally(()=>{d.value=!1})};return B(()=>{c(o.value)}),(v,u)=>{const m=te,w=Y,f=le,S=G,n=Z,a=ee,g=K;return z((y(),k(a,{gutter:20},{default:l(()=>[t(n,{span:8,offset:1},{default:l(()=>[t(f,{ref_key:"defaultForm",ref:r,"label-position":"top",model:e(s),rules:e(i)},{default:l(()=>[t(w,{label:v.$t("website.defaultDoc"),prop:"index"},{default:l(()=>[t(m,{modelValue:e(s).index,"onUpdate:modelValue":u[0]||(u[0]=C=>e(s).index=C),type:"textarea",autosize:{minRows:8,maxRows:20}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),t(S,{type:"primary",onClick:u[1]||(u[1]=C=>p(r.value)),disabled:e(d)},{default:l(()=>[V($(v.$t("commons.button.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})),[[g,e(d)]])}}}),xt={class:"input-help"},Dt={class:"input-help"},Ut={class:"input-help"},Tt={key:0},Et={key:1},Pt=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>Number(h.id));let r=j({perserver:[q.requiredInput,X(1,65535)],perip:[q.requiredInput,X(1,65535)],rate:[q.requiredInput,X(1,99999999)]});const i=b();let s=j({perserver:300,perip:25,rate:512}),o=j({operate:"update",scope:"limit-conn",websiteId:_.value,params:[{}]}),d=j({scope:"limit-conn",websiteId:_.value}),p=b(!1),c=b(!1);const v=[{key:T.global.t("website.blog"),values:[300,25,512]},{key:T.global.t("website.imageSite"),values:[200,10,1024]},{key:T.global.t("website.downloadSite"),values:[50,3,2048]},{key:T.global.t("website.shopSite"),values:[500,10,2048]},{key:T.global.t("website.doorSite"),values:[400,15,1024]},{key:T.global.t("website.qiteSite"),values:[60,10,512]},{key:T.global.t("website.videoSite"),values:[150,4,1024]}];let u=b("");const m=n=>{c.value=!0,Ee(n).then(a=>{if(u.value=v[0].key,a.data){p.value=a.data.enable,a.data.enable==!1&&(o.operate="add");for(const g of a.data.params)g.name==="limit_conn"&&(g.params[0]==="perserver"&&(s.perserver=Number(g.params[1].match(/\d+/g))),g.params[0]==="perip"&&(s.perip=Number(g.params[1].match(/\d+/g)))),g.name==="limit_rate"&&(s.rate=Number(g.params[0].match(/\d+/g)))}}).finally(()=>{c.value=!1})},w=async n=>{!n||await n.validate(a=>{if(!a)return;c.value=!0;let g=[{limit_conn:"perserver "+String(s.perserver)},{limit_conn:"perip "+String(s.perip)},{limit_rate:String(s.rate)+"k"}];o.params=g,o.operate==="add"&&(p.value=!0),Te(o).then(()=>{Q(T.global.t("commons.msg.updateSuccess")),m(o)}).finally(()=>{o.operate==="add"&&(p.value=!1),c.value=!1})})},f=()=>{p.value?o.operate="add":o.operate="delete",w(i.value)},S=n=>{v.forEach(a=>{a.key===n&&(s.perserver=a.values[0],s.perip=a.values[1],s.rate=a.values[2])})};return B(()=>{m(d)}),(n,a)=>{const g=ae,C=Y,N=me,x=_e,I=te,H=le,F=G,W=Z,O=ee,oe=K;return z((y(),k(O,{gutter:20},{default:l(()=>[t(W,{span:8,offset:1},{default:l(()=>[t(C,{prop:"enable",label:n.$t("website.enableOrNot")},{default:l(()=>[t(g,{modelValue:e(p),"onUpdate:modelValue":a[0]||(a[0]=E=>J(p)?p.value=E:p=E),onChange:f},null,8,["modelValue"])]),_:1},8,["label"]),t(H,{ref_key:"limitForm",ref:i,"label-position":"left",model:e(s),rules:e(r),"label-width":"100px"},{default:l(()=>[t(C,{label:n.$t("website.limit")},{default:l(()=>[t(x,{modelValue:e(u),"onUpdate:modelValue":a[1]||(a[1]=E=>J(u)?u.value=E:u=E),onChange:a[2]||(a[2]=E=>S(e(u)))},{default:l(()=>[(y(),M(de,null,ge(v,(E,ue)=>t(N,{key:ue,label:E.key,value:E.key},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(C,{label:n.$t("website.perserver"),prop:"perserver"},{default:l(()=>[t(I,{modelValue:e(s).perserver,"onUpdate:modelValue":a[3]||(a[3]=E=>e(s).perserver=E),modelModifiers:{number:!0},maxlength:"15"},null,8,["modelValue"]),U("span",xt,$(n.$t("website.perserverHelper")),1)]),_:1},8,["label"]),t(C,{label:n.$t("website.perip"),prop:"perip"},{default:l(()=>[t(I,{modelValue:e(s).perip,"onUpdate:modelValue":a[4]||(a[4]=E=>e(s).perip=E),modelModifiers:{number:!0},maxlength:"15"},null,8,["modelValue"]),U("span",Dt,$(n.$t("website.peripHelper")),1)]),_:1},8,["label"]),t(C,{label:n.$t("website.rate"),prop:"rate"},{default:l(()=>[t(I,{modelValue:e(s).rate,"onUpdate:modelValue":a[5]||(a[5]=E=>e(s).rate=E),modelModifiers:{number:!0},maxlength:"15"},null,8,["modelValue"]),U("span",Ut,$(n.$t("website.rateHelper")),1)]),_:1},8,["label"])]),_:1},8,["model","rules"]),t(F,{type:"primary",onClick:a[6]||(a[6]=E=>w(i.value)),disabled:e(c)},{default:l(()=>[e(p)?(y(),M("span",Tt,$(n.$t("commons.button.save")),1)):(y(),M("span",Et,$(n.$t("commons.button.saveAndEnable")),1))]),_:1},8,["disabled"])]),_:1})]),_:1})),[[oe,e(c)]])}}}),Nt=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=b(),r=P(()=>Number(h.id));let i=b(!1),s=j({id:r.value,primaryDomain:"",remark:"",webSiteGroupId:0}),o=b({primaryDomain:[q.requiredInput],webSiteGroupId:[q.requiredSelect]}),d=b([]);const p=async v=>{!v||await v.validate(u=>{!u||(i.value=!0,dt(s).then(()=>{Q(T.global.t("commons.msg.updateSuccess")),c()}).finally(()=>{i.value=!1}))})},c=async()=>{const v=await vt({type:"website"});d.value=v.data,ne(r.value).then(u=>{s.primaryDomain=u.data.primaryDomain,s.remark=u.data.remark,s.webSiteGroupId=u.data.webSiteGroupId})};return B(()=>{c()}),(v,u)=>{const m=te,w=Y,f=me,S=_e,n=G,a=le,g=Z,C=ee,N=K;return z((y(),k(C,{gutter:20},{default:l(()=>[t(g,{span:8,offset:1},{default:l(()=>[t(a,{ref_key:"websiteForm",ref:_,"label-position":"left","label-width":"80px",model:e(s),rules:e(o)},{default:l(()=>[t(w,{label:v.$t("website.primaryDomain"),prop:"primaryDomain"},{default:l(()=>[t(m,{modelValue:e(s).primaryDomain,"onUpdate:modelValue":u[0]||(u[0]=x=>e(s).primaryDomain=x),disabled:""},null,8,["modelValue"])]),_:1},8,["label"]),t(w,{label:v.$t("website.group"),prop:"webSiteGroupID"},{default:l(()=>[t(S,{modelValue:e(s).webSiteGroupId,"onUpdate:modelValue":u[1]||(u[1]=x=>e(s).webSiteGroupId=x)},{default:l(()=>[(y(!0),M(de,null,ge(e(d),(x,I)=>(y(),k(f,{key:I,label:x.name,value:x.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(w,{label:v.$t("website.remark"),prop:"remark"},{default:l(()=>[t(m,{modelValue:e(s).remark,"onUpdate:modelValue":u[2]||(u[2]=x=>e(s).remark=x)},null,8,["modelValue"])]),_:1},8,["label"]),t(w,null,{default:l(()=>[t(n,{type:"primary",onClick:u[3]||(u[3]=x=>p(_.value)),disabled:e(i)},{default:l(()=>[V($(v.$t("commons.button.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})),[[N,e(i)]])}}});const qt={key:0},Rt={key:1},Ht=U("br",null,null,-1),At={key:1},Ft={style:{"white-space":"pre-line"}},Ot=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>h.id),r=b();let i=j({enable:!1,websiteId:_.value,websiteSSLId:void 0,type:"existed",privateKey:"",certificate:"",httpConfig:"HTTPToHTTPS",algorithm:"EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5",SSLProtocol:["TLSv1.3","TLSv1.2","TLSv1.1","TLSv1"]}),s=b(!1);const o=b();let d=b(),p=b({type:[q.requiredSelect],privateKey:[q.requiredInput],certificate:[q.requiredInput],websiteSSLId:[q.requiredSelect],httpConfig:[q.requiredSelect],SSLProtocol:[q.requiredSelect],algorithm:[q.requiredInput]});const c=b(),v=()=>{mt({}).then(n=>{o.value=n.data,u(i.websiteSSLId)})},u=n=>{const a=o.value.filter(g=>g.id==n);d.value=a[0]},m=n=>{n!="existed"&&(d.value={},i.websiteSSLId=void 0)},w=()=>{pt(_.value).then(n=>{n.data&&(c.value=n.data,i.enable=n.data.enable,n.data.httpConfig!=""&&(i.httpConfig=n.data.httpConfig),n.data.SSLProtocol.length>0&&(i.SSLProtocol=n.data.SSLProtocol),n.data.algorithm!=""&&(i.algorithm=n.data.algorithm),n.data.SSL&&n.data.SSL.id>0&&(i.websiteSSLId=n.data.SSL.id,d.value=n.data.SSL)),v()})},f=async n=>{!n||await n.validate(a=>{!a||(s.value=!0,i.websiteId=_.value,ke(i).then(()=>{Q(T.global.t("commons.msg.updateSuccess")),w()}).finally(()=>{s.value=!1}))})},S=n=>{n&&v(),c.value.enable&&!n&&We.confirm(T.global.t("website.disbaleHTTTPSHelper"),T.global.t("website.disbaleHTTTPS"),{confirmButtonText:T.global.t("commons.button.confirm"),cancelButtonText:T.global.t("commons.button.cancel"),type:"error",closeOnClickModal:!1,beforeClose:async(a,g,C)=>{a!=="confirm"?(i.enable=!0,C()):(g.confirmButtonLoading=!0,i.enable=!1,i.websiteId=_.value,ke(i).then(()=>{C(),Q(T.global.t("commons.msg.operationSuccess")),w()}))}}).then(()=>{})};return B(()=>{w()}),(n,a)=>{const g=ae,C=Y,N=Ge,x=me,I=_e,H=te,F=Le,W=xe,O=De,oe=Ke,E=G,ue=Ue,He=le,Ae=Z,Fe=ee,Oe=K;return z((y(),k(Fe,{gutter:20},{default:l(()=>[t(Ae,{span:14,offset:1},{default:l(()=>[t(He,{ref_key:"httpsForm",ref:r,"label-position":"left","label-width":"auto",model:e(i),rules:e(p)},{default:l(()=>[t(C,{prop:"enable",label:n.$t("website.enableHTTPS")},{default:l(()=>[t(g,{modelValue:e(i).enable,"onUpdate:modelValue":a[0]||(a[0]=A=>e(i).enable=A),onChange:S},null,8,["modelValue"])]),_:1},8,["label"]),e(i).enable?(y(),M("div",qt,[t(N,{"content-position":"left"},{default:l(()=>[V($(n.$t("website.SSLConfig")),1)]),_:1}),t(C,{label:n.$t("website.HTTPConfig"),prop:"httpConfig"},{default:l(()=>[t(I,{modelValue:e(i).httpConfig,"onUpdate:modelValue":a[1]||(a[1]=A=>e(i).httpConfig=A),style:{width:"240px"}},{default:l(()=>[t(x,{label:n.$t("website.HTTPToHTTPS"),value:"HTTPToHTTPS"},null,8,["label"]),t(x,{label:n.$t("website.HTTPAlso"),value:"HTTPAlso"},null,8,["label"]),t(x,{label:n.$t("website.HTTPSOnly"),value:"HTTPSOnly"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(C,{label:n.$t("website.sslConfig"),prop:"type"},{default:l(()=>[t(I,{modelValue:e(i).type,"onUpdate:modelValue":a[2]||(a[2]=A=>e(i).type=A),onChange:a[3]||(a[3]=A=>m(e(i).type))},{default:l(()=>[t(x,{label:n.$t("website.oldSSL"),value:"existed"},null,8,["label"]),t(x,{label:n.$t("website.manualSSL"),value:"manual"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(i).type==="existed"?(y(),k(C,{key:0,label:n.$t("website.ssl"),prop:"websiteSSLId","hide-required-asterisk":!0},{default:l(()=>[t(I,{modelValue:e(i).websiteSSLId,"onUpdate:modelValue":a[4]||(a[4]=A=>e(i).websiteSSLId=A),placeholder:n.$t("website.selectSSL"),onChange:a[5]||(a[5]=A=>u(e(i).websiteSSLId))},{default:l(()=>[(y(!0),M(de,null,ge(o.value,(A,Me)=>(y(),k(x,{key:Me,label:A.primaryDomain,value:A.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):D("",!0),e(i).type==="manual"?(y(),M("div",Rt,[t(C,{label:n.$t("website.privateKey"),prop:"privateKey"},{default:l(()=>[t(H,{modelValue:e(i).privateKey,"onUpdate:modelValue":a[6]||(a[6]=A=>e(i).privateKey=A),rows:6,type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"]),t(C,{label:n.$t("website.certificate"),prop:"certificate"},{default:l(()=>[t(H,{modelValue:e(i).certificate,"onUpdate:modelValue":a[7]||(a[7]=A=>e(i).certificate=A),rows:6,type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])])):D("",!0),e(d)&&e(d).id>0?(y(),k(C,{key:2,label:" "},{default:l(()=>[t(W,{column:5,border:"",direction:"vertical"},{default:l(()=>[t(F,{label:n.$t("website.primaryDomain")},{default:l(()=>[V($(e(d).primaryDomain),1)]),_:1},8,["label"]),t(F,{label:n.$t("website.otherDomains")},{default:l(()=>[V($(e(d).domains),1)]),_:1},8,["label"]),t(F,{label:n.$t("ssl.provider")},{default:l(()=>[V($(e(yt)(e(d).provider)),1)]),_:1},8,["label"]),e(d).acmeAccount&&e(d).provider!=="manual"?(y(),k(F,{key:0,label:n.$t("ssl.acmeAccount")},{default:l(()=>[V($(e(d).acmeAccount.email),1)]),_:1},8,["label"])):D("",!0),t(F,{label:n.$t("website.expireDate")},{default:l(()=>[V($(e(Ne)(e(d).expireDate)),1)]),_:1},8,["label"])]),_:1})]),_:1})):D("",!0),t(N,{"content-position":"left"},{default:l(()=>[V($(n.$t("website.SSLProConfig")),1)]),_:1}),t(C,{label:n.$t("website.supportProtocol"),prop:"SSLProtocol"},{default:l(()=>[t(oe,{modelValue:e(i).SSLProtocol,"onUpdate:modelValue":a[8]||(a[8]=A=>e(i).SSLProtocol=A)},{default:l(()=>[t(O,{label:"TLSv1.3"},{default:l(()=>[V($("TLS 1.3"),1)]),_:1},8,["label"]),t(O,{label:"TLSv1.2"},{default:l(()=>[V($("TLS 1.2"),1)]),_:1},8,["label"]),t(O,{label:"TLSv1.1"},{default:l(()=>[V($("TLS 1.1"),1)]),_:1},8,["label"]),t(O,{label:"TLSv1"},{default:l(()=>[V($("TLS 1.0"),1)]),_:1}),Ht,t(O,{label:"SSLv3"},{default:l(()=>[V($("SSL V3"+n.$t("website.notSecurity")),1)]),_:1}),t(O,{label:"SSLv2"},{default:l(()=>[V($("SSL V2"+n.$t("website.notSecurity")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(C,{prop:"algorithm",label:n.$t("website.encryptionAlgorithm")},{default:l(()=>[t(H,{type:"textarea",autosize:{minRows:2,maxRows:6},modelValue:e(i).algorithm,"onUpdate:modelValue":a[9]||(a[9]=A=>e(i).algorithm=A),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(C,null,{default:l(()=>[t(E,{type:"primary",onClick:a[10]||(a[10]=A=>f(r.value))},{default:l(()=>[V($(n.$t("commons.button.save")),1)]),_:1})]),_:1})])):(y(),M("div",At,[t(ue,{closable:!1},{default:l(()=>[U("span",Ft,$(n.$t("website.SSLHelper")),1)]),_:1})]))]),_:1},8,["model","rules"])]),_:1})]),_:1})),[[Oe,e(s)]])}}}),Mt=U("br",null,null,-1),zt=U("br",null,null,-1),Bt=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=je(),r=P(()=>Number(h.id));let i=b({}),s=b(!1);const o=()=>{s.value=!0,ne(r.value).then(p=>{i.value=p.data}).finally(()=>{s.value=!1})},d=p=>{_.push({path:"/hosts/files",query:{path:p}})};return B(()=>{o()}),(p,c)=>{const v=Le,u=Ie("FolderOpened"),m=Je,w=G,f=xe,S=Z,n=ee,a=K;return y(),k(n,{gutter:20},{default:l(()=>[t(S,{span:14,offset:1},{default:l(()=>[Mt,z((y(),k(f,{column:1,border:""},{default:l(()=>[t(v,{label:p.$t("website.siteAlias")},{default:l(()=>[V($(e(i).alias),1)]),_:1},8,["label"]),t(v,{label:p.$t("website.primaryPath")},{default:l(()=>[V($(e(i).sitePath)+" ",1),t(w,{type:"primary",link:"",onClick:c[0]||(c[0]=g=>d(e(i).sitePath))},{default:l(()=>[t(m,null,{default:l(()=>[t(u)]),_:1})]),_:1})]),_:1},8,["label"])]),_:1})),[[a,e(s)]]),zt,t(f,{title:p.$t("website.folderTitle"),column:1,border:""},{default:l(()=>[t(v,{label:"waf"},{default:l(()=>[V($(p.$t("website.wafFolder")),1)]),_:1}),t(v,{label:"ssl"},{default:l(()=>[V($(p.$t("website.sslFolder")),1)]),_:1}),t(v,{label:"log"},{default:l(()=>[V($(p.$t("website.logFoler")),1)]),_:1}),t(v,{label:"index"},{default:l(()=>[V($(p.$t("website.indexFolder")),1)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})}}}),Wt=R({name:"Basic"}),Gt=R({...Wt,props:{id:{type:Number,default:-1}},setup(L){const h=L,_=P(()=>h.id);let r=b("0");return(i,s)=>{const o=se,d=ie;return y(),k(d,{"tab-position":"left",modelValue:e(r),"onUpdate:modelValue":s[0]||(s[0]=p=>J(r)?r.value=p:r=p)},{default:l(()=>[t(o,{label:i.$t("website.domainConfig")},{default:l(()=>[e(r)=="0"&&e(_)>0?(y(),k(It,{key:e(_),id:e(_)},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("website.sitePath")},{default:l(()=>[e(r)=="1"?(y(),k(Bt,{key:0,id:e(_)},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("website.defaultDoc")},{default:l(()=>[e(r)=="2"?(y(),k(Lt,{key:0,id:e(_)},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("website.rate")},{default:l(()=>[e(r)=="3"?(y(),k(Pt,{key:0,id:e(_)},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:"HTTPS"},{default:l(()=>[e(r)=="4"?(y(),k(Ot,{key:0,id:e(_)},null,8,["id"])):D("",!0)]),_:1}),t(o,{label:i.$t("website.other")},{default:l(()=>[e(r)=="5"?(y(),k(Nt,{key:0,id:e(_)},null,8,["id"])):D("",!0)]),_:1},8,["label"])]),_:1},8,["modelValue"])}}}),Kt=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>h.id);let r=b(),i=b(!1),s=j({enable:!1,cycle:60,frequency:120}),o=b({websiteId:0,key:"$CCDeny",rule:"cc"}),d=b({websiteId:0,key:"$CCDeny",enable:!1}),p=j({path:"",content:""}),c=b({cycle:[q.requiredInput,X(1,9999999)],frequency:[q.requiredInput,X(1,9999999)]});const v=b(),u=async()=>{i.value=!0;const f=await fe(o.value);if(i.value=!1,r.value=f.data,s.enable=r.value.enable,r.value.content!=""){const S=r.value.content.split("/");s.frequency=Number(S[0]),s.cycle=Number(S[1])}p.path=r.value.filePath},m=async f=>{d.value.enable=f,i.value=!0;try{await be(d.value)}catch{s.enable=!f}i.value=!1},w=async f=>{!f||await f.validate(S=>{!S||(p.content=String(s.frequency)+"/"+String(s.cycle),i.value=!0,ve(p).then(()=>{Q(T.global.t("commons.msg.updateSuccess"))}).finally(()=>{i.value=!1}))})};return B(()=>{o.value.websiteId=_.value,d.value.websiteId=_.value,u()}),(f,S)=>{const n=ae,a=Y,g=te,C=Ue,N=G,x=le,I=Z,H=ee,F=K;return z((y(),k(H,{gutter:20},{default:l(()=>[t(I,{span:10,offset:1},{default:l(()=>[t(x,{ref_key:"wafForm",ref:v,"label-position":"left","label-width":"auto",model:e(s),rules:e(c)},{default:l(()=>[t(a,{prop:"enable",label:f.$t("website.enable")},{default:l(()=>[t(n,{modelValue:e(s).enable,"onUpdate:modelValue":S[0]||(S[0]=W=>e(s).enable=W),onChange:m},null,8,["modelValue"])]),_:1},8,["label"]),t(a,{prop:"cycle",label:f.$t("website.cycle")},{default:l(()=>[t(g,{modelValue:e(s).cycle,"onUpdate:modelValue":S[1]||(S[1]=W=>e(s).cycle=W),modelModifiers:{number:!0},maxlength:"15"},{append:l(()=>[V($(f.$t("website.seconds")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(a,{prop:"frequency",label:f.$t("website.frequency")},{default:l(()=>[t(g,{modelValue:e(s).frequency,"onUpdate:modelValue":S[2]||(S[2]=W=>e(s).frequency=W),modelModifiers:{number:!0},maxlength:"15"},{append:l(()=>[V($(f.$t("website.count")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(C,{title:f.$t("website.ccHelper",[e(s).cycle,e(s).frequency]),type:"info",closable:!1},null,8,["title"]),t(a),t(a,null,{default:l(()=>[t(N,{type:"primary",onClick:S[3]||(S[3]=W=>w(v.value))},{default:l(()=>[V($(f.$t("commons.button.save")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})),[[F,e(i)]])}}}),re=R({__name:"index",props:{id:{type:Number,default:0},rule:{type:String,default:"ipWhiteList"},paramKey:{type:String,default:"$ipWhiteAllow"}},setup(L){const h=L,_=P(()=>h.id),r=P(()=>h.rule),i=P(()=>h.paramKey);let s=b(!1),o=b([]),d=b({websiteId:0,key:"$ipWhiteAllow",rule:"ip_white"}),p=j({path:"",content:""}),c=b({websiteId:0,key:"$ipWhiteAllow",enable:!1}),v=b();const u=async()=>{o.value=[],s.value=!0;const n=await fe(d.value);s.value=!1,n.data.content!=""&&JSON.parse(n.data.content).forEach(g=>{o.value.push({ip:g})}),c.value.enable=n.data.enable,p.path=n.data.filePath},m=n=>{const a=o.value.concat();a.splice(n,1);let g=[];a.forEach(C=>{g.push(C.ip)}),f(g)},w=()=>{const n=v.value.split(`
`);if(n.length==0)return;let a=[];if(n.forEach(g=>{const C=g.replace(/(^\s*)|(\s*$)/g,"");C!=""&&a.push(C)}),a.length!=0){if(d.value.rule.indexOf("ip")>-1){for(const g in a)if(gt(a[g])){Qe(T.global.t("commons.rule.ipErr",[n[g]]));return}}o.value.forEach(g=>{a.push(g.ip)}),a.length>0&&f(a)}},f=async n=>{p.content=JSON.stringify(n),s.value=!0,ve(p).then(()=>{v.value="",u(),Q(T.global.t("commons.msg.updateSuccess"))}).finally(()=>{s.value=!1})},S=async n=>{c.value.enable=n,s.value=!0;try{await be(c.value)}catch{c.value.enable=!n}s.value=!1};return B(()=>{d.value.websiteId=_.value,d.value.rule=r.value,d.value.key=i.value,c.value.websiteId=_.value,c.value.key=i.value,u()}),(n,a)=>{const g=ae,C=Y,N=te,x=G,I=pe,H=Z,F=ee,W=K;return y(),k(F,null,{default:l(()=>[t(H,{span:10,offset:1},{default:l(()=>[t(C,{prop:"enable",label:n.$t("website.enable")},{default:l(()=>[t(g,{modelValue:e(c).enable,"onUpdate:modelValue":a[0]||(a[0]=O=>e(c).enable=O),onChange:S},null,8,["modelValue"])]),_:1},8,["label"]),t(C,{label:n.$t("website.ipValue")},{default:l(()=>[t(N,{type:"textarea",autosize:{minRows:4,maxRows:8},modelValue:e(v),"onUpdate:modelValue":a[1]||(a[1]=O=>J(v)?v.value=O:v=O),placeholder:n.$t("website.wafInputHelper")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),z((y(),k(ce,{data:e(o)},{toolbar:l(()=>[t(x,{type:"primary",icon:"Plus",onClick:w},{default:l(()=>[V($(n.$t("commons.button.add")),1)]),_:1})]),default:l(()=>[t(I,{label:n.$t("website.ipValue"),prop:"ip"},null,8,["label"]),t(I,{label:n.$t("commons.table.operate")},{default:l(({$index:O})=>[t(x,{link:"",type:"primary",onClick:oe=>m(O)},{default:l(()=>[V($(n.$t("commons.button.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[W,e(s)]])]),_:1})]),_:1})}}}),jt=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>h.id);let r=b(!1),i=b([]),s=b({websiteId:0,key:"$fileExtDeny",rule:"file_ext_block"}),o=j({path:"",content:""}),d=b({websiteId:0,key:"$fileExtDeny",enable:!1}),p=b();const c=async()=>{i.value=[],r.value=!0;const f=await fe(s.value);r.value=!1,f.data.content!=""&&JSON.parse(f.data.content).forEach(n=>{i.value.push({file:n})}),o.path=f.data.filePath,d.value.enable=f.data.enable},v=f=>{const S=i.value.concat();S.splice(f,1);const n=[];S.forEach(a=>{n.push(a.file)}),m(n)},u=()=>{const f=p.value.split(`
`);f.length!==0&&(i.value.forEach(S=>{f.push(S.file)}),m(f))},m=async f=>{o.content=JSON.stringify(f),r.value=!0,ve(o).then(()=>{p.value="",Q(T.global.t("commons.msg.updateSuccess")),c()}).finally(()=>{r.value=!1})},w=async f=>{d.value.enable=f,r.value=!0;try{await be(d.value)}catch{d.value.enable=!f}r.value=!1};return B(()=>{s.value.websiteId=_.value,d.value.websiteId=_.value,c()}),(f,S)=>{const n=ae,a=Y,g=te,C=G,N=pe,x=Z,I=ee,H=K;return y(),k(I,null,{default:l(()=>[t(x,{span:10,offset:1},{default:l(()=>[t(a,{prop:"enable",label:f.$t("website.enable")},{default:l(()=>[t(n,{modelValue:e(d).enable,"onUpdate:modelValue":S[0]||(S[0]=F=>e(d).enable=F),onChange:w},null,8,["modelValue"])]),_:1},8,["label"]),t(a,{label:f.$t("website.ext")},{default:l(()=>[t(g,{type:"textarea",autosize:{minRows:4,maxRows:8},modelValue:e(p),"onUpdate:modelValue":S[1]||(S[1]=F=>J(p)?p.value=F:p=F),placeholder:f.$t("website.wafInputHelper")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),z((y(),k(ce,{data:e(i)},{toolbar:l(()=>[t(C,{type:"primary",icon:"Plus",onClick:u},{default:l(()=>[V($(f.$t("commons.button.add")),1)]),_:1})]),default:l(()=>[t(N,{label:f.$t("website.fileExt"),prop:"file"},null,8,["label"]),t(N,{label:f.$t("commons.table.operate")},{default:l(({$index:F})=>[t(C,{link:"",type:"primary",onClick:W=>v(F)},{default:l(()=>[V($(f.$t("commons.button.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[H,e(r)]])]),_:1})]),_:1})}}}),ye=R({__name:"index",props:{id:{type:Number,default:0},rule:{type:String,default:"url"},paramKey:{type:String,default:"url"}},setup(L){const h=L,_=P(()=>h.id),r=P(()=>h.rule),i=P(()=>h.paramKey);let s=b(!1),o=b([]),d=b({websiteId:0,key:"",rule:"url"}),p=j({path:"",content:""}),c=b({websiteId:0,key:"$UrlDeny",enable:!1}),v=b({value:"",remark:"",enbale:1}),u=b([]);const m=async()=>{o.value=[],s.value=!0;const a=await fe(d.value);s.value=!1,c.value.enable=a.data.enable,a.data.content!=""&&(u.value=JSON.parse(a.data.content),u.value.forEach(g=>{g!=""&&o.value.push({value:g[0],remark:g[1],enable:g[2]})})),p.path=a.data.filePath},w=a=>{u.value.splice(a,1),n([])},f=()=>{if(v.value.value=="")return;let a=[];a[0]=v.value.value,a[1]=v.value.remark,a[2]=v.value.enbale,o.value.push(a),n(a)},S=async a=>{c.value.enable=a,s.value=!0;try{await be(c.value)}catch{c.value.enable=!a}s.value=!1},n=async a=>{a.length>0&&u.value.push(a),p.content=JSON.stringify(u.value),s.value=!0,ve(p).then(()=>{v.value={value:"",remark:"",enbale:1},Q(T.global.t("commons.msg.updateSuccess")),m()}).finally(()=>{s.value=!1})};return B(()=>{d.value.websiteId=_.value,d.value.rule=r.value,d.value.key=i.value,c.value.key=i.value,c.value.websiteId=_.value,m()}),(a,g)=>{const C=ae,N=Y,x=te,I=Z,H=ee,F=le,W=G,O=pe,oe=K;return y(),k(H,null,{default:l(()=>[t(I,{span:14,offset:1},{default:l(()=>[t(F,null,{default:l(()=>[t(N,{prop:"enable",label:a.$t("website.enable")},{default:l(()=>[t(C,{modelValue:e(c).enable,"onUpdate:modelValue":g[0]||(g[0]=E=>e(c).enable=E),onChange:S},null,8,["modelValue"])]),_:1},8,["label"]),t(N,{label:a.$t("website.data")},{default:l(()=>[t(H,{gutter:10,style:{width:"100%"}},{default:l(()=>[t(I,{span:12},{default:l(()=>[t(x,{type:"text",modelValue:e(v).value,"onUpdate:modelValue":g[1]||(g[1]=E=>e(v).value=E),label:"value",placeholder:a.$t("website.wafValueHelper")},null,8,["modelValue","placeholder"])]),_:1}),t(I,{span:12},{default:l(()=>[t(x,{type:"text",modelValue:e(v).remark,"onUpdate:modelValue":g[2]||(g[2]=E=>e(v).remark=E),label:"remark",placeholder:a.$t("website.wafRemarkHelper")},null,8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1},8,["label"])]),_:1}),z((y(),k(ce,{data:e(o)},{toolbar:l(()=>[t(W,{type:"primary",icon:"Plus",onClick:f},{default:l(()=>[V($(a.$t("commons.button.add")),1)]),_:1})]),default:l(()=>[t(O,{label:a.$t("website.value"),prop:"value"},null,8,["label"]),t(O,{label:a.$t("website.remark"),prop:"remark"},null,8,["label"]),t(O,{label:a.$t("commons.table.operate"),width:"100px"},{default:l(({$index:E})=>[t(W,{link:"",type:"primary",onClick:ue=>w(E)},{default:l(()=>[V($(a.$t("commons.button.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[oe,e(s)]])]),_:1})]),_:1})}}}),Jt=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>h.id);let r=b("cc");return(i,s)=>{const o=se,d=ie;return y(),k(d,{"tab-position":"left",modelValue:e(r),"onUpdate:modelValue":s[0]||(s[0]=p=>J(r)?r.value=p:r=p)},{default:l(()=>[t(o,{label:i.$t("firewall.ccDeny"),name:"cc"},{default:l(()=>[e(r)=="cc"?(y(),k(Kt,{key:0,id:e(_)},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("firewall.ipWhiteList"),name:"ipWhiteList"},{default:l(()=>[e(r)=="ipWhiteList"?(y(),k(re,{key:0,id:e(_),rule:"ip_white","param-key":"$ipWhiteAllow"},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("firewall.ipBlockList"),name:"ipBlockList"},{default:l(()=>[e(r)=="ipBlockList"?(y(),k(re,{key:0,id:e(_),rule:"ip_block","param-key":"$ipBlockDeny"},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("firewall.urlWhiteList"),name:"urlWhiteList"},{default:l(()=>[e(r)=="urlWhiteList"?(y(),k(re,{key:0,id:e(_),rule:"url_white","param-key":"$urlWhiteAllow"},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("firewall.urlBlockList"),name:"urlBlockList"},{default:l(()=>[e(r)=="urlBlockList"?(y(),k(re,{key:0,id:e(_),rule:"url_block","param-key":"$urlBlockDeny"},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("firewall.cookieBlockList"),name:"cookie"},{default:l(()=>[e(r)=="cookie"?(y(),k(ye,{key:0,id:e(_),rule:"cookie_block","param-key":"$cookieDeny"},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("firewall.argsCheck"),name:"args"},{default:l(()=>[e(r)=="args"?(y(),k(ye,{key:0,id:e(_),rule:"args_check","param-key":"$argsDeny"},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("firewall.postCheck"),name:"post"},{default:l(()=>[e(r)=="post"?(y(),k(ye,{key:0,id:e(_),rule:"post_check","param-key":"$postDeny"},null,8,["id"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("firewall.fileExtBlockList"),name:"fileExtBlockList"},{default:l(()=>[e(r)=="fileExtBlockList"?(y(),k(jt,{key:0,id:e(_)},null,8,["id"])):D("",!0)]),_:1},8,["label"])]),_:1},8,["modelValue"])}}}),Qt={style:{"margin-top":"10px"}},Xt=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=[qe.define(Re),$e],r=P(()=>h.id);let i=b(),s=b(!1),o=b("");const d=()=>{s.value=!0,Pe(r.value,"openresty").then(c=>{i.value=c.data,o.value=i.value.content}).finally(()=>{s.value=!1})},p=()=>{s.value=!0,_t({id:r.value,content:o.value}).then(()=>{Q(T.global.t("commons.msg.updateSuccess"))}).finally(()=>{s.value=!1})};return B(()=>{d()}),(c,v)=>{const u=G,m=K;return z((y(),M("div",null,[t(e(he),{autofocus:!0,placeholder:"None data","indent-with-tab":!0,tabSize:4,style:{"margin-top":"10px","max-height":"700px"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:_,modelValue:e(o),"onUpdate:modelValue":v[0]||(v[0]=w=>J(o)?o.value=w:o=w)},null,8,["modelValue"]),U("div",Qt,[t(u,{type:"primary",onClick:v[1]||(v[1]=w=>p())},{default:l(()=>[V($(c.$t("nginx.saveAndReload")),1)]),_:1})])])),[[m,e(s)]])}}}),Yt={style:{"margin-top":"10px"}},Ve=R({__name:"index",props:{id:{type:Number,default:0},type:{type:String,default:"fpm"},installId:{type:Number,default:0}},setup(L){const h=L,_=[qe.define(Re),$e],r=P(()=>h.id);let i=b(),s=b(!1),o=b("");const d=()=>{s.value=!0,Pe(r.value,h.type).then(c=>{i.value=c.data,o.value=i.value.content}).finally(()=>{s.value=!1})},p=async()=>{s.value=!0;let c={installId:h.installId,operate:"restart"};await ht(c).then(()=>{Q(T.global.t("commons.msg.updateSuccess"))}).catch(()=>{}).finally(()=>{s.value=!1})};return B(()=>{d()}),(c,v)=>{const u=G,m=K;return z((y(),M("div",null,[t(e(he),{autofocus:!0,placeholder:"None data","indent-with-tab":!0,tabSize:4,style:{"margin-top":"10px","max-height":"700px"},lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:_,modelValue:e(o),"onUpdate:modelValue":v[0]||(v[0]=w=>J(o)?o.value=w:o=w)},null,8,["modelValue"]),U("div",Yt,[t(u,{type:"primary",onClick:v[1]||(v[1]=w=>p())},{default:l(()=>[V($(c.$t("nginx.saveAndReload")),1)]),_:1})])])),[[m,e(s)]])}}}),Zt=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>h.id);let r=b("0"),i=b(!1),s=b(0);const o=async()=>{const d=await ne(h.id);d.data.type==="runtime"&&(s.value=d.data.appInstallId,(await we(d.data.runtimeID)).data.resource==="appstore"&&(i.value=!0))};return B(()=>{o()}),(d,p)=>{const c=se,v=ie;return y(),k(v,{"tab-position":"left",modelValue:e(r),"onUpdate:modelValue":p[0]||(p[0]=u=>J(r)?r.value=u:r=u)},{default:l(()=>[t(c,{label:"OpenResty",name:"0"},{default:l(()=>[e(r)=="0"?(y(),k(Xt,{key:0,id:e(_)},null,8,["id"])):D("",!0)]),_:1}),t(c,{label:"FPM",name:"1"},{default:l(()=>[e(r)=="1"?(y(),k(Ve,{key:0,id:e(_),installId:e(s),type:"fpm"},null,8,["id","installId"])):D("",!0)]),_:1}),t(c,{label:"PHP",name:"2"},{default:l(()=>[e(r)=="2"?(y(),k(Ve,{key:0,id:e(_),installId:e(s),type:"php"},null,8,["id","installId"])):D("",!0)]),_:1})]),_:1},8,["modelValue"])}}}),el={style:{"margin-top":"10px"}},tl=U("br",null,null,-1),Ce=R({__name:"index",props:{logType:{type:String,default:""},id:{type:Number,default:0}},setup(L){const h=L,_=[$t(),$e],r=P(()=>h.logType),i=P(()=>h.id);let s=b(!1),o=b({enable:!1,content:""}),d=b(!1),p=null;const c=Xe(),v=n=>{c.value=n.view},u=()=>{const n={id:i.value,operate:"get",logType:r.value};s.value=!0,Se(n).then(a=>{o.value=a.data,Ze(()=>{const g=c.value.state;c.value.dispatch({selection:{anchor:g.doc.length,head:g.doc.length},scrollIntoView:!0})})}).finally(()=>{s.value=!1})},m=()=>{d.value?p=setInterval(()=>{u()},1e3*5):S()},w=()=>{const n=o.value.enable?"enable":"disable",a={id:i.value,operate:n,logType:r.value};s.value=!0,Se(a).then(()=>{u()}).finally(()=>{s.value=!1})},f=async()=>{const n=window.URL.createObjectURL(new Blob([o.value.content])),a=document.createElement("a");a.style.display="none",a.href=n,a.download=r.value+"-"+wt(new Date)+".log";const g=new MouseEvent("click");a.dispatchEvent(g)},S=async()=>{d.value=!1,clearInterval(Number(p)),p=null};return B(()=>{u()}),Ye(()=>{S()}),(n,a)=>{const g=ae,C=Y,N=De,x=G,I=K;return z((y(),M("div",null,[U("div",null,[t(C,{label:n.$t("website.enable")},{default:l(()=>[t(g,{modelValue:e(o).enable,"onUpdate:modelValue":a[0]||(a[0]=H=>e(o).enable=H),onChange:w},null,8,["modelValue"])]),_:1},8,["label"]),U("div",el,[t(N,{border:"",modelValue:e(d),"onUpdate:modelValue":a[1]||(a[1]=H=>J(d)?d.value=H:d=H),style:{float:"left"},onChange:m},{default:l(()=>[V($(n.$t("commons.button.watch")),1)]),_:1},8,["modelValue"]),t(x,{style:{"margin-left":"20px"},onClick:f,icon:"Download",disabled:e(o).content===""},{default:l(()=>[V($(n.$t("file.download")),1)]),_:1},8,["disabled"])])]),tl,t(e(he),{style:{height:"calc(100vh - 430px)",width:"100%"},autofocus:!0,placeholder:n.$t("website.noLog"),"indent-with-tab":!0,tabSize:4,lineWrapping:!0,matchBrackets:!0,theme:"cobalt",styleActiveLine:!0,extensions:_,modelValue:e(o).content,"onUpdate:modelValue":a[2]||(a[2]=H=>e(o).content=H),disabled:!0,onReady:v},null,8,["placeholder","modelValue"])])),[[I,e(s)]])}}}),ll=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>h.id);let r=b("0");return(i,s)=>{const o=se,d=ie;return y(),k(d,{"tab-position":"left",modelValue:e(r),"onUpdate:modelValue":s[0]||(s[0]=p=>J(r)?r.value=p:r=p)},{default:l(()=>[t(o,{label:i.$t("website.accessLog"),name:"0"},{default:l(()=>[e(r)=="0"?(y(),k(Ce,{key:0,id:e(_),"log-type":"access.log"},null,8,["id","log-type"])):D("",!0)]),_:1},8,["label"]),t(o,{label:i.$t("website.errLog"),name:"1"},{default:l(()=>[e(r)=="1"?(y(),k(Ce,{key:0,id:e(_),"log-type":"error.log"},null,8,["id","log-type"])):D("",!0)]),_:1},8,["label"])]),_:1},8,["modelValue"])}}}),al=U("br",null,null,-1),ol={class:"input-help"},nl={class:"input-help"},sl={class:"input-help"},il={class:"input-help"},ul={class:"input-help"},rl={class:"input-help"},dl=U("br",null,null,-1),pl={class:"input-help"},ml={class:"input-help"},_l={class:"input-help"},cl={class:"input-help"},fl={class:"input-help"},bl=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>h.id),r=b(!1),i=b(),s=b();let o=j({short_open_tag:"Off",max_execution_time:50,max_input_time:50,memory_limit:50,post_max_size:50,file_uploads:"On",upload_max_filesize:50,max_file_uploads:20,default_socket_timeout:50,error_reporting:"",display_errors:"On"});const d=j({max_execution_time:[X(0,999999999)],max_input_time:[X(0,999999999)],memory_limit:[X(0,999999999)],post_max_size:[X(0,999999999)],upload_max_filesize:[X(0,999999999)],max_file_uploads:[X(0,999999999)],default_socket_timeout:[X(0,999999999)],error_reporting:[q.requiredInput],short_open_tag:[q.requiredSelect],file_uploads:[q.requiredSelect],display_errors:[q.requiredSelect]}),p=()=>{r.value=!0,ct(_.value).then(u=>{const m=u.data.params;o.short_open_tag=m.short_open_tag,o.max_execution_time=Number(m.max_execution_time),o.max_input_time=Number(m.max_input_time),o.memory_limit=parseFloat(m.memory_limit.replace(/[^\d.]/g,"")),o.post_max_size=parseFloat(m.post_max_size.replace(/[^\d.]/g,"")),o.file_uploads=m.file_uploads,o.upload_max_filesize=parseFloat(m.upload_max_filesize.replace(/[^\d.]/g,"")),o.max_file_uploads=Number(m.max_file_uploads),o.default_socket_timeout=Number(m.default_socket_timeout),o.error_reporting=m.error_reporting,o.display_errors=m.display_errors}).finally(()=>{r.value=!1})},c=async u=>{!u||u.validate(async m=>{if(!m)return;let w={header:T.global.t("database.confChange"),operationInfo:T.global.t("database.restartNowHelper"),submitInputInfo:T.global.t("database.restartNow")};s.value.acceptParams(w)})},v=async()=>{const u={short_open_tag:o.short_open_tag,max_execution_time:String(o.max_execution_time),max_input_time:String(o.max_input_time),memory_limit:o.memory_limit+"M",post_max_size:o.post_max_size+"M",file_uploads:o.file_uploads,upload_max_filesize:o.upload_max_filesize+"M",max_file_uploads:String(o.max_file_uploads),default_socket_timeout:String(o.default_socket_timeout),error_reporting:o.error_reporting,display_errors:o.display_errors};r.value=!0,ft({id:_.value,params:u}).then(()=>{Q(T.global.t("commons.msg.updateSuccess"))}).finally(()=>{r.value=!1})};return B(()=>{p()}),(u,m)=>{const w=Z,f=me,S=_e,n=Y,a=te,g=G,C=ee,N=le,x=K;return z((y(),M("div",null,[t(N,{model:e(o),rules:d,ref_key:"phpFormRef",ref:i,"label-position":"top"},{default:l(()=>[z((y(),k(C,null,{default:l(()=>[t(w,{span:1},{default:l(()=>[al]),_:1}),t(w,{span:9},{default:l(()=>[t(n,{label:"short_open_tag",prop:"short_open_tag"},{default:l(()=>[t(S,{modelValue:e(o).short_open_tag,"onUpdate:modelValue":m[0]||(m[0]=I=>e(o).short_open_tag=I)},{default:l(()=>[t(f,{label:u.$t("website.isOff"),value:"Off"},null,8,["label"]),t(f,{label:u.$t("website.isOn"),value:"On"},null,8,["label"])]),_:1},8,["modelValue"]),U("span",ol,$(u.$t("php.short_open_tag")),1)]),_:1}),t(n,{label:"max_execution_time",prop:"max_execution_time"},{default:l(()=>[t(a,{clearable:"",modelValue:e(o).max_execution_time,"onUpdate:modelValue":m[1]||(m[1]=I=>e(o).max_execution_time=I),modelModifiers:{number:!0},maxlength:"15"},{append:l(()=>[V($(u.$t("php.second")),1)]),_:1},8,["modelValue"]),U("span",nl,$(u.$t("php.max_execution_time")),1)]),_:1}),t(n,{label:"post_max_size",prop:"post_max_size"},{default:l(()=>[t(a,{clearable:"",modelValue:e(o).post_max_size,"onUpdate:modelValue":m[2]||(m[2]=I=>e(o).post_max_size=I),modelModifiers:{number:!0},maxlength:"15"},{append:l(()=>[V("M")]),_:1},8,["modelValue"]),U("span",sl,$(u.$t("php.post_max_size")),1)]),_:1}),t(n,{label:"file_uploads",prop:"file_uploads"},{default:l(()=>[t(S,{modelValue:e(o).file_uploads,"onUpdate:modelValue":m[3]||(m[3]=I=>e(o).file_uploads=I)},{default:l(()=>[t(f,{label:u.$t("website.isOff"),value:"Off"},null,8,["label"]),t(f,{label:u.$t("website.isOn"),value:"On"},null,8,["label"])]),_:1},8,["modelValue"]),U("span",il,$(u.$t("php.file_uploads")),1)]),_:1}),t(n,{label:"upload_max_filesize",prop:"upload_max_filesize"},{default:l(()=>[t(a,{clearable:"",modelValue:e(o).upload_max_filesize,"onUpdate:modelValue":m[4]||(m[4]=I=>e(o).upload_max_filesize=I),modelModifiers:{number:!0},maxlength:"15"},{append:l(()=>[V("M")]),_:1},8,["modelValue"]),U("span",ul,$(u.$t("php.upload_max_filesize")),1)]),_:1}),t(n,{label:"max_file_uploads",prop:"max_file_uploads"},{default:l(()=>[t(a,{clearable:"",modelValue:e(o).max_file_uploads,"onUpdate:modelValue":m[5]||(m[5]=I=>e(o).max_file_uploads=I),modelModifiers:{number:!0},maxlength:"15"},null,8,["modelValue"]),U("span",rl,$(u.$t("php.max_file_uploads")),1)]),_:1}),t(n,null,{default:l(()=>[t(g,{type:"primary",onClick:m[6]||(m[6]=I=>c(i.value))},{default:l(()=>[V($(u.$t("commons.button.save")),1)]),_:1})]),_:1})]),_:1}),t(w,{span:1},{default:l(()=>[dl]),_:1}),t(w,{span:9},{default:l(()=>[t(n,{label:"default_socket_timeout",prop:"default_socket_timeout"},{default:l(()=>[t(a,{clearable:"",modelValue:e(o).default_socket_timeout,"onUpdate:modelValue":m[7]||(m[7]=I=>e(o).default_socket_timeout=I),modelModifiers:{number:!0},maxlength:"15"},{append:l(()=>[V($(u.$t("php.second")),1)]),_:1},8,["modelValue"]),U("span",pl,$(u.$t("php.default_socket_timeout")),1)]),_:1}),t(n,{label:"error_reporting",prop:"error_reporting"},{default:l(()=>[t(a,{clearable:"",modelValue:e(o).error_reporting,"onUpdate:modelValue":m[8]||(m[8]=I=>e(o).error_reporting=I),modelModifiers:{trim:!0}},null,8,["modelValue"]),U("span",ml,$(u.$t("php.error_reporting")),1)]),_:1}),t(n,{label:"display_errors",prop:"display_errors"},{default:l(()=>[t(S,{modelValue:e(o).display_errors,"onUpdate:modelValue":m[9]||(m[9]=I=>e(o).display_errors=I)},{default:l(()=>[t(f,{label:u.$t("website.isOff"),value:"Off"},null,8,["label"]),t(f,{label:u.$t("website.isOn"),value:"On"},null,8,["label"])]),_:1},8,["modelValue"]),U("span",_l,$(u.$t("php.display_errors")),1)]),_:1}),t(n,{label:"max_input_time",prop:"max_input_time"},{default:l(()=>[t(a,{clearable:"",modelValue:e(o).max_input_time,"onUpdate:modelValue":m[10]||(m[10]=I=>e(o).max_input_time=I),modelModifiers:{number:!0},maxlength:"15"},{append:l(()=>[V($(u.$t("php.second")),1)]),_:1},8,["modelValue"]),U("span",cl,$(u.$t("php.max_input_time")),1)]),_:1}),t(n,{label:"memory_limit",prop:"memory_limit"},{default:l(()=>[t(a,{clearable:"",modelValue:e(o).memory_limit,"onUpdate:modelValue":m[11]||(m[11]=I=>e(o).memory_limit=I),modelModifiers:{number:!0},maxlength:"15"},{append:l(()=>[V("M")]),_:1},8,["modelValue"]),U("span",fl,$(u.$t("php.memory_limit")),1)]),_:1})]),_:1})]),_:1})),[[x,r.value]])]),_:1},8,["model","rules"]),t(kt,{ref_key:"confirmDialogRef",ref:s,onConfirm:v},null,512)])),[[x,r.value]])}}}),vl=R({__name:"index",props:{id:{type:Number,default:0}},setup(L){const h=L,_=P(()=>h.id);let r=b("0"),i=b(!1),s=b(0);const o=async()=>{const d=await ne(h.id);d.data.type==="runtime"&&(s.value=d.data.appInstallId,(await we(d.data.runtimeID)).data.resource==="appstore"&&(i.value=!0))};return B(()=>{o()}),(d,p)=>{const c=se,v=ie;return y(),k(v,{"tab-position":"left",modelValue:e(r),"onUpdate:modelValue":p[0]||(p[0]=u=>J(r)?r.value=u:r=u)},{default:l(()=>[t(c,{label:d.$t("website.updateConfig"),name:"0"},{default:l(()=>[t(bl,{id:e(_)},null,8,["id"])]),_:1},8,["label"])]),_:1},8,["modelValue"])}}}),yl={class:"app-status"},gl={class:"status-content"},wl={class:"status-content"},$l={key:0},hl={key:1},kl=R({__name:"index",props:{primaryDomain:{type:String,default:""},status:{type:String,default:""},expireDate:{type:String,default:""}},setup(L){const h=L,_=r=>new Date(r)<new Date("1970-01-02");return(r,i)=>{const s=et,o=tt;return y(),M("div",yl,[t(o,null,{default:l(()=>[U("div",null,[t(s,{effect:"dark",type:"success"},{default:l(()=>[V($(h.primaryDomain),1)]),_:1}),U("span",gl,[(y(),k(St,{class:"span-font",key:h.status,status:h.status},null,8,["status"]))]),U("span",wl,[t(s,{type:"info"},{default:l(()=>[V($(r.$t("website.expireDate"))+": ",1),_(h.expireDate)?(y(),M("span",$l,$(r.$t("website.neverExpire")),1)):(y(),M("span",hl,$(e(Ne)(h.expireDate)),1))]),_:1})])])]),_:1})])}}}),ma=R({__name:"index",props:{id:{type:String,default:"0"},tab:{type:String,default:"basic"}},setup(L){const h=L;let _=b(0),r=b("basic"),i=b({}),s=b(!1);const o=b(!1);lt(r,(p,c)=>{p!=c&&d(p)});const d=p=>{at.push({name:"WebsiteConfig",params:{id:_.value,tab:p}})};return B(()=>{r.value=h.tab,_.value=Number(h.id),s.value=!0,ne(_.value).then(async p=>{i.value=p.data,p.data.type==="runtime"&&(await we(p.data.runtimeID)).data.resource==="appstore"&&(o.value=!0)}).finally(()=>{s.value=!1})}),(p,c)=>{const v=ot,u=G,m=K;return y(),M("div",null,[t(v,{buttons:[{label:p.$t("website.website"),path:"/websites"}]},null,8,["buttons"]),z((y(),k(nt,{title:p.$t("website.websiteConfig"),"back-name":"Website"},{app:l(()=>[e(i).id>0?(y(),k(kl,{key:0,"primary-domain":e(i).primaryDomain,status:e(i).status,"expire-date":e(i).expireDate},null,8,["primary-domain","status","expire-date"])):D("",!0)]),buttons:l(()=>[t(u,{type:"primary",plain:e(r)!=="basic",onClick:c[0]||(c[0]=w=>d("basic"))},{default:l(()=>[V($(p.$t("website.basic")),1)]),_:1},8,["plain"]),t(u,{type:"primary",plain:e(r)!=="safety",onClick:c[1]||(c[1]=w=>d("safety"))},{default:l(()=>[V($(p.$t("website.security")),1)]),_:1},8,["plain"]),t(u,{type:"primary",plain:e(r)!=="log",onClick:c[2]||(c[2]=w=>d("log"))},{default:l(()=>[V($(p.$t("website.log")),1)]),_:1},8,["plain"]),t(u,{type:"primary",plain:e(r)!=="resource",onClick:c[3]||(c[3]=w=>d("resource"))},{default:l(()=>[V($(p.$t("website.source")),1)]),_:1},8,["plain"]),o.value?(y(),k(u,{key:0,type:"primary",plain:e(r)!=="php",onClick:c[4]||(c[4]=w=>d("php"))},{default:l(()=>[V(" PHP ")]),_:1},8,["plain"])):D("",!0)]),main:l(()=>[e(r)==="basic"?(y(),k(Gt,{key:0,id:e(_)},null,8,["id"])):D("",!0),e(r)==="safety"?(y(),k(Jt,{key:1,id:e(_)},null,8,["id"])):D("",!0),e(r)==="log"?(y(),k(ll,{key:2,id:e(_)},null,8,["id"])):D("",!0),e(r)==="resource"?(y(),k(Zt,{key:3,id:e(_)},null,8,["id"])):D("",!0),e(r)==="php"?(y(),k(vl,{key:4,id:e(_)},null,8,["id"])):D("",!0)]),_:1},8,["title"])),[[m,e(s)]])])}}});export{ma as default};
