import{d as P,r as m,x as z,G as U,o as A,A as F,l as H,a1 as I,m as Z,K as j,L as G,aq as K,E as R,p as q,a5 as Y,b as u,h as p,Y as J,c as D,w as n,e as t,g as d,t as r,f as Q,ae as W,O as h,y as O,j as o,$ as X}from"./index-9eeac04e.js";/* empty css                *//* empty css               *//* empty css                *//* empty css            *//* empty css                     *//* empty css                 *//* empty css              *//* empty css               *//* empty css            *//* empty css               */import{_ as ee}from"./index-8d9ad139.js";import{T as te}from"./index-2dd05578.js";import{_ as ae}from"./index-8a66c1e6.js";import{b as le}from"./util-cbaccc93.js";import{_ as oe}from"./layout-content-27c09564.js";import{g as ne,c as se}from"./log-4c7ea13a.js";/* empty css               *//* empty css               *//* empty css                *//* empty css                    *//* empty css             */import"./index-5ffc91ba.js";const ie={class:"search-button"},re={key:0},ue={key:0},me={key:1},pe={key:1},Pe=P({__name:"index",setup(de){const f=m(),v=m(),C=m(),c=z({currentPage:1,pageSize:10,total:0}),$=m(""),y=m(""),S=m(""),_=U(),i=async()=>{let e={operation:$.value,page:c.currentPage,pageSize:c.pageSize,status:S.value,source:y.value};f.value=!0,await ne(e).then(a=>{if(f.value=!1,v.value=a.data.items||[],_.language==="zh")for(const b of v.value)b.detailZH=T(b.detailZH);c.total=a.data.total}).catch(()=>{f.value=!1})},M=async()=>{let e={header:o.global.t("logs.deleteLogs"),operationInfo:o.global.t("commons.msg.delete"),submitInputInfo:o.global.t("logs.deleteLogs")};C.value.acceptParams(e)},T=e=>(e.indexOf("[enable]")!==-1&&(e=e.replace("[enable]","["+o.global.t("commons.button.enable")+"]")),e.indexOf("[disable]")!==-1&&(e=e.replace("[disable]","["+o.global.t("commons.button.disable")+"]")),e.indexOf("[light]")!==-1&&(e=e.replace("[light]","["+o.global.t("setting.light")+"]")),e.indexOf("[dark]")!==-1&&(e=e.replace("[dark]","["+o.global.t("setting.dark")+"]")),e.indexOf("[UserName]")!==-1?e.replace("[UserName]","["+o.global.t("setting.user")+"]"):e.indexOf("[PanelName]")!==-1?e.replace("[PanelName]","["+o.global.t("setting.title")+"]"):e.indexOf("[Language]")!==-1?e.replace("[Language]","["+o.global.t("setting.language")+"]"):e.indexOf("[Theme]")!==-1?e.replace("[Theme]","["+o.global.t("setting.theme")+"]"):e.indexOf("[SessionTimeout]")!==-1?e.replace("[SessionTimeout]","["+o.global.t("setting.sessionTimeout")+"]"):e.indexOf("[ExpirationDays]")!==-1?e.replace("[ExpirationDays]","["+o.global.t("setting.expirationTime")+"]"):e.indexOf("[ComplexityVerification]")!==-1?e.replace("[ComplexityVerification]","["+o.global.t("setting.complexity")+"]"):e.indexOf("[MFAStatus]")!==-1?e.replace("[MFAStatus]","["+o.global.t("setting.mfa")+"]"):e.indexOf("[MonitorStatus]")!==-1?e.replace("[MonitorStatus]","["+o.global.t("setting.enableMonitor")+"]"):e.indexOf("[MonitorStoreDays]")!==-1?e.replace("[MonitorStoreDays]","["+o.global.t("setting.monitor")+"]"):e.indexOf("[MonitorStoreDays]")!==-1?e.replace("[MonitorStoreDays]","["+o.global.t("setting.monitor")+"]"):e.indexOf("[MonitorStoreDays]")!==-1?e.replace("[MonitorStoreDays]","["+o.global.t("setting.monitor")+"]"):e),w=async()=>{await se({logType:"operation"}),i(),X(o.global.t("commons.msg.operationSuccess"))};return A(()=>{i()}),(e,a)=>{const b=F,V=H,N=I,L=Z,s=j,E=G,g=K,k=R,x=q,B=Y;return u(),p("div",null,[J((u(),D(oe,{title:e.$t("logs.operation")},{toolbar:n(()=>[t(L,null,{default:n(()=>[t(V,{span:16},{default:n(()=>[t(b,{type:"primary",plain:"",onClick:a[0]||(a[0]=l=>M())},{default:n(()=>[d(r(e.$t("logs.deleteLogs")),1)]),_:1})]),_:1}),t(V,{span:8},{default:n(()=>[t(te,{onSearch:a[1]||(a[1]=l=>i())}),Q("div",ie,[t(N,{modelValue:$.value,"onUpdate:modelValue":a[2]||(a[2]=l=>$.value=l),clearable:"",onClear:a[3]||(a[3]=l=>i()),"suffix-icon":"Search",onKeyup:a[4]||(a[4]=W(l=>i(),["enter"])),onBlur:a[5]||(a[5]=l=>i()),placeholder:e.$t("commons.button.search")},null,8,["modelValue","placeholder"])])]),_:1})]),_:1})]),search:n(()=>[t(E,{modelValue:y.value,"onUpdate:modelValue":a[6]||(a[6]=l=>y.value=l),onChange:a[7]||(a[7]=l=>i()),clearable:""},{prefix:n(()=>[d(r(e.$t("logs.resource")),1)]),default:n(()=>[t(s,{label:e.$t("commons.table.all"),value:""},null,8,["label"]),t(s,{label:e.$t("logs.detail.apps"),value:"apps"},null,8,["label"]),t(s,{label:e.$t("logs.detail.websites"),value:"websites"},null,8,["label"]),t(s,{label:e.$t("logs.detail.databases"),value:"databases"},null,8,["label"]),t(s,{label:e.$t("logs.detail.containers"),value:"containers"},null,8,["label"]),t(s,{label:e.$t("logs.detail.cronjobs"),value:"cronjobs"},null,8,["label"]),t(s,{label:e.$t("logs.detail.files"),value:"files"},null,8,["label"]),t(s,{label:e.$t("logs.detail.hosts"),value:"hosts"},null,8,["label"]),t(s,{label:e.$t("logs.detail.logs"),value:"logs"},null,8,["label"]),t(s,{label:e.$t("logs.detail.settings"),value:"settings"},null,8,["label"])]),_:1},8,["modelValue"]),t(E,{modelValue:S.value,"onUpdate:modelValue":a[8]||(a[8]=l=>S.value=l),onChange:a[9]||(a[9]=l=>i()),clearable:"",style:{"margin-left":"10px"}},{prefix:n(()=>[d(r(e.$t("commons.table.status")),1)]),default:n(()=>[t(s,{label:e.$t("commons.table.all"),value:""},null,8,["label"]),t(s,{label:e.$t("commons.status.success"),value:"Success"},null,8,["label"]),t(s,{label:e.$t("commons.status.failed"),value:"Failed"},null,8,["label"])]),_:1},8,["modelValue"])]),main:n(()=>[t(ee,{"pagination-config":c,data:v.value,onSearch:i},{default:n(()=>[t(g,{label:e.$t("logs.resource"),prop:"group",fix:""},{default:n(({row:l})=>[l.source?(u(),p("span",re,r(e.$t("logs.detail."+l.source)),1)):h("",!0)]),_:1},8,["label"]),t(g,{label:e.$t("logs.operate"),"min-width":"150px",prop:"detailZH"},{default:n(({row:l})=>[O(_).language==="zh"?(u(),p("span",ue,r(l.detailZH),1)):h("",!0),O(_).language==="en"?(u(),p("span",me,r(l.detailEN),1)):h("",!0)]),_:1},8,["label"]),t(g,{label:e.$t("commons.table.status"),prop:"status"},{default:n(({row:l})=>[l.status==="Success"?(u(),D(k,{key:0,class:"ml-2",type:"success"},{default:n(()=>[d(r(e.$t("commons.status.success")),1)]),_:1})):(u(),p("div",pe,[t(x,{placement:"top-start",title:e.$t("commons.table.message"),width:400,trigger:"hover",content:l.message},{reference:n(()=>[t(k,{class:"ml-2",type:"danger"},{default:n(()=>[d(r(e.$t("commons.status.failed")),1)]),_:1})]),_:2},1032,["title","content"])]))]),_:1},8,["label"]),t(g,{prop:"createdAt",label:e.$t("commons.table.date"),formatter:O(le),"show-overflow-tooltip":""},null,8,["label","formatter"])]),_:1},8,["pagination-config","data"])]),_:1},8,["title"])),[[B,f.value]]),t(ae,{ref_key:"confirmDialogRef",ref:C,onConfirm:w},null,512)])}}});export{Pe as default};
